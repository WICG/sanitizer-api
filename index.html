<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <title>HTML Sanitizer API</title>
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
  <link href="https://www.w3.org/StyleSheets/TR/2021/cg-draft" rel="stylesheet">
  <meta content="Bikeshed version d765c696b, updated Fri Mar 8 15:58:52 2024 -0800" name="generator">
  <link href="https://wicg.github.io/sanitizer-api/" rel="canonical">
  <meta content="d5204ad1edcf907c3c96f0bbcfe22fbab3bfce11" name="revision">
  <meta content="dark light" name="color-scheme">
  <link href="https://www.w3.org/StyleSheets/TR/2021/dark.css" media="(prefers-color-scheme: dark)" rel="stylesheet" type="text/css">
<style>/* Boilerplate: style-autolinks */
.css.css, .property.property, .descriptor.descriptor {
    color: var(--a-normal-text);
    font-size: inherit;
    font-family: inherit;
}
.css::before, .property::before, .descriptor::before {
    content: "‘";
}
.css::after, .property::after, .descriptor::after {
    content: "’";
}
.property, .descriptor {
    /* Don't wrap property and descriptor names */
    white-space: nowrap;
}
.type { /* CSS value <type> */
    font-style: italic;
}
pre .property::before, pre .property::after {
    content: "";
}
[data-link-type="property"]::before,
[data-link-type="propdesc"]::before,
[data-link-type="descriptor"]::before,
[data-link-type="value"]::before,
[data-link-type="function"]::before,
[data-link-type="at-rule"]::before,
[data-link-type="selector"]::before,
[data-link-type="maybe"]::before {
    content: "‘";
}
[data-link-type="property"]::after,
[data-link-type="propdesc"]::after,
[data-link-type="descriptor"]::after,
[data-link-type="value"]::after,
[data-link-type="function"]::after,
[data-link-type="at-rule"]::after,
[data-link-type="selector"]::after,
[data-link-type="maybe"]::after {
    content: "’";
}

[data-link-type].production::before,
[data-link-type].production::after,
.prod [data-link-type]::before,
.prod [data-link-type]::after {
    content: "";
}

[data-link-type=element],
[data-link-type=element-attr] {
    font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
    font-size: .9em;
}
[data-link-type=element]::before { content: "<" }
[data-link-type=element]::after  { content: ">" }

[data-link-type=biblio] {
    white-space: pre;
}

@media (prefers-color-scheme: dark) {
    :root {
        --selflink-text: black;
        --selflink-bg: silver;
        --selflink-hover-text: white;
    }
}
</style>
<style>/* Boilerplate: style-colors */
/* Any --*-text not paired with a --*-bg is assumed to have a transparent bg */
:root {
    color-scheme: light dark;

    --text: black;
    --bg: white;

    --unofficial-watermark: url(https://www.w3.org/StyleSheets/TR/2016/logos/UD-watermark);

    --logo-bg: #1a5e9a;
    --logo-active-bg: #c00;
    --logo-text: white;

    --tocnav-normal-text: #707070;
    --tocnav-normal-bg: var(--bg);
    --tocnav-hover-text: var(--tocnav-normal-text);
    --tocnav-hover-bg: #f8f8f8;
    --tocnav-active-text: #c00;
    --tocnav-active-bg: var(--tocnav-normal-bg);

    --tocsidebar-text: var(--text);
    --tocsidebar-bg: #f7f8f9;
    --tocsidebar-shadow: rgba(0,0,0,.1);
    --tocsidebar-heading-text: hsla(203,20%,40%,.7);

    --toclink-text: var(--text);
    --toclink-underline: #3980b5;
    --toclink-visited-text: var(--toclink-text);
    --toclink-visited-underline: #054572;

    --heading-text: #005a9c;

    --hr-text: var(--text);

    --algo-border: #def;

    --del-text: red;
    --del-bg: transparent;
    --ins-text: #080;
    --ins-bg: transparent;

    --a-normal-text: #034575;
    --a-normal-underline: #bbb;
    --a-visited-text: var(--a-normal-text);
    --a-visited-underline: #707070;
    --a-hover-bg: rgba(75%, 75%, 75%, .25);
    --a-active-text: #c00;
    --a-active-underline: #c00;

    --blockquote-border: silver;
    --blockquote-bg: transparent;
    --blockquote-text: currentcolor;

    --issue-border: #e05252;
    --issue-bg: #fbe9e9;
    --issue-text: var(--text);
    --issueheading-text: #831616;

    --example-border: #e0cb52;
    --example-bg: #fcfaee;
    --example-text: var(--text);
    --exampleheading-text: #574b0f;

    --note-border: #52e052;
    --note-bg: #e9fbe9;
    --note-text: var(--text);
    --noteheading-text: hsl(120, 70%, 30%);
    --notesummary-underline: silver;

    --assertion-border: #aaa;
    --assertion-bg: #eee;
    --assertion-text: black;

    --advisement-border: orange;
    --advisement-bg: #fec;
    --advisement-text: var(--text);
    --advisementheading-text: #b35f00;

    --warning-border: red;
    --warning-bg: hsla(40,100%,50%,0.95);
    --warning-text: var(--text);

    --amendment-border: #330099;
    --amendment-bg: #F5F0FF;
    --amendment-text: var(--text);
    --amendmentheading-text: #220066;

    --def-border: #8ccbf2;
    --def-bg: #def;
    --def-text: var(--text);
    --defrow-border: #bbd7e9;

    --datacell-border: silver;

    --indexinfo-text: #707070;

    --indextable-hover-text: black;
    --indextable-hover-bg: #f7f8f9;

    --outdatedspec-bg: rgba(0, 0, 0, .5);
    --outdatedspec-text: black;
    --outdated-bg: maroon;
    --outdated-text: white;
    --outdated-shadow: red;

    --editedrec-bg: darkorange;
}

@media (prefers-color-scheme: dark) {
    :root {
        --text: #ddd;
        --bg: black;

        --unofficial-watermark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Cg fill='%23100808' transform='translate(200 200) rotate(-45) translate(-200 -200)' stroke='%23100808' stroke-width='3'%3E%3Ctext x='50%25' y='220' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EUNOFFICIAL%3C/text%3E%3Ctext x='50%25' y='305' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EDRAFT%3C/text%3E%3C/g%3E%3C/svg%3E");

        --logo-bg: #1a5e9a;
        --logo-active-bg: #c00;
        --logo-text: white;

        --tocnav-normal-text: #999;
        --tocnav-normal-bg: var(--bg);
        --tocnav-hover-text: var(--tocnav-normal-text);
        --tocnav-hover-bg: #080808;
        --tocnav-active-text: #f44;
        --tocnav-active-bg: var(--tocnav-normal-bg);

        --tocsidebar-text: var(--text);
        --tocsidebar-bg: #080808;
        --tocsidebar-shadow: rgba(255,255,255,.1);
        --tocsidebar-heading-text: hsla(203,20%,40%,.7);

        --toclink-text: var(--text);
        --toclink-underline: #6af;
        --toclink-visited-text: var(--toclink-text);
        --toclink-visited-underline: #054572;

        --heading-text: #8af;

        --hr-text: var(--text);

        --algo-border: #456;

        --del-text: #f44;
        --del-bg: transparent;
        --ins-text: #4a4;
        --ins-bg: transparent;

        --a-normal-text: #6af;
        --a-normal-underline: #555;
        --a-visited-text: var(--a-normal-text);
        --a-visited-underline: var(--a-normal-underline);
        --a-hover-bg: rgba(25%, 25%, 25%, .2);
        --a-active-text: #f44;
        --a-active-underline: var(--a-active-text);

        --borderedblock-bg: rgba(255, 255, 255, .05);

        --blockquote-border: silver;
        --blockquote-bg: var(--borderedblock-bg);
        --blockquote-text: currentcolor;

        --issue-border: #e05252;
        --issue-bg: var(--borderedblock-bg);
        --issue-text: var(--text);
        --issueheading-text: hsl(0deg, 70%, 70%);

        --example-border: hsl(50deg, 90%, 60%);
        --example-bg: var(--borderedblock-bg);
        --example-text: var(--text);
        --exampleheading-text: hsl(50deg, 70%, 70%);

        --note-border: hsl(120deg, 100%, 35%);
        --note-bg: var(--borderedblock-bg);
        --note-text: var(--text);
        --noteheading-text: hsl(120, 70%, 70%);
        --notesummary-underline: silver;

        --assertion-border: #444;
        --assertion-bg: var(--borderedblock-bg);
        --assertion-text: var(--text);

        --advisement-border: orange;
        --advisement-bg: #222218;
        --advisement-text: var(--text);
        --advisementheading-text: #f84;

        --warning-border: red;
        --warning-bg: hsla(40,100%,20%,0.95);
        --warning-text: var(--text);

        --amendment-border: #330099;
        --amendment-bg: #080010;
        --amendment-text: var(--text);
        --amendmentheading-text: #cc00ff;

        --def-border: #8ccbf2;
        --def-bg: #080818;
        --def-text: var(--text);
        --defrow-border: #136;

        --datacell-border: silver;

        --indexinfo-text: #aaa;

        --indextable-hover-text: var(--text);
        --indextable-hover-bg: #181818;

        --outdatedspec-bg: rgba(255, 255, 255, .5);
        --outdatedspec-text: black;
        --outdated-bg: maroon;
        --outdated-text: white;
        --outdated-shadow: red;

        --editedrec-bg: darkorange;
    }
    /* In case a transparent-bg image doesn't expect to be on a dark bg,
       which is quite common in practice... */
    img { background: white; }
}
</style>
<style>/* Boilerplate: style-counters */
body {
    counter-reset: example figure issue;
}
.issue {
    counter-increment: issue;
}
.issue:not(.no-marker)::before {
    content: "Issue " counter(issue);
}

.example {
    counter-increment: example;
}
.example:not(.no-marker)::before {
    content: "Example " counter(example);
}
.invalid.example:not(.no-marker)::before,
.illegal.example:not(.no-marker)::before {
    content: "Invalid Example" counter(example);
}

figcaption {
    counter-increment: figure;
}
figcaption:not(.no-marker)::before {
    content: "Figure " counter(figure) " ";
}
</style>
<style>/* Boilerplate: style-dfn-panel */
:root {
    --dfnpanel-bg: #ddd;
    --dfnpanel-text: var(--text);
    --dfnpanel-target-bg: #ffc;
    --dfnpanel-target-outline: orange;
}
@media (prefers-color-scheme: dark) {
    :root {
        --dfnpanel-bg: #222;
        --dfnpanel-text: var(--text);
        --dfnpanel-target-bg: #333;
        --dfnpanel-target-outline: silver;
    }
}
.dfn-panel {
    position: absolute;
    z-index: 35;
    width: 20em;
    width: 300px;
    height: auto;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.75em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: var(--dfnpanel-bg);
    color: var(--dfnpanel-text);
    border: outset 0.2em;
    white-space: normal; /* in case it's moved into a pre */
}
.dfn-panel:not(.on) { display: none; }
.dfn-panel * { margin: 0; padding: 0; text-indent: 0; }
.dfn-panel > b { display: block; }
.dfn-panel a { color: var(--dfnpanel-text); }
.dfn-panel a:not(:hover) { text-decoration: none !important; border-bottom: none !important; }
.dfn-panel a:focus {
    outline: 5px auto Highlight;
    outline: 5px auto -webkit-focus-ring-color;
}
.dfn-panel > b + b { margin-top: 0.25em; }
.dfn-panel ul { padding: 0 0 0 1em; list-style: none; }
.dfn-panel li a {
    max-width: calc(300px - 1.5em - 1em);
    overflow: hidden;
    text-overflow: ellipsis;
}

.dfn-panel.activated {
    display: inline-block;
    position: fixed;
    left: 8px;
    bottom: 2em;
    margin: 0 auto;
    max-width: calc(100vw - 1.5em - .4em - .5em);
    max-height: 30vh;
    transition: left 1s ease-out, bottom 1s ease-out;
}

.dfn-panel .link-item:hover {
    text-decoration: underline;
}
.dfn-panel .link-item .copy-icon {
    opacity: 0;
}
.dfn-panel .link-item:hover .copy-icon,
.dfn-panel .link-item .copy-icon:focus {
    opacity: 1;
}

.dfn-panel .copy-icon {
    display: inline-block;
    margin-right: 0.5em;
    width: 0.85em;
    height: 1em;
    border-radius: 3px;
    background-color: #ccc;
    cursor: pointer;
}

.dfn-panel .copy-icon .icon {
    width: 100%;
    height: 100%;
    background-color: #fff;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
}

.dfn-panel .copy-icon .icon::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: 1px solid black;
    background-color: #ccc;
    opacity: 0.25;
    transform: translate(3px, -3px);
}

.dfn-panel .copy-icon:active .icon::before {
    opacity: 1;
}

.dfn-paneled[role="button"] { cursor: help; }

.highlighted {
    animation: target-fade 3s;
}

@keyframes target-fade {
    from {
        background-color: var(--dfnpanel-target-bg);
        outline: 5px solid var(--dfnpanel-target-outline);
    }
    to {
        color: var(--a-normal-text);
        background-color: transparent;
        outline: transparent;
    }
}
</style>
<style>/* Boilerplate: style-idl-highlighting */
pre.idl.highlight {
    background: var(--borderedblock-bg, var(--def-bg));
}
</style>
<style>/* Boilerplate: style-issues */
a[href].issue-return {
    float: right;
    float: inline-end;
    color: var(--issueheading-text);
    font-weight: bold;
    text-decoration: none;
}
</style>
<style>/* Boilerplate: style-md-lists */
/* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
[data-md] > :first-child {
    margin-top: 0;
}
[data-md] > :last-child {
    margin-bottom: 0;
}
</style>
<style>/* Boilerplate: style-ref-hints */
:root {
    --ref-hint-bg: #ddd;
    --ref-hint-text: var(--text);
}
@media (prefers-color-scheme: dark) {
    :root {
        --ref-hint-bg: #222;
        --ref-hint-text: var(--text);
    }
}

.ref-hint {
    display: inline-block;
    position: absolute;
    z-index: 35;
    width: 20em;
    width: 300px;
    height: auto;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.5em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: var(--ref-hint-bg);
    color: var(--ref-hint-text);
    border: outset 0.2em;
    white-space: normal; /* in case it's moved into a pre */
}

.ref-hint * { margin: 0; padding: 0; text-indent: 0; }

.ref-hint ul { padding: 0 0 0 1em; list-style: none; }
</style>
<style>/* Boilerplate: style-selflinks */
:root {
    --selflink-text: white;
    --selflink-bg: gray;
    --selflink-hover-text: black;
}
.heading, .issue, .note, .example, li, dt {
    position: relative;
}
a.self-link {
    position: absolute;
    top: 0;
    left: calc(-1 * (3.5rem - 26px));
    width: calc(3.5rem - 26px);
    height: 2em;
    text-align: center;
    border: none;
    transition: opacity .2s;
    opacity: .5;
}
a.self-link:hover {
    opacity: 1;
}
.heading > a.self-link {
    font-size: 83%;
}
.example > a.self-link,
.note > a.self-link,
.issue > a.self-link {
    /* These blocks are overflow:auto, so positioning outside
       doesn't work. */
    left: auto;
    right: 0;
}
li > a.self-link {
    left: calc(-1 * (3.5rem - 26px) - 2em);
}
dfn > a.self-link {
    top: auto;
    left: auto;
    opacity: 0;
    width: 1.5em;
    height: 1.5em;
    background: var(--selflink-bg);
    color: var(--selflink-text);
    font-style: normal;
    transition: opacity .2s, background-color .2s, color .2s;
}
dfn:hover > a.self-link {
    opacity: 1;
}
dfn > a.self-link:hover {
    color: var(--selflink-hover-text);
}

a.self-link::before            { content: "¶"; }
.heading > a.self-link::before { content: "§"; }
dfn > a.self-link::before      { content: "#"; }
</style>
<style>/* Boilerplate: style-syntax-highlighting */
code.highlight { padding: .1em; border-radius: .3em; }
pre.highlight, pre > code.highlight { display: block; padding: 1em; margin: .5em 0; overflow: auto; border-radius: 0; }

.highlight:not(.idl) { background: rgba(0, 0, 0, .03); }
c-[a] { color: #990055 } /* Keyword.Declaration */
c-[b] { color: #990055 } /* Keyword.Type */
c-[c] { color: #708090 } /* Comment */
c-[d] { color: #708090 } /* Comment.Multiline */
c-[e] { color: #0077aa } /* Name.Attribute */
c-[f] { color: #669900 } /* Name.Tag */
c-[g] { color: #222222 } /* Name.Variable */
c-[k] { color: #990055 } /* Keyword */
c-[l] { color: #000000 } /* Literal */
c-[m] { color: #000000 } /* Literal.Number */
c-[n] { color: #0077aa } /* Name */
c-[o] { color: #999999 } /* Operator */
c-[p] { color: #999999 } /* Punctuation */
c-[s] { color: #a67f59 } /* Literal.String */
c-[t] { color: #a67f59 } /* Literal.String.Single */
c-[u] { color: #a67f59 } /* Literal.String.Double */
c-[cp] { color: #708090 } /* Comment.Preproc */
c-[c1] { color: #708090 } /* Comment.Single */
c-[cs] { color: #708090 } /* Comment.Special */
c-[kc] { color: #990055 } /* Keyword.Constant */
c-[kn] { color: #990055 } /* Keyword.Namespace */
c-[kp] { color: #990055 } /* Keyword.Pseudo */
c-[kr] { color: #990055 } /* Keyword.Reserved */
c-[ld] { color: #000000 } /* Literal.Date */
c-[nc] { color: #0077aa } /* Name.Class */
c-[no] { color: #0077aa } /* Name.Constant */
c-[nd] { color: #0077aa } /* Name.Decorator */
c-[ni] { color: #0077aa } /* Name.Entity */
c-[ne] { color: #0077aa } /* Name.Exception */
c-[nf] { color: #0077aa } /* Name.Function */
c-[nl] { color: #0077aa } /* Name.Label */
c-[nn] { color: #0077aa } /* Name.Namespace */
c-[py] { color: #0077aa } /* Name.Property */
c-[ow] { color: #999999 } /* Operator.Word */
c-[mb] { color: #000000 } /* Literal.Number.Bin */
c-[mf] { color: #000000 } /* Literal.Number.Float */
c-[mh] { color: #000000 } /* Literal.Number.Hex */
c-[mi] { color: #000000 } /* Literal.Number.Integer */
c-[mo] { color: #000000 } /* Literal.Number.Oct */
c-[sb] { color: #a67f59 } /* Literal.String.Backtick */
c-[sc] { color: #a67f59 } /* Literal.String.Char */
c-[sd] { color: #a67f59 } /* Literal.String.Doc */
c-[se] { color: #a67f59 } /* Literal.String.Escape */
c-[sh] { color: #a67f59 } /* Literal.String.Heredoc */
c-[si] { color: #a67f59 } /* Literal.String.Interpol */
c-[sx] { color: #a67f59 } /* Literal.String.Other */
c-[sr] { color: #a67f59 } /* Literal.String.Regex */
c-[ss] { color: #a67f59 } /* Literal.String.Symbol */
c-[vc] { color: #0077aa } /* Name.Variable.Class */
c-[vg] { color: #0077aa } /* Name.Variable.Global */
c-[vi] { color: #0077aa } /* Name.Variable.Instance */
c-[il] { color: #000000 } /* Literal.Number.Integer.Long */

@media (prefers-color-scheme: dark) {
    .highlight:not(.idl) { background: rgba(255, 255, 255, .05); }

    c-[a] { color: #d33682 } /* Keyword.Declaration */
    c-[b] { color: #d33682 } /* Keyword.Type */
    c-[c] { color: #2aa198 } /* Comment */
    c-[d] { color: #2aa198 } /* Comment.Multiline */
    c-[e] { color: #268bd2 } /* Name.Attribute */
    c-[f] { color: #b58900 } /* Name.Tag */
    c-[g] { color: #cb4b16 } /* Name.Variable */
    c-[k] { color: #d33682 } /* Keyword */
    c-[l] { color: #657b83 } /* Literal */
    c-[m] { color: #657b83 } /* Literal.Number */
    c-[n] { color: #268bd2 } /* Name */
    c-[o] { color: #657b83 } /* Operator */
    c-[p] { color: #657b83 } /* Punctuation */
    c-[s] { color: #6c71c4 } /* Literal.String */
    c-[t] { color: #6c71c4 } /* Literal.String.Single */
    c-[u] { color: #6c71c4 } /* Literal.String.Double */
    c-[ch] { color: #2aa198 } /* Comment.Hashbang */
    c-[cp] { color: #2aa198 } /* Comment.Preproc */
    c-[cpf] { color: #2aa198 } /* Comment.PreprocFile */
    c-[c1] { color: #2aa198 } /* Comment.Single */
    c-[cs] { color: #2aa198 } /* Comment.Special */
    c-[kc] { color: #d33682 } /* Keyword.Constant */
    c-[kn] { color: #d33682 } /* Keyword.Namespace */
    c-[kp] { color: #d33682 } /* Keyword.Pseudo */
    c-[kr] { color: #d33682 } /* Keyword.Reserved */
    c-[ld] { color: #657b83 } /* Literal.Date */
    c-[nc] { color: #268bd2 } /* Name.Class */
    c-[no] { color: #268bd2 } /* Name.Constant */
    c-[nd] { color: #268bd2 } /* Name.Decorator */
    c-[ni] { color: #268bd2 } /* Name.Entity */
    c-[ne] { color: #268bd2 } /* Name.Exception */
    c-[nf] { color: #268bd2 } /* Name.Function */
    c-[nl] { color: #268bd2 } /* Name.Label */
    c-[nn] { color: #268bd2 } /* Name.Namespace */
    c-[py] { color: #268bd2 } /* Name.Property */
    c-[ow] { color: #657b83 } /* Operator.Word */
    c-[mb] { color: #657b83 } /* Literal.Number.Bin */
    c-[mf] { color: #657b83 } /* Literal.Number.Float */
    c-[mh] { color: #657b83 } /* Literal.Number.Hex */
    c-[mi] { color: #657b83 } /* Literal.Number.Integer */
    c-[mo] { color: #657b83 } /* Literal.Number.Oct */
    c-[sa] { color: #6c71c4 } /* Literal.String.Affix */
    c-[sb] { color: #6c71c4 } /* Literal.String.Backtick */
    c-[sc] { color: #6c71c4 } /* Literal.String.Char */
    c-[dl] { color: #6c71c4 } /* Literal.String.Delimiter */
    c-[sd] { color: #6c71c4 } /* Literal.String.Doc */
    c-[se] { color: #6c71c4 } /* Literal.String.Escape */
    c-[sh] { color: #6c71c4 } /* Literal.String.Heredoc */
    c-[si] { color: #6c71c4 } /* Literal.String.Interpol */
    c-[sx] { color: #6c71c4 } /* Literal.String.Other */
    c-[sr] { color: #6c71c4 } /* Literal.String.Regex */
    c-[ss] { color: #6c71c4 } /* Literal.String.Symbol */
    c-[fm] { color: #268bd2 } /* Name.Function.Magic */
    c-[vc] { color: #cb4b16 } /* Name.Variable.Class */
    c-[vg] { color: #cb4b16 } /* Name.Variable.Global */
    c-[vi] { color: #cb4b16 } /* Name.Variable.Instance */
    c-[vm] { color: #cb4b16 } /* Name.Variable.Magic */
    c-[il] { color: #657b83 } /* Literal.Number.Integer.Long */
}
</style>
<style>/* Boilerplate: style-var-click-highlighting */
/*
Colors were chosen in Lab using https://nixsensor.com/free-color-converter/
D50 2deg illuminant, L in [0,100], a and b in [-128, 128]
0 = lab(85,0,85)
1 = lab(85,80,30)
2 = lab(85,-40,40)
3 = lab(85,-50,0)
4 = lab(85,5,15)
5 = lab(85,-10,-50)
6 = lab(85,35,-15)
*/
[data-algorithm] var { cursor: pointer; }
var[data-var-color="0"] { background-color: #F4D200; box-shadow: 0 0 0 2px #F4D200; }
var[data-var-color="1"] { background-color: #FF87A2; box-shadow: 0 0 0 2px #FF87A2; }
var[data-var-color="2"] { background-color: #96E885; box-shadow: 0 0 0 2px #96E885; }
var[data-var-color="3"] { background-color: #3EEED2; box-shadow: 0 0 0 2px #3EEED2; }
var[data-var-color="4"] { background-color: #EACFB6; box-shadow: 0 0 0 2px #EACFB6; }
var[data-var-color="5"] { background-color: #82DDFF; box-shadow: 0 0 0 2px #82DDFF; }
var[data-var-color="6"] { background-color: #FFBCF2; box-shadow: 0 0 0 2px #FFBCF2; }
</style>
<style>/* Boilerplate: style-wpt */
:root {
    --wpt-border: hsl(0, 0%, 60%);
    --wpt-bg: hsl(0, 0%, 95%);
    --wpt-text: var(--text);
    --wptheading-text: hsl(0, 0%, 30%);
}
@media (prefers-color-scheme: dark) {
    :root {
        --wpt-border: hsl(0, 0%, 30%);
        --wpt-bg: var(--borderedblock-bg);
        --wpt-text: var(--text);
        --wptheading-text: hsl(0, 0%, 60%);
    }
}
.wpt-tests-block {
    list-style: none;
    border-left: .5em solid var(--wpt-border);
    background: var(--wpt-bg);
    color: var(--wpt-text);
    margin: 1em auto;
    padding: .5em;
}
.wpt-tests-block summary {
    color: var(--wptheading-text);
    font-weight: normal;
    text-transform: uppercase;
}
.wpt-tests-block summary::marker{
    color: var(--wpt-border);
}
.wpt-tests-block summary:hover::marker{
    color: var(--wpt-text);
}
/*
   The only content  of a wpt test block in its closed state is the <summary>,
   which contains the word TESTS,
   and that is absolutely positioned.
   In that closed state, wpt test blocks are styled
   to have a top margin whose height is exactly equal
   to the height of the absolutely positioned <summary>,
   and no other background/padding/margin/border.
   The wpt test block elements will therefore allow the maring
   of the previous/next block elements
   to collapse through them;
   if this combined margin would be larger than its own top margin,
   it stays as is,
   and therefore the pre-existing vertical rhythm of the document is undisturbed.
   If that combined margin would be smaller, it is grown to that size.
   This means that the wpt test block ensures
   that there's always enough vertical space to insert the summary,
   without adding more than is needed.
*/
.wpt-tests-block:not([open]){
    padding: 0;
    border: none;
    background: none;
    font-size: 0.75em;
    line-height: 1;
    position: relative;
    margin: 1em 0 0;
}
.wpt-tests-block:not([open]) summary {
    position: absolute;
    right: 0;
    bottom: 0;
}
/*
   It is possible that both the last child of a block element
   and the block element itself
   would be annotated with a <wpt> block each.
   If the block element has a padding or a border,
   that's fine, but otherwise
   the bottom margin of the block and of its last child would collapse
   and both <wpt> elements would overlap, being both placed there.
   To avoid that, add 1px of padding to the <wpt> element annotating the last child
   to prevent the bottom margin of the block and of its last child from collapsing
   (and as much negative margin,
   as wel only want to prevent margin collapsing,
   but are not trying to actually take more space).
*/
.wpt-tests-block:not([open]):last-child {
    padding-bottom: 1px;
    margin-bottom: -1px;
}
/*
   Exception to the previous rule:
   don't do that in non-last list items,
   because it's not necessary,
   and would therefore consume more space than strictly needed.
   Lists must have list items as children, not <wpt> elements,
   so a <wpt> element cannot be a sibling of a list item,
   and the collision that the previous rule avoids cannot happen.
*/
li:not(:last-child) > .wpt-tests-block:not([open]):last-child,
dd:not(:last-child) > .wpt-tests-block:not([open]):last-child {
    padding-bottom: 0;
    margin-bottom: 0;
}
.wpt-tests-block:not([open]):not(:hover){
    opacity: 0.5;
}
.wpt-tests-list {
    list-style: none;
    display: grid;
    margin: 0;
    padding: 0;
    grid-template-columns: 1fr max-content auto auto;
    grid-column-gap: .5em;
}
.wpt-tests-block hr:last-child {
    display: none;
}
.wpt-test {
    display: contents;
}
.wpt-test > a {
    text-decoration: underline;
    border: none;
}
.wpt-test > .wpt-name { grid-column: 1; }
.wpt-test > .wpt-results { grid-column: 2; }
.wpt-test > .wpt-live { grid-column: 3; }
.wpt-test > .wpt-source { grid-column: 4; }

.wpt-test > .wpt-results {
    display: flex;
    gap: .1em;
}
.wpt-test .wpt-result {
    display: inline-block;
    height: 1em;
    width: 1em;
    border-radius: 50%;
    position: relative;
}
</style>
 <body class="h-entry">
  <div class="head">
   <p data-fill-with="logo"><a class="logo" href="https://www.w3.org/"> <img alt="W3C" height="48" src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72"> </a> </p>
   <h1 class="p-name no-ref" id="title">HTML Sanitizer API</h1>
   <p id="w3c-state"><a href="https://www.w3.org/standards/types#CG-DRAFT">Draft Community Group Report</a>, <time class="dt-updated" datetime="2024-05-27">27 May 2024</time></p>
   <div data-fill-with="spec-metadata">
    <dl>
     <dt>This version:
     <dd><a class="u-url" href="https://wicg.github.io/sanitizer-api/">https://wicg.github.io/sanitizer-api/</a>
     <dt>Issue Tracking:
     <dd><a href="https://github.com/WICG/sanitizer-api/issues/">GitHub</a>
     <dt class="editor">Editors:
     <dd class="editor p-author h-card vcard" data-editor-id="68466"><a class="p-name fn u-url url" href="https://frederik-braun.com">Frederik Braun</a> (<span class="p-org org">Mozilla</span>) <a class="u-email email" href="mailto:fbraun@mozilla.com">fbraun@mozilla.com</a>
     <dd class="editor p-author h-card vcard"><a class="p-name fn u-url url" href="https://cure53.de">Mario Heiderich</a> (<span class="p-org org">Cure53</span>) <a class="u-email email" href="mailto:mario@cure53.de">mario@cure53.de</a>
     <dd class="editor p-author h-card vcard"><a class="p-name fn u-url url" href="https://www.google.com">Daniel Vogelheim</a> (<span class="p-org org">Google LLC</span>) <a class="u-email email" href="mailto:vogelheim@google.com">vogelheim@google.com</a>
    </dl>
   </div>
   <div data-fill-with="warning"></div>
   <p class="copyright" data-fill-with="copyright"><a href="https://www.w3.org/policies/#copyright">Copyright</a> © 2024 the Contributors to the HTML Sanitizer API Specification, published by the <a href="https://www.w3.org/community/wicg/">Web Platform Incubator Community Group</a> under the <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a>.
A human-readable <a href="http://www.w3.org/community/about/agreements/cla-deed/">summary</a> is available. </p>
   <hr title="Separator for header">
  </div>
  <div class="p-summary" data-fill-with="abstract">
   <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
   <p>This document specifies a set of APIs which allow developers to take
untrusted HTML input and sanitize it for safe insertion into a document’s
DOM.</p>
  </div>
  <div data-fill-with="at-risk"></div>
  <h2 class="no-num no-toc no-ref heading settled" id="status"><span class="content">Status of this document</span></h2>
  <div data-fill-with="status">
   <p> This specification was published by the <a href="https://www.w3.org/community/wicg/">Web Platform Incubator Community Group</a>.
  It is not a W3C Standard nor is it on the W3C Standards Track.

  Please note that under the <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a> there is a limited opt-out and other conditions apply.

  Learn more about <a href="http://www.w3.org/community/">W3C Community and Business Groups</a>. </p>
   <p></p>
  </div>
  <div data-fill-with="at-risk"></div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li>
     <a href="#intro"><span class="secno">1</span> <span class="content">Introduction</span></a>
     <ol class="toc">
      <li><a href="#goals"><span class="secno">1.1</span> <span class="content">Goals</span></a>
      <li><a href="#api-summary"><span class="secno">1.2</span> <span class="content">API Summary</span></a>
     </ol>
    <li>
     <a href="#framework"><span class="secno">2</span> <span class="content">Framework</span></a>
     <ol class="toc">
      <li><a href="#sanitizer-api"><span class="secno">2.1</span> <span class="content">Sanitizer API</span></a>
      <li><a href="#configobject"><span class="secno">2.2</span> <span class="content">SetHTML options and the configuration object.</span></a>
      <li><a href="#config"><span class="secno">2.3</span> <span class="content">The Configuration Dictionary</span></a>
     </ol>
    <li>
     <a href="#algorithms"><span class="secno">3</span> <span class="content">Algorithms</span></a>
     <ol class="toc">
      <li><a href="#sanitization"><span class="secno">3.1</span> <span class="content">Sanitization Algorithms</span></a>
      <li><a href="#configuration-processing"><span class="secno">3.2</span> <span class="content">Configuration Processing</span></a>
      <li><a href="#alg-support"><span class="secno">3.3</span> <span class="content">Supporting Algorithms</span></a>
      <li><a href="#sanitization-defaults"><span class="secno">3.4</span> <span class="content">Defaults</span></a>
     </ol>
    <li>
     <a href="#security-considerations"><span class="secno">4</span> <span class="content">Security Considerations</span></a>
     <ol class="toc">
      <li><a href="#server-side-xss"><span class="secno">4.1</span> <span class="content">Server-Side Reflected and Stored XSS</span></a>
      <li><a href="#dom-clobbering"><span class="secno">4.2</span> <span class="content">DOM clobbering</span></a>
      <li><a href="#script-gadgets"><span class="secno">4.3</span> <span class="content">XSS with Script gadgets</span></a>
      <li><a href="#mutated-xss"><span class="secno">4.4</span> <span class="content">Mutated XSS</span></a>
     </ol>
    <li><a href="#ack"><span class="secno">5</span> <span class="content">Acknowledgements</span></a>
    <li>
     <a href="#index"><span class="secno"></span> <span class="content">Index</span></a>
     <ol class="toc">
      <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">Terms defined by this specification</span></a>
      <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span class="content">Terms defined by reference</span></a>
     </ol>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#normative"><span class="secno"></span> <span class="content">Normative References</span></a>
      <li><a href="#informative"><span class="secno"></span> <span class="content">Informative References</span></a>
     </ol>
    <li><a href="#idl-index"><span class="secno"></span> <span class="content">IDL Index</span></a>
   </ol>
  </nav>
  <main>
   <h2 class="heading settled" data-level="1" id="intro"><span class="secno">1. </span><span class="content">Introduction</span><a class="self-link" href="#intro"></a></h2>
   <p><em>This section is not normative.</em></p>
   <p>Web applications often need to work with strings of HTML on the client side,
perhaps as part of a client-side templating solution, perhaps as part of
rendering user generated content, etc. It is difficult to do so in a safe way.
The naive approach of joining strings together and stuffing them into
an <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element">Element</a></code>'s <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#widl-Element-innerHTML" id="ref-for-widl-Element-innerHTML">innerHTML</a></code> is fraught with risk, as it can cause
JavaScript execution in a number of unexpected ways.</p>
   <p>Libraries like <a data-link-type="biblio" href="#biblio-dompurify" title="DOMPurify">[DOMPURIFY]</a> attempt to manage this problem by carefully
parsing and sanitizing strings before insertion, by constructing a DOM and
filtering its members through an allow-list. This has proven to be a fragile
approach, as the parsing APIs exposed to the web don’t always map in
reasonable ways to the browser’s behavior when actually rendering a string as
HTML in the "real" DOM. Moreover, the libraries need to keep on top of
browsers' changing behavior over time; things that once were safe may turn
into time-bombs based on new platform-level features.</p>
   <p>The browser has a fairly good idea of when it is going to
execute code. We can improve upon the user-space libraries by teaching the
browser how to render HTML from an arbitrary string in a safe manner, and do
so in a way that is much more likely to be maintained and updated along with
the browser’s own changing parser implementation. This document outlines an
API which aims to do just that.</p>
   <h3 class="heading settled" data-level="1.1" id="goals"><span class="secno">1.1. </span><span class="content">Goals</span><a class="self-link" href="#goals"></a></h3>
   <ul>
    <li data-md>
     <p>Mitigate the risk of DOM-based cross-site scripting attacks by providing
  developers with mechanisms for handling user-controlled HTML which prevent
  direct script execution upon injection.</p>
    <li data-md>
     <p>Make HTML output safe for use within the current user agent, taking into
  account its current understanding of HTML.</p>
    <li data-md>
     <p>Allow developers to override the default set of elements and attributes.
  Adding certain elements and attributes can prevent <a href="https://github.com/google/security-research-pocs/tree/master/script-gadgets">script gadget</a> attacks.</p>
   </ul>
   <h3 class="heading settled" data-level="1.2" id="api-summary"><span class="secno">1.2. </span><span class="content">API Summary</span><a class="self-link" href="#api-summary"></a></h3>
   <p>The Sanitizer API offers functionality to parse a string containing HTML into
a DOM tree, and to filter the resulting tree according to a user-supplied
configuration. The methods come in two by two flavours:</p>
   <ul>
    <li data-md>
     <p>Safe and unsafe: The "safe" methods will not generate any markup that executes
script. That is, they should be safe from XSS. The "unsafe" methods will parse
and filter whatever they’re supposed to.</p>
    <li data-md>
     <p>Context: Methods are defined on <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element①">Element</a></code> and <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#shadowroot" id="ref-for-shadowroot">ShadowRoot</a></code> and will
replace these <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#node" id="ref-for-node">Node</a></code>'s children, and are largely analogous to <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#widl-Element-innerHTML" id="ref-for-widl-Element-innerHTML①">innerHTML</a></code>.
There are also static methods on the <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document">Document</a></code>, which parse an entire
document are largely analogous to <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#domparser" id="ref-for-domparser">DOMParser</a></code>.<code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#dom-domparser-parsefromstring" id="ref-for-dom-domparser-parsefromstring">parseFromString()</a></code>.</p>
   </ul>
   <h2 class="heading settled" data-level="2" id="framework"><span class="secno">2. </span><span class="content">Framework</span><a class="self-link" href="#framework"></a></h2>
   <h3 class="heading settled" data-level="2.1" id="sanitizer-api"><span class="secno">2.1. </span><span class="content">Sanitizer API</span><a class="self-link" href="#sanitizer-api"></a></h3>
   <p>The <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element②">Element</a></code> interface defines two methods, <code class="idl"><a data-link-type="idl" href="#dom-element-sethtml" id="ref-for-dom-element-sethtml">setHTML()</a></code> and <code class="idl"><a data-link-type="idl" href="#dom-element-sethtmlunsafe" id="ref-for-dom-element-sethtmlunsafe">setHTMLUnsafe()</a></code>. Both of these take a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString">DOMString</a></code> with HTML
markup, and an optional configuration.</p>
<pre class="extract idl highlight def"><c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://dom.spec.whatwg.org/#element" id="ref-for-element③"><c- g>Element</c-></a> {
  [<a class="idl-code" data-link-type="extended-attribute" href="https://html.spec.whatwg.org/multipage/custom-elements.html#cereactions" id="ref-for-cereactions"><c- g>CEReactions</c-></a>] <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined"><c- b>undefined</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Element" data-dfn-type="method" data-export data-lt="setHTMLUnsafe(html, options)|setHTMLUnsafe(html)" id="dom-element-sethtmlunsafe"><code><c- g>setHTMLUnsafe</c-></code></dfn>(<a data-link-type="idl-name" href="https://w3c.github.io/trusted-types/dist/spec/#typedefdef-htmlstring" id="ref-for-typedefdef-htmlstring"><c- n>HTMLString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Element/setHTMLUnsafe(html, options), Element/setHTMLUnsafe(html)" data-dfn-type="argument" data-export id="dom-element-sethtmlunsafe-html-options-html"><code><c- g>html</c-></code></dfn>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-sethtmloptions" id="ref-for-dictdef-sethtmloptions"><c- n>SetHTMLOptions</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Element/setHTMLUnsafe(html, options), Element/setHTMLUnsafe(html)" data-dfn-type="argument" data-export id="dom-element-sethtmlunsafe-html-options-options"><code><c- g>options</c-></code></dfn> = {});
  [<a class="idl-code" data-link-type="extended-attribute" href="https://html.spec.whatwg.org/multipage/custom-elements.html#cereactions" id="ref-for-cereactions①"><c- g>CEReactions</c-></a>] <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined①"><c- b>undefined</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Element" data-dfn-type="method" data-export data-lt="setHTML(html, options)|setHTML(html)" id="dom-element-sethtml"><code><c- g>setHTML</c-></code></dfn>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString①"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Element/setHTML(html, options), Element/setHTML(html)" data-dfn-type="argument" data-export id="dom-element-sethtml-html-options-html"><code><c- g>html</c-></code></dfn>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-sethtmloptions" id="ref-for-dictdef-sethtmloptions①"><c- n>SetHTMLOptions</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Element/setHTML(html, options), Element/setHTML(html)" data-dfn-type="argument" data-export id="dom-element-sethtml-html-options-options"><code><c- g>options</c-></code></dfn> = {});
};
</pre>
   <div class="algorithm" data-algorithm="DOM-Element-setHTMLUnsafe">
     <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element④">Element</a></code>'s <dfn class="dfn-paneled" data-dfn-for="DOM/Element" data-dfn-type="dfn" data-export id="dom-element-sethtmlunsafe①">setHTMLUnsafe</dfn>(<var>html</var>, <var>options</var>) method steps are: 
    <ol>
     <li data-md>
      <p>Let <var>target</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this">this</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/#template-contents" id="ref-for-template-contents">template contents</a> if <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①">this</a> is a <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/scripting.html#htmltemplateelement" id="ref-for-htmltemplateelement">template</a></code> element; otherwise <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②">this</a>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="#set-and-filter-html" id="ref-for-set-and-filter-html">Set and filter HTML</a> given <var>target</var>, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this③">this</a>, <var>html</var>, <var>options</var>, and false.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="DOM-Element-setHTML">
     <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element⑤">Element</a></code>'s <dfn class="dfn-paneled" data-dfn-for="DOM/Element" data-dfn-type="dfn" data-export id="dom-element-sethtml①">setHTML</dfn>(<var>html</var>, <var>options</var>) method steps are: 
    <ol>
     <li data-md>
      <p>Let <var>target</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this④">this</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/#template-contents" id="ref-for-template-contents①">template contents</a> if <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this⑤">this</a> is a <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/scripting.html#htmltemplateelement" id="ref-for-htmltemplateelement①">template</a></code>; otherwise <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this⑥">this</a>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="#set-and-filter-html" id="ref-for-set-and-filter-html①">Set and filter HTML</a> given <var>target</var>, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this⑦">this</a>, <var>html</var>, <var>options</var>, and true.</p>
    </ol>
   </div>
<pre class="extract idl highlight def"><c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://dom.spec.whatwg.org/#shadowroot" id="ref-for-shadowroot①"><c- g>ShadowRoot</c-></a> {
  [<a class="idl-code" data-link-type="extended-attribute" href="https://html.spec.whatwg.org/multipage/custom-elements.html#cereactions" id="ref-for-cereactions②"><c- g>CEReactions</c-></a>] <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined②"><c- b>undefined</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ShadowRoot" data-dfn-type="method" data-export data-lt="setHTMLUnsafe(html, options)|setHTMLUnsafe(html)" id="dom-shadowroot-sethtmlunsafe"><code><c- g>setHTMLUnsafe</c-></code></dfn>(<a data-link-type="idl-name" href="https://w3c.github.io/trusted-types/dist/spec/#typedefdef-htmlstring" id="ref-for-typedefdef-htmlstring①"><c- n>HTMLString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ShadowRoot/setHTMLUnsafe(html, options), ShadowRoot/setHTMLUnsafe(html)" data-dfn-type="argument" data-export id="dom-shadowroot-sethtmlunsafe-html-options-html"><code><c- g>html</c-></code></dfn>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-sethtmloptions" id="ref-for-dictdef-sethtmloptions②"><c- n>SetHTMLOptions</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ShadowRoot/setHTMLUnsafe(html, options), ShadowRoot/setHTMLUnsafe(html)" data-dfn-type="argument" data-export id="dom-shadowroot-sethtmlunsafe-html-options-options"><code><c- g>options</c-></code></dfn> = {});
  [<a class="idl-code" data-link-type="extended-attribute" href="https://html.spec.whatwg.org/multipage/custom-elements.html#cereactions" id="ref-for-cereactions③"><c- g>CEReactions</c-></a>] <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined③"><c- b>undefined</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ShadowRoot" data-dfn-type="method" data-export data-lt="setHTML(html, options)|setHTML(html)" id="dom-shadowroot-sethtml"><code><c- g>setHTML</c-></code></dfn>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString②"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ShadowRoot/setHTML(html, options), ShadowRoot/setHTML(html)" data-dfn-type="argument" data-export id="dom-shadowroot-sethtml-html-options-html"><code><c- g>html</c-></code></dfn>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-sethtmloptions" id="ref-for-dictdef-sethtmloptions③"><c- n>SetHTMLOptions</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ShadowRoot/setHTML(html, options), ShadowRoot/setHTML(html)" data-dfn-type="argument" data-export id="dom-shadowroot-sethtml-html-options-options"><code><c- g>options</c-></code></dfn> = {});
};
</pre>
   <p>These methods are mirrored on the <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#shadowroot" id="ref-for-shadowroot②">ShadowRoot</a></code>:</p>
   <div class="algorithm" data-algorithm="ShadowRoot-setHTMLUnsafe">
     <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#shadowroot" id="ref-for-shadowroot③">ShadowRoot</a></code>'s <dfn class="dfn-paneled" data-dfn-for="DOM/ShadowRoot" data-dfn-type="dfn" data-export id="dom-shadowroot-sethtmlunsafe①">setHTMLUnsafe</dfn>(<var>html</var>, <var>options</var>) method steps are: 
    <ol>
     <li data-md>
      <p><a data-link-type="dfn" href="#set-and-filter-html" id="ref-for-set-and-filter-html②">Set and filter HTML</a> using <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this⑧">this</a>, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this⑨">this</a>'s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#element-shadow-host" id="ref-for-element-shadow-host">shadow host</a> (as context element), <var>html</var>, <var>options</var>, and false.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="ShadowRoot-setHTML">
     <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#shadowroot" id="ref-for-shadowroot④">ShadowRoot</a></code>'s <dfn class="dfn-paneled" data-dfn-for="DOM/ShadowRoot" data-dfn-type="dfn" data-export id="dom-shadowroot-sethtml①">setHTML</dfn>(<var>html</var>, <var>options</var>) method steps are: 
    <ol>
     <li data-md>
      <p><a data-link-type="dfn" href="#set-and-filter-html" id="ref-for-set-and-filter-html③">Set and filter HTML</a> using <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①⓪">this</a> (as target), <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①①">this</a> (as context element), <var>html</var>, <var>options</var>, and true.</p>
    </ol>
   </div>
   <p>The <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document①">Document</a></code> interface gains two new methods which parse an entire <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document②">Document</a></code>:</p>
<pre class="extract idl highlight def"><c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://dom.spec.whatwg.org/#document" id="ref-for-document③"><c- g>Document</c-></a> {
  <c- b>static</c-> <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#document" id="ref-for-document④"><c- n>Document</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Document" data-dfn-type="method" data-export data-lt="parseHTMLUnsafe(html, options)|parseHTMLUnsafe(html)" id="dom-document-parsehtmlunsafe"><code><c- g>parseHTMLUnsafe</c-></code></dfn>(<a data-link-type="idl-name" href="https://w3c.github.io/trusted-types/dist/spec/#typedefdef-htmlstring" id="ref-for-typedefdef-htmlstring②"><c- n>HTMLString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Document/parseHTMLUnsafe(html, options), Document/parseHTMLUnsafe(html)" data-dfn-type="argument" data-export id="dom-document-parsehtmlunsafe-html-options-html"><code><c- g>html</c-></code></dfn>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-sethtmloptions" id="ref-for-dictdef-sethtmloptions④"><c- n>SetHTMLOptions</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Document/parseHTMLUnsafe(html, options), Document/parseHTMLUnsafe(html)" data-dfn-type="argument" data-export id="dom-document-parsehtmlunsafe-html-options-options"><code><c- g>options</c-></code></dfn> = {});
  <c- b>static</c-> <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#document" id="ref-for-document⑤"><c- n>Document</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Document" data-dfn-type="method" data-export data-lt="parseHTML(html, options)|parseHTML(html)" id="dom-document-parsehtml"><code><c- g>parseHTML</c-></code></dfn>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString③"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Document/parseHTML(html, options), Document/parseHTML(html)" data-dfn-type="argument" data-export id="dom-document-parsehtml-html-options-html"><code><c- g>html</c-></code></dfn>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-sethtmloptions" id="ref-for-dictdef-sethtmloptions⑤"><c- n>SetHTMLOptions</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Document/parseHTML(html, options), Document/parseHTML(html)" data-dfn-type="argument" data-export id="dom-document-parsehtml-html-options-options"><code><c- g>options</c-></code></dfn> = {});
};
</pre>
   <div class="algorithm" data-algorithm="parseHTMLUnsafe">
     The <dfn class="dfn-paneled" data-dfn-for="DOM/Document" data-dfn-type="dfn" data-export id="dom-document-parsehtmlunsafe①">parseHTMLUnsafe</dfn>(<var>html</var>, <var>options</var>) method steps are: 
    <ol>
     <li data-md>
      <p>Let <var>document</var> be a new <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document⑥">Document</a></code>, whose <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document-content-type" id="ref-for-concept-document-content-type">content type</a> is "text/html".</p>
      <p class="note" role="note"><span class="marker">Note:</span> Since <var>document</var> does not have a browsing context, scripting is disabled.</p>
     <li data-md>
      <p>Set <var>document</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#document-allow-declarative-shadow-roots" id="ref-for-document-allow-declarative-shadow-roots">allow declarative shadow roots</a> to true.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/#parse-html-from-a-string" id="ref-for-parse-html-from-a-string">Parse HTML from a string</a> given <var>document</var> and <var>html</var>.</p>
     <li data-md>
      <p>Let <var>config</var> be the result of calling <a data-link-type="dfn" href="#sanitizerconfig-get-a-sanitizer-config-from-options" id="ref-for-sanitizerconfig-get-a-sanitizer-config-from-options">get a sanitizer config from options</a> with <var>options</var> and false.</p>
     <li data-md>
      <p>If <var>config</var> is not <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-empty" id="ref-for-list-empty">empty</a>,
 then call <a data-link-type="dfn" href="#sanitize" id="ref-for-sanitize">sanitize</a> on <var>document</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-tree-root" id="ref-for-concept-tree-root">root node</a> with <var>config</var>.</p>
     <li data-md>
      <p>Return <var>document</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="parseHTML">
     The <dfn class="dfn-paneled" data-dfn-for="DOM/Document" data-dfn-type="dfn" data-export id="dom-document-parsehtml①">parseHTML</dfn>(<var>html</var>, <var>options</var>) method steps are: 
    <ol>
     <li data-md>
      <p>Let <var>document</var> be a new <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document⑦">Document</a></code>, whose <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document-content-type" id="ref-for-concept-document-content-type①">content type</a> is "text/html".</p>
      <p class="note" role="note"><span class="marker">Note:</span> Since <var>document</var> does not have a browsing context, scripting is disabled.</p>
     <li data-md>
      <p>Set <var>document</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#document-allow-declarative-shadow-roots" id="ref-for-document-allow-declarative-shadow-roots①">allow declarative shadow roots</a> to true.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/#parse-html-from-a-string" id="ref-for-parse-html-from-a-string①">Parse HTML from a string</a> given <var>document</var> and <var>html</var>.</p>
     <li data-md>
      <p>Let <var>config</var> be the result of calling <a data-link-type="dfn" href="#sanitizerconfig-get-a-sanitizer-config-from-options" id="ref-for-sanitizerconfig-get-a-sanitizer-config-from-options①">get a sanitizer config from options</a> with <var>options</var> and true.</p>
     <li data-md>
      <p>Call <a data-link-type="dfn" href="#sanitize" id="ref-for-sanitize①">sanitize</a> on <var>document</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-tree-root" id="ref-for-concept-tree-root①">root node</a> with <var>config</var>.</p>
     <li data-md>
      <p>Return <var>document</var>.</p>
    </ol>
   </div>
   <h3 class="heading settled" data-level="2.2" id="configobject"><span class="secno">2.2. </span><span class="content">SetHTML options and the configuration object.</span><a class="self-link" href="#configobject"></a></h3>
   <p>The family of <code class="idl"><a data-link-type="idl" href="#dom-element-sethtml" id="ref-for-dom-element-sethtml①">setHTML()</a></code>-like methods all accept an options
dictionary. Right now, only one member of this dictionary is defined:</p>
<pre class="idl highlight def"><c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-sethtmloptions"><code><c- g>SetHTMLOptions</c-></code></dfn> {
  (<a data-link-type="idl-name" href="#sanitizer" id="ref-for-sanitizer"><c- n>Sanitizer</c-></a> <c- b>or</c-> <a data-link-type="idl-name" href="#dictdef-sanitizerconfig" id="ref-for-dictdef-sanitizerconfig"><c- n>SanitizerConfig</c-></a>) <dfn class="dfn-paneled idl-code" data-default="{}" data-dfn-for="SetHTMLOptions" data-dfn-type="dict-member" data-export data-type="(Sanitizer or SanitizerConfig)" id="dom-sethtmloptions-sanitizer"><code><c- g>sanitizer</c-></code></dfn> = {};
};
</pre>
   <p>The <code class="idl"><a data-link-type="idl" href="#sanitizer" id="ref-for-sanitizer①">Sanitizer</a></code> configuration object encapsulates a filter configuration.
The same config can be used with both safe or unsafe methods. The intent is
that one (or a few) configurations will be built-up early on in a page’s
lifetime, and can then be used whenever needed. This allows implementations
to pre-process configurations.</p>
   <p>The configuration object is also query-able and can return <a data-link-type="dfn" href="#sanitizerconfig-canonical" id="ref-for-sanitizerconfig-canonical">canonical</a> configuration dictionaries,
in both safe and unsafe variants. This allows a
page to query and predict what effect a given configuration will have, or
to build a new configuration based on an existing one.</p>
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed"><c- g>Exposed</c-></a>=(<c- n>Window</c->,<c- n>Worker</c->)]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="sanitizer"><code><c- g>Sanitizer</c-></code></dfn> {
  <dfn class="dfn-paneled idl-code" data-dfn-for="Sanitizer" data-dfn-type="constructor" data-export data-lt="Sanitizer(config)|constructor(config)|Sanitizer()|constructor()" id="dom-sanitizer-sanitizer"><code><c- g>constructor</c-></code></dfn>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-sanitizerconfig" id="ref-for-dictdef-sanitizerconfig①"><c- n>SanitizerConfig</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Sanitizer/Sanitizer(config), Sanitizer/constructor(config), Sanitizer/Sanitizer(), Sanitizer/constructor()" data-dfn-type="argument" data-export id="dom-sanitizer-sanitizer-config-config"><code><c- g>config</c-></code></dfn> = {});
  <a data-link-type="idl-name" href="#dictdef-sanitizerconfig" id="ref-for-dictdef-sanitizerconfig②"><c- n>SanitizerConfig</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Sanitizer" data-dfn-type="method" data-export data-lt="get()" id="dom-sanitizer-get"><code><c- g>get</c-></code></dfn>();
  <a data-link-type="idl-name" href="#dictdef-sanitizerconfig" id="ref-for-dictdef-sanitizerconfig③"><c- n>SanitizerConfig</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Sanitizer" data-dfn-type="method" data-export data-lt="getUnsafe()" id="dom-sanitizer-getunsafe"><code><c- g>getUnsafe</c-></code></dfn>();
};
</pre>
   <div class="algorithm" data-algorithm="constructor" data-algorithm-for="Sanitizer">
     The <dfn class="dfn-paneled" data-dfn-for="Sanitizer" data-dfn-type="dfn" data-export id="sanitizer-constructor">constructor</dfn>(<var>config</var>)
method steps are: 
    <ol>
     <li data-md>
      <p>Store <var>config</var> in <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①②">this</a>'s <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-ordinary-object-internal-methods-and-internal-slots" id="ref-for-sec-ordinary-object-internal-methods-and-internal-slots">internal slot</a>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="get" data-algorithm-for="Sanitizer">
     The <dfn class="dfn-paneled" data-dfn-for="Sanitizer" data-dfn-type="dfn" data-export id="sanitizer-get">get</dfn>() method steps are: 
    <ol>
     <li data-md>
      <p>Return the result of <a data-link-type="dfn" href="#canonicalize-a-configuration" id="ref-for-canonicalize-a-configuration">canonicalize a configuration</a> with the value of <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①③">this</a>'s <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-ordinary-object-internal-methods-and-internal-slots" id="ref-for-sec-ordinary-object-internal-methods-and-internal-slots①">internal slot</a> and true.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="getUnsafe" data-algorithm-for="Sanitizer">
     The <dfn class="dfn-paneled" data-dfn-for="Sanitizer" data-dfn-type="dfn" data-export id="sanitizer-getunsafe">getUnsafe</dfn>() method steps are: 
    <ol>
     <li data-md>
      <p>Return the result of <a data-link-type="dfn" href="#canonicalize-a-configuration" id="ref-for-canonicalize-a-configuration①">canonicalize a configuration</a> with the value of <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①④">this</a>'s <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-ordinary-object-internal-methods-and-internal-slots" id="ref-for-sec-ordinary-object-internal-methods-and-internal-slots②">internal slot</a> and false.</p>
    </ol>
   </div>
   <h3 class="heading settled" data-level="2.3" id="config"><span class="secno">2.3. </span><span class="content">The Configuration Dictionary</span><a class="self-link" href="#config"></a></h3>
<pre class="idl highlight def"><c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-sanitizerelementnamespace"><code><c- g>SanitizerElementNamespace</c-></code></dfn> {
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString④"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="SanitizerElementNamespace" data-dfn-type="dict-member" data-export data-type="DOMString" id="dom-sanitizerelementnamespace-name"><code><c- g>name</c-></code></dfn>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString⑤"><c- b>DOMString</c-></a>? <dfn class="dfn-paneled idl-code" data-default="&quot;http://www.w3.org/1999/xhtml&quot;" data-dfn-for="SanitizerElementNamespace" data-dfn-type="dict-member" data-export data-lt="namespace" data-type="DOMString?" id="dom-sanitizerelementnamespace-namespace"><code><c- g>_namespace</c-></code></dfn> = "http://www.w3.org/1999/xhtml";
};

// Used by "elements"
<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-sanitizerelementnamespacewithattributes"><code><c- g>SanitizerElementNamespaceWithAttributes</c-></code></dfn> : <a data-link-type="idl-name" href="#dictdef-sanitizerelementnamespace" id="ref-for-dictdef-sanitizerelementnamespace"><c- n>SanitizerElementNamespace</c-></a> {
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#typedefdef-sanitizerattribute" id="ref-for-typedefdef-sanitizerattribute"><c- n>SanitizerAttribute</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="SanitizerElementNamespaceWithAttributes" data-dfn-type="dict-member" data-export data-type="sequence<SanitizerAttribute>" id="dom-sanitizerelementnamespacewithattributes-attributes"><code><c- g>attributes</c-></code></dfn>;
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence①"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#typedefdef-sanitizerattribute" id="ref-for-typedefdef-sanitizerattribute①"><c- n>SanitizerAttribute</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="SanitizerElementNamespaceWithAttributes" data-dfn-type="dict-member" data-export data-type="sequence<SanitizerAttribute>" id="dom-sanitizerelementnamespacewithattributes-removeattributes"><code><c- g>removeAttributes</c-></code></dfn>;
};

<c- b>typedef</c-> (<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString⑥"><c- b>DOMString</c-></a> <c- b>or</c-> <a data-link-type="idl-name" href="#dictdef-sanitizerelementnamespace" id="ref-for-dictdef-sanitizerelementnamespace①"><c- n>SanitizerElementNamespace</c-></a>) <dfn class="dfn-paneled idl-code" data-dfn-type="typedef" data-export id="typedefdef-sanitizerelement"><code><c- g>SanitizerElement</c-></code></dfn>;
<c- b>typedef</c-> (<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString⑦"><c- b>DOMString</c-></a> <c- b>or</c-> <a data-link-type="idl-name" href="#dictdef-sanitizerelementnamespacewithattributes" id="ref-for-dictdef-sanitizerelementnamespacewithattributes"><c- n>SanitizerElementNamespaceWithAttributes</c-></a>) <dfn class="dfn-paneled idl-code" data-dfn-type="typedef" data-export id="typedefdef-sanitizerelementwithattributes"><code><c- g>SanitizerElementWithAttributes</c-></code></dfn>;

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-sanitizerattributenamespace"><code><c- g>SanitizerAttributeNamespace</c-></code></dfn> {
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString⑧"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="SanitizerAttributeNamespace" data-dfn-type="dict-member" data-export data-type="DOMString" id="dom-sanitizerattributenamespace-name"><code><c- g>name</c-></code></dfn>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString⑨"><c- b>DOMString</c-></a>? <dfn class="dfn-paneled idl-code" data-default="null" data-dfn-for="SanitizerAttributeNamespace" data-dfn-type="dict-member" data-export data-lt="namespace" data-type="DOMString?" id="dom-sanitizerattributenamespace-namespace"><code><c- g>_namespace</c-></code></dfn> = <c- b>null</c->;
};
<c- b>typedef</c-> (<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString①⓪"><c- b>DOMString</c-></a> <c- b>or</c-> <a data-link-type="idl-name" href="#dictdef-sanitizerattributenamespace" id="ref-for-dictdef-sanitizerattributenamespace"><c- n>SanitizerAttributeNamespace</c-></a>) <dfn class="dfn-paneled idl-code" data-dfn-type="typedef" data-export id="typedefdef-sanitizerattribute"><code><c- g>SanitizerAttribute</c-></code></dfn>;

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-sanitizerconfig"><code><c- g>SanitizerConfig</c-></code></dfn> {
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence②"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#typedefdef-sanitizerelementwithattributes" id="ref-for-typedefdef-sanitizerelementwithattributes"><c- n>SanitizerElementWithAttributes</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="SanitizerConfig" data-dfn-type="dict-member" data-export data-type="sequence<SanitizerElementWithAttributes>" id="dom-sanitizerconfig-elements"><code><c- g>elements</c-></code></dfn>;
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence③"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#typedefdef-sanitizerelement" id="ref-for-typedefdef-sanitizerelement"><c- n>SanitizerElement</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="SanitizerConfig" data-dfn-type="dict-member" data-export data-type="sequence<SanitizerElement>" id="dom-sanitizerconfig-removeelements"><code><c- g>removeElements</c-></code></dfn>;
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence④"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#typedefdef-sanitizerelement" id="ref-for-typedefdef-sanitizerelement①"><c- n>SanitizerElement</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="SanitizerConfig" data-dfn-type="dict-member" data-export data-type="sequence<SanitizerElement>" id="dom-sanitizerconfig-replacewithchildrenelements"><code><c- g>replaceWithChildrenElements</c-></code></dfn>;

  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence⑤"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#typedefdef-sanitizerattribute" id="ref-for-typedefdef-sanitizerattribute②"><c- n>SanitizerAttribute</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="SanitizerConfig" data-dfn-type="dict-member" data-export data-type="sequence<SanitizerAttribute>" id="dom-sanitizerconfig-attributes"><code><c- g>attributes</c-></code></dfn>;
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence⑥"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#typedefdef-sanitizerattribute" id="ref-for-typedefdef-sanitizerattribute③"><c- n>SanitizerAttribute</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="SanitizerConfig" data-dfn-type="dict-member" data-export data-type="sequence<SanitizerAttribute>" id="dom-sanitizerconfig-removeattributes"><code><c- g>removeAttributes</c-></code></dfn>;

  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="SanitizerConfig" data-dfn-type="dict-member" data-export data-type="boolean" id="dom-sanitizerconfig-comments"><code><c- g>comments</c-></code></dfn>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean①"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="SanitizerConfig" data-dfn-type="dict-member" data-export data-type="boolean" id="dom-sanitizerconfig-dataattributes"><code><c- g>dataAttributes</c-></code></dfn>;
};
</pre>
   <h2 class="heading settled" data-level="3" id="algorithms"><span class="secno">3. </span><span class="content">Algorithms</span><a class="self-link" href="#algorithms"></a></h2>
   <div class="algorithm" data-algorithm="set and filter HTML">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="set-and-filter-html">set and filter HTML</dfn>, given an <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element⑥">Element</a></code> or <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#documentfragment" id="ref-for-documentfragment">DocumentFragment</a></code> <var>target</var>, an <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element⑦">Element</a></code> <var>contextElement</var>, a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string" id="ref-for-string">string</a> <var>html</var>, and a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-dictionary" id="ref-for-dfn-dictionary">dictionary</a> <var>options</var>, and a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#boolean" id="ref-for-boolean">boolean</a> <var>safe</var>: 
    <ol>
     <li data-md>
      <p>If <var>safe</var> and <var>contextElement</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-element-local-name" id="ref-for-concept-element-local-name">local name</a> is "<code>script</code>" and <var>contextElement</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-element-namespace" id="ref-for-concept-element-namespace">namespace</a> is the <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#html-namespace" id="ref-for-html-namespace">HTML namespace</a> or the <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#svg-namespace" id="ref-for-svg-namespace">SVG namespace</a>, then return.</p>
     <li data-md>
      <p>Let <var>config</var> be the result of calling <a data-link-type="dfn" href="#sanitizerconfig-get-a-sanitizer-config-from-options" id="ref-for-sanitizerconfig-get-a-sanitizer-config-from-options②">get a sanitizer config from options</a> with <var>options</var> and <var>safe</var>.</p>
     <li data-md>
      <p>Let <var>newChildren</var> be the result of the HTML <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#fragment-parsing-algorithm-steps" id="ref-for-fragment-parsing-algorithm-steps">fragment parsing algorithm steps</a> given <var>contextElement</var>, <var>html</var>, and true.</p>
     <li data-md>
      <p>Let <var>fragment</var> be a new <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#documentfragment" id="ref-for-documentfragment①">DocumentFragment</a></code> whose <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document" id="ref-for-concept-node-document">node document</a> is <var>contextElement</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document" id="ref-for-concept-node-document①">node document</a>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate">For each</a> <var>node</var> in <var>newChildren</var>, <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append">append</a> <var>node</var> to <var>fragment</var>.</p>
     <li data-md>
      <p>If <var>config</var> is not <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-empty" id="ref-for-list-empty①">empty</a>, then run <a data-link-type="dfn" href="#sanitize" id="ref-for-sanitize②">sanitize</a> on <var>fragment</var> using <var>config</var>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-replace-all" id="ref-for-concept-node-replace-all">Replace all</a> with <var>fragment</var> within <var>target</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="get a sanitizer config from options" data-algorithm-for="SanitizerConfig">
     To <dfn class="dfn-paneled" data-dfn-for="SanitizerConfig" data-dfn-type="dfn" data-noexport id="sanitizerconfig-get-a-sanitizer-config-from-options">get a sanitizer config from options</dfn> for
an options dictionary <var>options</var> and a boolean <var>safe</var>, do: 
    <ol>
     <li data-md>
      <p class="assertion">Assert: <var>options</var> is a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-dictionary" id="ref-for-dfn-dictionary①">dictionary</a>.</p>
     <li data-md>
      <p>If <var>options</var>["<code>sanitizer</code>"] doesn’t <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists">exist</a>, then return undefined.</p>
     <li data-md>
      <p class="assertion">Assert: <var>options</var>["<code>sanitizer</code>"] is either a <code class="idl"><a data-link-type="idl" href="#sanitizer" id="ref-for-sanitizer②">Sanitizer</a></code> instance
 or a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-dictionary" id="ref-for-dfn-dictionary②">dictionary</a>.</p>
     <li data-md>
      <p>If <var>options</var>["<code>sanitizer</code>"] is a <code class="idl"><a data-link-type="idl" href="#sanitizer" id="ref-for-sanitizer③">Sanitizer</a></code> instance:</p>
      <ol>
       <li data-md>
        <p>Then let <var>config</var> be the value of <var>options</var>["<code>sanitizer</code>"]'s <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-ordinary-object-internal-methods-and-internal-slots" id="ref-for-sec-ordinary-object-internal-methods-and-internal-slots③">internal slot</a>.</p>
       <li data-md>
        <p>Otherwise let <var>config</var> be the value of <var>options</var>["<code>sanitizer</code>"].</p>
      </ol>
     <li data-md>
      <p>Return the result of calling <a data-link-type="dfn" href="#canonicalize-a-configuration" id="ref-for-canonicalize-a-configuration②">canonicalize a configuration</a> on <var>config</var> and <var>safe</var>.</p>
    </ol>
   </div>
   <h3 class="heading settled" data-level="3.1" id="sanitization"><span class="secno">3.1. </span><span class="content">Sanitization Algorithms</span><a class="self-link" href="#sanitization"></a></h3>
   <div class="algorithm" data-algorithm="sanitize">
     For the main <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="sanitize">sanitize</dfn> operation, using a <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#parentnode" id="ref-for-parentnode">ParentNode</a></code> <var>node</var>, a <a data-link-type="dfn" href="#sanitizerconfig-canonical" id="ref-for-sanitizerconfig-canonical①">canonical</a> <code class="idl"><a data-link-type="idl" href="#dictdef-sanitizerconfig" id="ref-for-dictdef-sanitizerconfig④">SanitizerConfig</a></code> <var>config</var>, run these steps: 
    <ol>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert">Assert</a>: <var>config</var> is <a data-link-type="dfn" href="#sanitizerconfig-canonical" id="ref-for-sanitizerconfig-canonical②">canonical</a>.</p>
     <li data-md>
      <p>Let <var>current</var> be <var>node</var>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate①">For each</a> <var>child</var> in <var>current</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-tree-child" id="ref-for-concept-tree-child">children</a>:</p>
      <ol>
       <li data-md>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert①">Assert</a>: <var>child</var> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#implements" id="ref-for-implements">implements</a> <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#text" id="ref-for-text">Text</a></code>, <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#comment" id="ref-for-comment">Comment</a></code>, or <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element⑧">Element</a></code>.</p>
        <p class="note" role="note"><span class="marker">Note:</span> Currently, this algorithm is only called on output of the HTML
       parser for which this assertion should hold. If in the future
       this algorithm will be used in different contexts, this assumption
       needs to be re-examined.</p>
       <li data-md>
        <p>If <var>child</var> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#implements" id="ref-for-implements①">implements</a> <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#text" id="ref-for-text①">Text</a></code>:</p>
        <ol>
         <li data-md>
          <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#iteration-continue" id="ref-for-iteration-continue">continue</a>.</p>
        </ol>
       <li data-md>
        <p>else if <var>child</var> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#implements" id="ref-for-implements②">implements</a> <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#comment" id="ref-for-comment①">Comment</a></code>:</p>
        <ol>
         <li data-md>
          <p>If <var>config</var>’s <code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-comments" id="ref-for-dom-sanitizerconfig-comments">comments</a></code> is not true:</p>
          <ol>
           <li data-md>
            <p><a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-remove" id="ref-for-concept-node-remove">remove</a> <var>child</var>.</p>
          </ol>
        </ol>
       <li data-md>
        <p>else:</p>
        <ol>
         <li data-md>
          <p>Let <var>elementName</var> be a <code class="idl"><a data-link-type="idl" href="#dictdef-sanitizerelementnamespace" id="ref-for-dictdef-sanitizerelementnamespace②">SanitizerElementNamespace</a></code> with <var>child</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-element-local-name" id="ref-for-concept-element-local-name①">local name</a> and <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-element-namespace" id="ref-for-concept-element-namespace①">namespace</a>.</p>
         <li data-md>
          <p>If <var>config</var>["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-elements" id="ref-for-dom-sanitizerconfig-elements">elements</a></code>"] exists and <var>config</var>["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-elements" id="ref-for-dom-sanitizerconfig-elements①">elements</a></code>"] does not <a data-link-type="dfn" href="#sanitizerconfig-contains" id="ref-for-sanitizerconfig-contains">contain</a> [<var>elementName</var>]:</p>
          <ol>
           <li data-md>
            <p><a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-remove" id="ref-for-concept-node-remove①">remove</a> <var>child</var>.</p>
          </ol>
         <li data-md>
          <p>else if <var>config</var>["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-removeelements" id="ref-for-dom-sanitizerconfig-removeelements">removeElements</a></code>"] exists and <var>config</var>["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-removeelements" id="ref-for-dom-sanitizerconfig-removeelements①">removeElements</a></code>"] <a data-link-type="dfn" href="#sanitizerconfig-contains" id="ref-for-sanitizerconfig-contains①">contains</a> [<var>elementName</var>]:</p>
          <ol>
           <li data-md>
            <p><a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-remove" id="ref-for-concept-node-remove②">remove</a> <var>child</var>.</p>
          </ol>
         <li data-md>
          <p>If <var>config</var>["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-replacewithchildrenelements" id="ref-for-dom-sanitizerconfig-replacewithchildrenelements">replaceWithChildrenElements</a></code>"] exists and <var>config</var>["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-replacewithchildrenelements" id="ref-for-dom-sanitizerconfig-replacewithchildrenelements①">replaceWithChildrenElements</a></code>"] <a data-link-type="dfn" href="#sanitizerconfig-contains" id="ref-for-sanitizerconfig-contains②">contains</a> <var>elementName</var>:</p>
          <ol>
           <li data-md>
            <p>Call <a data-link-type="dfn" href="#sanitize" id="ref-for-sanitize③">sanitize</a> on <var>child</var> with <var>config</var>.</p>
           <li data-md>
            <p>Call <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-replace-all" id="ref-for-concept-node-replace-all①">replace all</a> with <var>child</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-tree-child" id="ref-for-concept-tree-child①">children</a> within <var>child</var>.</p>
          </ol>
         <li data-md>
          <p>If <var>elementName</var> <a data-link-type="dfn" href="#set-equal" id="ref-for-set-equal">equals</a> «[ "<code>name</code>" → "<code>template</code>",
 "<code>namespace</code>" → <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#html-namespace" id="ref-for-html-namespace①">HTML namespace</a> ]»</p>
          <ol>
           <li data-md>
            <p>Then call <a data-link-type="dfn" href="#sanitize" id="ref-for-sanitize④">sanitize</a> on <var>child</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/#template-contents" id="ref-for-template-contents②">template contents</a> with <var>config</var>.</p>
          </ol>
         <li data-md>
          <p>If <var>child</var> is a <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#element-shadow-host" id="ref-for-element-shadow-host①">shadow host</a>:</p>
          <ol>
           <li data-md>
            <p>Then call <a data-link-type="dfn" href="#sanitize" id="ref-for-sanitize⑤">sanitize</a> on <var>child</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-element-shadow-root" id="ref-for-concept-element-shadow-root">shadow root</a> with <var>config</var>.</p>
          </ol>
         <li data-md>
          <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate②">For each</a> <var>attr</var> in <var>current</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-element-attribute" id="ref-for-concept-element-attribute">attribute list</a>:</p>
          <ol>
           <li data-md>
            <p>Let <var>attrName</var> be a <code class="idl"><a data-link-type="idl" href="#dictdef-sanitizerattributenamespace" id="ref-for-dictdef-sanitizerattributenamespace①">SanitizerAttributeNamespace</a></code> with <var>attr</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-attribute-local-name" id="ref-for-concept-attribute-local-name">local name</a> and <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-attribute-namespace" id="ref-for-concept-attribute-namespace">namespace</a>.</p>
           <li data-md>
            <p>If <var>config</var>["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-attributes" id="ref-for-dom-sanitizerconfig-attributes">attributes</a></code>"] exists and <var>config</var>["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-attributes" id="ref-for-dom-sanitizerconfig-attributes①">attributes</a></code>"] does not <a data-link-type="dfn" href="#sanitizerconfig-contains" id="ref-for-sanitizerconfig-contains③">contain</a> <var>attrName</var>:</p>
            <ol>
             <li data-md>
              <p>If "data-" is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#code-unit-prefix" id="ref-for-code-unit-prefix">code unit prefix</a> of <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-attribute-local-name" id="ref-for-concept-attribute-local-name①">local name</a> and
  if <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-attribute-namespace" id="ref-for-concept-attribute-namespace①">namespace</a> is <code>null</code> and
  if <var>config</var>["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-dataattributes" id="ref-for-dom-sanitizerconfig-dataattributes">dataAttributes</a></code>"] exists and is false:</p>
              <ol>
               <li data-md>
                <p>Remove <var>attr</var> from <var>child</var>.</p>
              </ol>
            </ol>
           <li data-md>
            <p>else if <var>config</var>["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-removeattributes" id="ref-for-dom-sanitizerconfig-removeattributes">removeAttributes</a></code>"] exists and <var>config</var>["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-removeattributes" id="ref-for-dom-sanitizerconfig-removeattributes①">removeAttributes</a></code>"] <a data-link-type="dfn" href="#sanitizerconfig-contains" id="ref-for-sanitizerconfig-contains④">contains</a> <var>attrName</var>:</p>
            <ol>
             <li data-md>
              <p>Remove <var>attr</var> from <var>child</var>.</p>
            </ol>
           <li data-md>
            <p>If <var>config</var>["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-elements" id="ref-for-dom-sanitizerconfig-elements②">elements</a></code>"][<var>elementName</var>] exists,
 and if <var>config</var>["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-elements" id="ref-for-dom-sanitizerconfig-elements③">elements</a></code>"][<var>elementName</var>]["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerelementnamespacewithattributes-attributes" id="ref-for-dom-sanitizerelementnamespacewithattributes-attributes">attributes</a></code>"]
 exists, and if <var>config</var>["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-elements" id="ref-for-dom-sanitizerconfig-elements④">elements</a></code>"][<var>elementName</var>]["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerelementnamespacewithattributes-attributes" id="ref-for-dom-sanitizerelementnamespacewithattributes-attributes①">attributes</a></code>"]
 does not <a data-link-type="dfn" href="#sanitizerconfig-contains" id="ref-for-sanitizerconfig-contains⑤">contain</a> <var>attrName</var>:</p>
            <ol>
             <li data-md>
              <p>Remove <var>attr</var> from <var>child</var>.</p>
            </ol>
           <li data-md>
            <p>If <var>config</var>["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-elements" id="ref-for-dom-sanitizerconfig-elements⑤">elements</a></code>"][<var>elementName</var>] exists,
 and if <var>config</var>["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-elements" id="ref-for-dom-sanitizerconfig-elements⑥">elements</a></code>"][<var>elementName</var>]["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerelementnamespacewithattributes-removeattributes" id="ref-for-dom-sanitizerelementnamespacewithattributes-removeattributes">removeAttributes</a></code>"]
 exists, and if <var>config</var>["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-elements" id="ref-for-dom-sanitizerconfig-elements⑦">elements</a></code>"][<var>elementName</var>]["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerelementnamespacewithattributes-removeattributes" id="ref-for-dom-sanitizerelementnamespacewithattributes-removeattributes①">removeAttributes</a></code>"] <a data-link-type="dfn" href="#sanitizerconfig-contains" id="ref-for-sanitizerconfig-contains⑥">contains</a> <var>attrName</var>:</p>
            <ol>
             <li data-md>
              <p>Remove <var>attr</var> from <var>child</var>.</p>
            </ol>
           <li data-md>
            <p>If «[<var>elementName</var>, <var>attrName</var>]» matches an entry in the <a data-link-type="dfn" href="#navigating-url-attributes-list" id="ref-for-navigating-url-attributes-list">navigating URL attributes list</a>, and if <var>attr</var>’s <a data-link-type="dfn" href="https://urlpattern.spec.whatwg.org/#constructor-string-parser-state-protocol" id="ref-for-constructor-string-parser-state-protocol">protocol</a> is
 "<code>javascript:</code>":</p>
            <ol>
             <li data-md>
              <p>Then remove <var>attr</var> from <var>child</var>.</p>
            </ol>
           <li data-md>
            <p>Call <a data-link-type="dfn" href="#sanitize" id="ref-for-sanitize⑥">sanitize</a> on <var>child</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-element-shadow-root" id="ref-for-concept-element-shadow-root①">shadow root</a> with <var>config</var>.</p>
          </ol>
         <li data-md>
          <p>else:</p>
          <ol>
           <li data-md>
            <p><a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-remove" id="ref-for-concept-node-remove③">remove</a> <var>child</var>.</p>
          </ol>
        </ol>
      </ol>
    </ol>
   </div>
   <h3 class="heading settled" data-level="3.2" id="configuration-processing"><span class="secno">3.2. </span><span class="content">Configuration Processing</span><a class="self-link" href="#configuration-processing"></a></h3>
   <div class="algorithm" data-algorithm="valid" data-algorithm-for="SanitizerConfig">
     A <var>config</var> is <dfn class="dfn-paneled" data-dfn-for="SanitizerConfig" data-dfn-type="dfn" data-noexport id="sanitizerconfig-valid">valid</dfn> if all these conditions are met: 
    <ol>
     <li data-md>
      <p><var>config</var> is a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-dictionary" id="ref-for-dfn-dictionary③">dictionary</a></p>
     <li data-md>
      <p><var>config</var>’s <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-getting-the-keys" id="ref-for-map-getting-the-keys">key set</a> does not <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-contain" id="ref-for-list-contain">contain</a> both
 "<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-elements" id="ref-for-dom-sanitizerconfig-elements⑧">elements</a></code>" and "<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-removeelements" id="ref-for-dom-sanitizerconfig-removeelements②">removeElements</a></code>"</p>
     <li data-md>
      <p><var>config</var>’s <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-getting-the-keys" id="ref-for-map-getting-the-keys①">key set</a> does not <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-contain" id="ref-for-list-contain①">contain</a> both
 "<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-removeattributes" id="ref-for-dom-sanitizerconfig-removeattributes②">removeAttributes</a></code>" and "<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-attributes" id="ref-for-dom-sanitizerconfig-attributes②">attributes</a></code>".</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate③">For any</a> <var>key</var> of «[
 "<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-elements" id="ref-for-dom-sanitizerconfig-elements⑨">elements</a></code>",
 "<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-removeelements" id="ref-for-dom-sanitizerconfig-removeelements③">removeElements</a></code>",
 "<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-replacewithchildrenelements" id="ref-for-dom-sanitizerconfig-replacewithchildrenelements②">replaceWithChildrenElements</a></code>",
 "<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-attributes" id="ref-for-dom-sanitizerconfig-attributes③">attributes</a></code>",
 "<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-removeattributes" id="ref-for-dom-sanitizerconfig-removeattributes③">removeAttributes</a></code>"
  ]» where <var>config</var>[<var>key</var>] <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists①">exists</a>:</p>
      <ol>
       <li data-md>
        <p><var>config</var>[<var>key</var>] is <a data-link-type="dfn" href="#sanitizernamelist-valid" id="ref-for-sanitizernamelist-valid">valid</a>.</p>
      </ol>
     <li data-md>
      <p>If <var>config</var>["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-elements" id="ref-for-dom-sanitizerconfig-elements①⓪">elements</a></code>"] exists, then <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate④">for any</a> <var>element</var> in <var>config</var>[<var>key</var>] that is a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-dictionary" id="ref-for-dfn-dictionary④">dictionary</a>:</p>
      <ol>
       <li data-md>
        <p><var>element</var> does not <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-contain" id="ref-for-list-contain②">contain</a> both
  "<code class="idl"><a data-link-type="idl" href="#dom-sanitizerelementnamespacewithattributes-attributes" id="ref-for-dom-sanitizerelementnamespacewithattributes-attributes②">attributes</a></code>" and
  "<code class="idl"><a data-link-type="idl" href="#dom-sanitizerelementnamespacewithattributes-removeattributes" id="ref-for-dom-sanitizerelementnamespacewithattributes-removeattributes②">removeAttributes</a></code>".</p>
       <li data-md>
        <p>If either <var>element</var>["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerelementnamespacewithattributes-attributes" id="ref-for-dom-sanitizerelementnamespacewithattributes-attributes③">attributes</a></code>"]
  or <var>element</var>["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerelementnamespacewithattributes-removeattributes" id="ref-for-dom-sanitizerelementnamespacewithattributes-removeattributes③">removeAttributes</a></code>"] <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists②">exists</a>, then it is <a data-link-type="dfn" href="#sanitizernamelist-valid" id="ref-for-sanitizernamelist-valid①">valid</a>.</p>
       <li data-md>
        <p>Let <var>tmp</var> be a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-dictionary" id="ref-for-dfn-dictionary⑤">dictionary</a>, and for any <var>key</var> «[
  "<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-elements" id="ref-for-dom-sanitizerconfig-elements①①">elements</a></code>",
  "<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-removeelements" id="ref-for-dom-sanitizerconfig-removeelements④">removeElements</a></code>",
  "<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-replacewithchildrenelements" id="ref-for-dom-sanitizerconfig-replacewithchildrenelements③">replaceWithChildrenElements</a></code>",
  "<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-attributes" id="ref-for-dom-sanitizerconfig-attributes④">attributes</a></code>",
  "<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-removeattributes" id="ref-for-dom-sanitizerconfig-removeattributes④">removeAttributes</a></code>"
  ]» <var>tmp</var>[<var>key</var>] is set to the result of <a data-link-type="dfn" href="#canonicalize-a-sanitizer-element-list" id="ref-for-canonicalize-a-sanitizer-element-list">canonicalize a sanitizer
  element list</a> called on <var>config</var>[<var>key</var>], and <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#html-namespace" id="ref-for-html-namespace②">HTML namespace</a> as default
  namespace for the element lists, and <code>null</code> as default namespace for the
  attributes lists.</p>
        <p class="note" role="note"><span class="marker">Note:</span> The intent here is to assert about list elements, but without regard
        to whether the string shortcut syntax or the explicit dictionary
        syntax is used. For example, having "img" in <code>elements</code> and <code>{ name: "img" }</code> in <code>removeElements</code>. An implementation might well
        do this without explicitly canonicalizing the lists at this point.</p>
        <ol>
         <li data-md>
          <p>Given theses canonicalized name lists, all of the following conditions hold:</p>
          <ol>
           <li data-md>
            <p>The <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#set-intersection" id="ref-for-set-intersection">intersection</a> between <var>tmp</var>["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-elements" id="ref-for-dom-sanitizerconfig-elements①②">elements</a></code>"] and <var>tmp</var>["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-removeelements" id="ref-for-dom-sanitizerconfig-removeelements⑤">removeElements</a></code>"]
 is <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-empty" id="ref-for-list-empty②">empty</a>.</p>
           <li data-md>
            <p>The <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#set-intersection" id="ref-for-set-intersection①">intersection</a> between <var>tmp</var>["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-removeelements" id="ref-for-dom-sanitizerconfig-removeelements⑥">removeElements</a></code>"] <var>tmp</var>["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-replacewithchildrenelements" id="ref-for-dom-sanitizerconfig-replacewithchildrenelements④">replaceWithChildrenElements</a></code>"]
 is <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-empty" id="ref-for-list-empty③">empty</a>.</p>
           <li data-md>
            <p>The <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#set-intersection" id="ref-for-set-intersection②">intersection</a> between <var>tmp</var>["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-replacewithchildrenelements" id="ref-for-dom-sanitizerconfig-replacewithchildrenelements⑤">replaceWithChildrenElements</a></code>"] and <var>tmp</var>["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-elements" id="ref-for-dom-sanitizerconfig-elements①③">elements</a></code>"]
 is <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-empty" id="ref-for-list-empty④">empty</a>.</p>
           <li data-md>
            <p>The <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#set-intersection" id="ref-for-set-intersection③">intersection</a> between <var>tmp</var>["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-attributes" id="ref-for-dom-sanitizerconfig-attributes⑤">attributes</a></code>"] and <var>tmp</var>["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-removeattributes" id="ref-for-dom-sanitizerconfig-removeattributes⑤">removeAttributes</a></code>"]
 is <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-empty" id="ref-for-list-empty⑤">empty</a>.</p>
          </ol>
        </ol>
        <ol>
         <li data-md>
          <p>Let <var>tmpattrs</var> be <var>tmp</var>["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-attributes" id="ref-for-dom-sanitizerconfig-attributes⑥">attributes</a></code>"] if it exists,
 and otherwise <a data-link-type="dfn" href="#built-in-default-config" id="ref-for-built-in-default-config">built-in default config</a>["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-attributes" id="ref-for-dom-sanitizerconfig-attributes⑦">attributes</a></code>"].</p>
         <li data-md>
          <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate⑤">For any</a> <var>item</var> in <var>tmp</var>["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-elements" id="ref-for-dom-sanitizerconfig-elements①④">elements</a></code>"]:</p>
          <ol>
           <li data-md>
            <p>If either <var>item</var>["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerelementnamespacewithattributes-attributes" id="ref-for-dom-sanitizerelementnamespacewithattributes-attributes④">attributes</a></code>"]
  or <var>item</var>["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerelementnamespacewithattributes-removeattributes" id="ref-for-dom-sanitizerelementnamespacewithattributes-removeattributes④">removeAttributes</a></code>"]
  exists:</p>
            <ol>
             <li data-md>
              <p>Then the <a data-link-type="dfn" href="#set-difference" id="ref-for-set-difference">difference</a> between it and <var>tmpattrs</var> is <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-empty" id="ref-for-list-empty⑥">empty</a>.</p>
            </ol>
          </ol>
        </ol>
      </ol>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="valid" data-algorithm-for="SanitizerNameList">
     A <var>list</var> of names is <dfn class="dfn-paneled" data-dfn-for="SanitizerNameList" data-dfn-type="dfn" data-noexport id="sanitizernamelist-valid">valid</dfn> if all these
conditions are met: 
    <ol>
     <li data-md>
      <p><var>list</var> is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list">list</a>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate⑥">For all</a> of its members <var>name</var>:</p>
      <ol>
       <li data-md>
        <p><var>name</var> is a <code class="idl"><a data-link-type="idl" href="https://wicg.github.io/speech-api/#dom-speechgrammarlist-addfromstring-string-weight-string" id="ref-for-dom-speechgrammarlist-addfromstring-string-weight-string">string</a></code> or a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-dictionary" id="ref-for-dfn-dictionary⑥">dictionary</a>.</p>
       <li data-md>
        <p>If <var>name</var> is a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-dictionary" id="ref-for-dfn-dictionary⑦">dictionary</a>:</p>
        <ol>
         <li data-md>
          <p><var>name</var>["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerelementnamespace-name" id="ref-for-dom-sanitizerelementnamespace-name">name</a></code>"] <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists③">exists</a> and is a <code class="idl"><a data-link-type="idl" href="https://wicg.github.io/speech-api/#dom-speechgrammarlist-addfromstring-string-weight-string" id="ref-for-dom-speechgrammarlist-addfromstring-string-weight-string①">string</a></code>.</p>
        </ol>
      </ol>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="canonical" data-algorithm-for="SanitizerConfig">
     A <var>config</var> is <dfn class="dfn-paneled" data-dfn-for="SanitizerConfig" data-dfn-type="dfn" data-noexport id="sanitizerconfig-canonical">canonical</dfn> if all these conditions are met: 
    <ol>
     <li data-md>
      <p><var>config</var> is <a data-link-type="dfn" href="#sanitizerconfig-valid" id="ref-for-sanitizerconfig-valid">valid</a>.</p>
     <li data-md>
      <p><var>config</var>’s <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-getting-the-keys" id="ref-for-map-getting-the-keys②">key set</a> is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#set-subset" id="ref-for-set-subset">subset</a> of
 «[
 "<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-elements" id="ref-for-dom-sanitizerconfig-elements①⑤">elements</a></code>",
 "<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-removeelements" id="ref-for-dom-sanitizerconfig-removeelements⑦">removeElements</a></code>",
 "<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-replacewithchildrenelements" id="ref-for-dom-sanitizerconfig-replacewithchildrenelements⑥">replaceWithChildrenElements</a></code>",
 "<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-attributes" id="ref-for-dom-sanitizerconfig-attributes⑧">attributes</a></code>",
 "<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-removeattributes" id="ref-for-dom-sanitizerconfig-removeattributes⑥">removeAttributes</a></code>",
 "<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-comments" id="ref-for-dom-sanitizerconfig-comments①">comments</a></code>",
 "<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-dataattributes" id="ref-for-dom-sanitizerconfig-dataattributes①">dataAttributes</a></code>"
 ]»</p>
     <li data-md>
      <p><var>config</var>’s <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-getting-the-keys" id="ref-for-map-getting-the-keys③">key set</a> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-contain" id="ref-for-list-contain③">contains</a> either:</p>
      <ol>
       <li data-md>
        <p>both "<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-elements" id="ref-for-dom-sanitizerconfig-elements①⑥">elements</a></code>" and "<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-attributes" id="ref-for-dom-sanitizerconfig-attributes⑨">attributes</a></code>",
  but neither of
  "<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-removeelements" id="ref-for-dom-sanitizerconfig-removeelements⑧">removeElements</a></code>" or "<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-removeattributes" id="ref-for-dom-sanitizerconfig-removeattributes⑦">removeAttributes</a></code>".</p>
       <li data-md>
        <p>or both
  "<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-removeelements" id="ref-for-dom-sanitizerconfig-removeelements⑨">removeElements</a></code>" and "<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-removeattributes" id="ref-for-dom-sanitizerconfig-removeattributes⑧">removeAttributes</a></code>",
  but neither of
  "<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-elements" id="ref-for-dom-sanitizerconfig-elements①⑦">elements</a></code>" or "<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-attributes" id="ref-for-dom-sanitizerconfig-attributes①⓪">attributes</a></code>".</p>
      </ol>
     <li data-md>
      <p>For any <var>key</var> of «[
    "<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-replacewithchildrenelements" id="ref-for-dom-sanitizerconfig-replacewithchildrenelements⑦">replaceWithChildrenElements</a></code>",
    "<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-removeelements" id="ref-for-dom-sanitizerconfig-removeelements①⓪">removeElements</a></code>",
    "<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-attributes" id="ref-for-dom-sanitizerconfig-attributes①①">attributes</a></code>",
    "<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-removeattributes" id="ref-for-dom-sanitizerconfig-removeattributes⑨">removeAttributes</a></code>"
    ]» where <var>config</var>[<var>key</var>] <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists④">exists</a>:</p>
      <ol>
       <li data-md>
        <p><var>config</var>[<var>key</var>] is <a data-link-type="dfn" href="#sanitizernamelist-canonical" id="ref-for-sanitizernamelist-canonical">canonical</a>.</p>
      </ol>
     <li data-md>
      <p>If <var>config</var>["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-elements" id="ref-for-dom-sanitizerconfig-elements①⑧">elements</a></code>"] <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists⑤">exists</a>:</p>
      <ol>
       <li data-md>
        <p><var>config</var>["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-elements" id="ref-for-dom-sanitizerconfig-elements①⑨">elements</a></code>"] is <a data-link-type="dfn" href="#sanitizernamewithattributeslist-canonical" id="ref-for-sanitizernamewithattributeslist-canonical">canonical</a>.</p>
      </ol>
     <li data-md>
      <p>For any <var>key</var> of «[
 "<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-comments" id="ref-for-dom-sanitizerconfig-comments②">comments</a></code>",
 "<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-dataattributes" id="ref-for-dom-sanitizerconfig-dataattributes②">dataAttributes</a></code>"
 ]»:</p>
      <ol>
       <li data-md>
        <p>if <var>config</var>[<var>key</var>] <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists⑥">exists</a>, <var>config</var>[<var>key</var>] is a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean②">boolean</a></code>.</p>
      </ol>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="canonical" data-algorithm-for="SanitizerNameList">
     A <var>list</var> of names is <dfn class="dfn-paneled" data-dfn-for="SanitizerNameList" data-dfn-type="dfn" data-noexport id="sanitizernamelist-canonical">canonical</dfn> if all these
conditions are met: 
    <ol>
     <li data-md>
      <p><var>list</var>[<var>key</var>] is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list①">list</a>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate⑦">For all</a> of its <var>list</var>[<var>key</var>]'s members <var>name</var>:</p>
      <ol>
       <li data-md>
        <p><var>name</var> is a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-dictionary" id="ref-for-dfn-dictionary⑧">dictionary</a>.</p>
       <li data-md>
        <p><var>name</var>’s <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-getting-the-keys" id="ref-for-map-getting-the-keys④">key set</a> <a data-link-type="dfn" href="#set-equal" id="ref-for-set-equal①">equals</a> «[
"<code class="idl"><a data-link-type="idl" href="#dom-sanitizerelementnamespace-name" id="ref-for-dom-sanitizerelementnamespace-name①">name</a></code>", "<code class="idl"><a data-link-type="idl" href="#dom-sanitizerelementnamespace-namespace" id="ref-for-dom-sanitizerelementnamespace-namespace">namespace</a></code>"
 ]»</p>
       <li data-md>
        <p><var>name</var>’s <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-getting-the-values" id="ref-for-map-getting-the-values">values</a> are <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string" id="ref-for-string①">string</a>s.</p>
      </ol>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="canonical" data-algorithm-for="SanitizerNameWithAttributesList">
     A <var>list</var> of names is <dfn class="dfn-paneled" data-dfn-for="SanitizerNameWithAttributesList" data-dfn-type="dfn" data-noexport id="sanitizernamewithattributeslist-canonical">canonical</dfn> if all these conditions are met: 
    <ol>
     <li data-md>
      <p><var>list</var>[<var>key</var>] is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list②">list</a>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate⑧">For all</a> of its <var>list</var>[<var>key</var>]'s members <var>name</var>:</p>
      <ol>
       <li data-md>
        <p><var>name</var> is a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-dictionary" id="ref-for-dfn-dictionary⑨">dictionary</a>.</p>
       <li data-md>
        <p><var>name</var>’s <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-getting-the-keys" id="ref-for-map-getting-the-keys⑤">key set</a> <a data-link-type="dfn" href="#set-equal" id="ref-for-set-equal②">equals</a> one of:</p>
        <ol>
         <li data-md>
          <p>«[
 "<code class="idl"><a data-link-type="idl" href="#dom-sanitizerelementnamespace-name" id="ref-for-dom-sanitizerelementnamespace-name②">name</a></code>",
 "<code class="idl"><a data-link-type="idl" href="#dom-sanitizerelementnamespace-namespace" id="ref-for-dom-sanitizerelementnamespace-namespace①">namespace</a></code>"
 ]»</p>
         <li data-md>
          <p>«[
 "<code class="idl"><a data-link-type="idl" href="#dom-sanitizerelementnamespace-name" id="ref-for-dom-sanitizerelementnamespace-name③">name</a></code>",
 "<code class="idl"><a data-link-type="idl" href="#dom-sanitizerelementnamespace-namespace" id="ref-for-dom-sanitizerelementnamespace-namespace②">namespace</a></code>",
 "<code class="idl"><a data-link-type="idl" href="#dom-sanitizerelementnamespacewithattributes-attributes" id="ref-for-dom-sanitizerelementnamespacewithattributes-attributes⑤">attributes</a></code>"
 ]»</p>
         <li data-md>
          <p>«[
 "<code class="idl"><a data-link-type="idl" href="#dom-sanitizerelementnamespace-name" id="ref-for-dom-sanitizerelementnamespace-name④">name</a></code>",
 "<code class="idl"><a data-link-type="idl" href="#dom-sanitizerelementnamespace-namespace" id="ref-for-dom-sanitizerelementnamespace-namespace③">namespace</a></code>",
 "<code class="idl"><a data-link-type="idl" href="#dom-sanitizerelementnamespacewithattributes-removeattributes" id="ref-for-dom-sanitizerelementnamespacewithattributes-removeattributes⑤">removeAttributes</a></code>"
 ]»</p>
        </ol>
       <li data-md>
        <p><var>name</var>["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerelementnamespace-name" id="ref-for-dom-sanitizerelementnamespace-name⑤">name</a></code>"] and <var>name</var>["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerelementnamespace-namespace" id="ref-for-dom-sanitizerelementnamespace-namespace④">namespace</a></code>"] are <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string" id="ref-for-string②">string</a>s.</p>
       <li data-md>
        <p><var>name</var>["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerelementnamespacewithattributes-attributes" id="ref-for-dom-sanitizerelementnamespacewithattributes-attributes⑥">attributes</a></code>"] and <var>name</var>["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerelementnamespacewithattributes-removeattributes" id="ref-for-dom-sanitizerelementnamespacewithattributes-removeattributes⑥">removeAttributes</a></code>"]
  are <a data-link-type="dfn" href="#sanitizernamelist-canonical" id="ref-for-sanitizernamelist-canonical①">canonical</a> if they <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists⑦">exist</a>.</p>
      </ol>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="canonicalize a configuration">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="canonicalize-a-configuration">canonicalize a configuration</dfn> <var>config</var> with a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#boolean" id="ref-for-boolean①">boolean</a> <var>safe</var>: 
    <p class="note" role="note"><span class="marker">Note:</span> The initial set of <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert②">assert</a>s assert properties of the built-in
      constants, like the <a data-link-type="dfn" href="#built-in-default-config" id="ref-for-built-in-default-config①">defaults</a> and
      the lists of known <a data-link-type="dfn" href="#known-elements" id="ref-for-known-elements">elements</a> and <a data-link-type="dfn" href="#known-attributes" id="ref-for-known-attributes">attributes</a>.</p>
    <ol>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert③">Assert</a>: <a data-link-type="dfn" href="#built-in-default-config" id="ref-for-built-in-default-config②">built-in default config</a> is <a data-link-type="dfn" href="#sanitizerconfig-canonical" id="ref-for-sanitizerconfig-canonical③">canonical</a>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert④">Assert</a>: <a data-link-type="dfn" href="#built-in-default-config" id="ref-for-built-in-default-config③">built-in default config</a>["elements"] is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#set-subset" id="ref-for-set-subset①">subset</a> of <a data-link-type="dfn" href="#known-elements" id="ref-for-known-elements①">known elements</a>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert⑤">Assert</a>: <a data-link-type="dfn" href="#built-in-default-config" id="ref-for-built-in-default-config④">built-in default config</a>["attributes"] is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#set-subset" id="ref-for-set-subset②">subset</a> of <a data-link-type="dfn" href="#known-attributes" id="ref-for-known-attributes①">known attributes</a>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert⑥">Assert</a>: «[
 "elements" → <a data-link-type="dfn" href="#known-elements" id="ref-for-known-elements②">known elements</a>,
 "attributes" → <a data-link-type="dfn" href="#known-attributes" id="ref-for-known-attributes②">known attributes</a>,
 ]» is <a data-link-type="dfn" href="#sanitizerconfig-canonical" id="ref-for-sanitizerconfig-canonical④">canonical</a>.</p>
     <li data-md>
      <p>If <var>config</var> is <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-empty" id="ref-for-list-empty⑦">empty</a> and not <var>safe</var>, then return «[]»</p>
     <li data-md>
      <p>If <var>config</var> is not <a data-link-type="dfn" href="#sanitizerconfig-valid" id="ref-for-sanitizerconfig-valid①">valid</a>, then <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw" id="ref-for-dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror">TypeError</a></code>.</p>
     <li data-md>
      <p>Let <var>result</var> be a new <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-dictionary" id="ref-for-dfn-dictionary①⓪">dictionary</a>.</p>
     <li data-md>
      <p>For each <var>key</var> of «[
 "<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-elements" id="ref-for-dom-sanitizerconfig-elements②⓪">elements</a></code>",
 "<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-removeelements" id="ref-for-dom-sanitizerconfig-removeelements①①">removeElements</a></code>",
 "<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-replacewithchildrenelements" id="ref-for-dom-sanitizerconfig-replacewithchildrenelements⑧">replaceWithChildrenElements</a></code>" ]»:</p>
      <ol>
       <li data-md>
        <p>If <var>config</var>[<var>key</var>] exists, set <var>result</var>[<var>key</var>] to the result of running <a data-link-type="dfn" href="#canonicalize-a-sanitizer-element-list" id="ref-for-canonicalize-a-sanitizer-element-list①">canonicalize a sanitizer element list</a> on <var>config</var>[<var>key</var>] with <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#html-namespace" id="ref-for-html-namespace③">HTML namespace</a> as the default namespace.</p>
      </ol>
     <li data-md>
      <p>For each <var>key</var> of «[
 "<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-attributes" id="ref-for-dom-sanitizerconfig-attributes①②">attributes</a></code>",
 "<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-removeattributes" id="ref-for-dom-sanitizerconfig-removeattributes①⓪">removeAttributes</a></code>" ]»:</p>
      <ol>
       <li data-md>
        <p>If <var>config</var>[<var>key</var>] exists, set <var>result</var>[<var>key</var>] to the result of running <a data-link-type="dfn" href="#canonicalize-a-sanitizer-element-list" id="ref-for-canonicalize-a-sanitizer-element-list②">canonicalize a sanitizer element list</a> on <var>config</var>[<var>key</var>] with <code>null</code> as
 the default namespace.</p>
      </ol>
     <li data-md>
      <p>Set <var>result</var>["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-comments" id="ref-for-dom-sanitizerconfig-comments③">comments</a></code>"] to <var>config</var>["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-comments" id="ref-for-dom-sanitizerconfig-comments④">comments</a></code>"].</p>
     <li data-md>
      <p>Let <var>default</var> be the result of <a data-link-type="dfn" href="#canonicalize-a-configuration" id="ref-for-canonicalize-a-configuration③">canonicalizing a configuration</a> for the <a data-link-type="dfn" href="#built-in-default-config" id="ref-for-built-in-default-config⑤">built-in default config</a>.</p>
     <li data-md>
      <p>If <var>safe</var>:</p>
      <ol>
       <li data-md>
        <p>If <var>config</var>["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-elements" id="ref-for-dom-sanitizerconfig-elements②①">elements</a></code>"] <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists⑧">exists</a>:</p>
        <ol>
         <li data-md>
          <p>Let <var>elementBlockList</var> be the <a data-link-type="dfn" href="#set-difference" id="ref-for-set-difference①">difference</a> between <a data-link-type="dfn" href="#known-elements" id="ref-for-known-elements③">known elements</a> <var>default</var>["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-elements" id="ref-for-dom-sanitizerconfig-elements②②">elements</a></code>"].</p>
          <p class="note" role="note"><span class="marker">Note:</span> The "natural" way to enforce the default element list would be
       to intersect with it. But that would also eliminate any unknown
       (i.e., non-HTML supplied element, like &lt;foo>). So we
       construct this helper to be able to use it to subtract any "unsafe"
       elements.</p>
         <li data-md>
          <p>Set <var>result</var>["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-elements" id="ref-for-dom-sanitizerconfig-elements②③">elements</a></code>"] to the <a data-link-type="dfn" href="#set-difference" id="ref-for-set-difference②">difference</a> of <var>result</var>["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-elements" id="ref-for-dom-sanitizerconfig-elements②④">elements</a></code>"] and <var>elementBlockList</var>.</p>
        </ol>
       <li data-md>
        <p>If <var>config</var>["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-removeelements" id="ref-for-dom-sanitizerconfig-removeelements①②">removeElements</a></code>"] <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists⑨">exists</a>:</p>
        <ol>
         <li data-md>
          <p>Set <var>result</var>["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-elements" id="ref-for-dom-sanitizerconfig-elements②⑤">elements</a></code>"] to the <a data-link-type="dfn" href="#set-difference" id="ref-for-set-difference③">difference</a> of <var>default</var>["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-elements" id="ref-for-dom-sanitizerconfig-elements②⑥">elements</a></code>"]
  and <var>result</var>["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-removeelements" id="ref-for-dom-sanitizerconfig-removeelements①③">removeElements</a></code>"].</p>
         <li data-md>
          <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-remove" id="ref-for-list-remove">Remove</a> "<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-removeelements" id="ref-for-dom-sanitizerconfig-removeelements①④">removeElements</a></code>" from <var>result</var>.</p>
        </ol>
       <li data-md>
        <p>If neither <var>config</var>["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-elements" id="ref-for-dom-sanitizerconfig-elements②⑦">elements</a></code>"] nor <var>config</var>["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-removeelements" id="ref-for-dom-sanitizerconfig-removeelements①⑤">removeElements</a></code>"] <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists①⓪">exist</a>:</p>
        <ol>
         <li data-md>
          <p>Set <var>result</var>["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-elements" id="ref-for-dom-sanitizerconfig-elements②⑧">elements</a></code>"] to <var>default</var>["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-elements" id="ref-for-dom-sanitizerconfig-elements②⑨">elements</a></code>"].</p>
        </ol>
       <li data-md>
        <p>If <var>config</var>["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-attributes" id="ref-for-dom-sanitizerconfig-attributes①③">attributes</a></code>"] <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists①①">exists</a>:</p>
        <ol>
         <li data-md>
          <p>Let <var>attributeBlockList</var> be the <a data-link-type="dfn" href="#set-difference" id="ref-for-set-difference④">difference</a> between <a data-link-type="dfn" href="#known-attributes" id="ref-for-known-attributes③">known attributes</a> and <var>default</var>["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-attributes" id="ref-for-dom-sanitizerconfig-attributes①④">attributes</a></code>"];</p>
         <li data-md>
          <p>Set <var>result</var>["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-attributes" id="ref-for-dom-sanitizerconfig-attributes①⑤">attributes</a></code>"] to the <a data-link-type="dfn" href="#set-difference" id="ref-for-set-difference⑤">difference</a> of <var>result</var>["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-attributes" id="ref-for-dom-sanitizerconfig-attributes①⑥">attributes</a></code>"] and <var>attributeBlockList</var>.</p>
        </ol>
       <li data-md>
        <p>If <var>config</var>["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-removeattributes" id="ref-for-dom-sanitizerconfig-removeattributes①①">removeAttributes</a></code>"] <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists①②">exists</a>:</p>
        <ol>
         <li data-md>
          <p>Set <var>result</var>["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-attributes" id="ref-for-dom-sanitizerconfig-attributes①⑦">attributes</a></code>"] to the <a data-link-type="dfn" href="#set-difference" id="ref-for-set-difference⑥">difference</a> of <var>default</var>["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-attributes" id="ref-for-dom-sanitizerconfig-attributes①⑧">attributes</a></code>"]
  and <var>result</var>["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-removeattributes" id="ref-for-dom-sanitizerconfig-removeattributes①②">removeAttributes</a></code>"].</p>
         <li data-md>
          <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-remove" id="ref-for-list-remove①">Remove</a> "<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-removeattributes" id="ref-for-dom-sanitizerconfig-removeattributes①③">removeAttributes</a></code>" from <var>result</var>.</p>
        </ol>
       <li data-md>
        <p>If neither <var>config</var>["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-attributes" id="ref-for-dom-sanitizerconfig-attributes①⑨">attributes</a></code>"] nor <var>config</var>["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-removeattributes" id="ref-for-dom-sanitizerconfig-removeattributes①④">removeAttributes</a></code>"] <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists①③">exist</a>:</p>
        <ol>
         <li data-md>
          <p>Set <var>result</var>["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-attributes" id="ref-for-dom-sanitizerconfig-attributes②⓪">attributes</a></code>"] to <var>default</var>["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-attributes" id="ref-for-dom-sanitizerconfig-attributes②①">attributes</a></code>"].</p>
        </ol>
      </ol>
     <li data-md>
      <p>Else (if not <var>safe</var>):</p>
      <ol>
       <li data-md>
        <p>If neither <var>config</var>["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-elements" id="ref-for-dom-sanitizerconfig-elements③⓪">elements</a></code>"] nor <var>config</var>["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-removeelements" id="ref-for-dom-sanitizerconfig-removeelements①⑥">removeElements</a></code>"] <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists①④">exist</a>:</p>
        <ol>
         <li data-md>
          <p>Set <var>result</var>["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-elements" id="ref-for-dom-sanitizerconfig-elements③①">elements</a></code>"] to <var>default</var>["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-elements" id="ref-for-dom-sanitizerconfig-elements③②">elements</a></code>"].</p>
        </ol>
       <li data-md>
        <p>If neither <var>config</var>["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-attributes" id="ref-for-dom-sanitizerconfig-attributes②②">attributes</a></code>"] nor <var>config</var>["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-removeattributes" id="ref-for-dom-sanitizerconfig-removeattributes①⑤">removeAttributes</a></code>"] <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists①⑤">exist</a>:</p>
        <ol>
         <li data-md>
          <p>Set <var>result</var>["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-attributes" id="ref-for-dom-sanitizerconfig-attributes②③">attributes</a></code>"] to <var>default</var>["<code class="idl"><a data-link-type="idl" href="#dom-sanitizerconfig-attributes" id="ref-for-dom-sanitizerconfig-attributes②④">attributes</a></code>"].</p>
        </ol>
      </ol>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert⑦">Assert</a>: <var>result</var> is <a data-link-type="dfn" href="#sanitizerconfig-valid" id="ref-for-sanitizerconfig-valid②">valid</a>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert⑧">Assert</a>: <var>result</var> is <a data-link-type="dfn" href="#sanitizerconfig-canonical" id="ref-for-sanitizerconfig-canonical⑤">canonical</a>.</p>
     <li data-md>
      <p>Return <var>result</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="canonicalize a sanitizer element list">
     In order to <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="canonicalize-a-sanitizer-element-list">canonicalize a sanitizer element list</dfn> <var>list</var>, with a
default namespace <var>defaultNamespace</var>, run the following steps: 
    <ol>
     <li data-md>
      <p>Let <var>result</var> be a new <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set">ordered set</a>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate⑨">For each</a> <var>name</var> in <var>list</var>, call <a data-link-type="dfn" href="#canonicalize-a-sanitizer-name" id="ref-for-canonicalize-a-sanitizer-name">canonicalize a sanitizer name</a> on <var>name</var> with <var>defaultNamespace</var> and <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#set-append" id="ref-for-set-append">append</a> to <var>result</var>.</p>
     <li data-md>
      <p>Return <var>result</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="canonicalize a sanitizer name">
     In order to <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="canonicalize-a-sanitizer-name">canonicalize a sanitizer name</dfn> <var>name</var>, with a default
namespace <var>defaultNamespace</var>, run the following steps: 
    <ol>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert⑨">Assert</a>: <var>name</var> is either a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString①①">DOMString</a></code> or a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-dictionary" id="ref-for-dfn-dictionary①①">dictionary</a>.</p>
     <li data-md>
      <p>If <var>name</var> is a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString①②">DOMString</a></code>, then return «[ "<code>name</code>" → <var>name</var>, "<code>namespace</code>" → <var>defaultNamespace</var>]».</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert①⓪">Assert</a>: <var>name</var> is a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-dictionary" id="ref-for-dfn-dictionary①②">dictionary</a> and <var>name</var>["name"] <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists①⑥">exists</a>.</p>
     <li data-md>
      <p>Return «[ <br> "<code>name</code>" → <var>name</var>["name"], <br> "<code>namespace</code>" → <var>name</var>["namespace"] if it <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists①⑦">exists</a>, otherwise <var>defaultNamespace</var> <br> ]».</p>
    </ol>
   </div>
   <h3 class="heading settled" data-level="3.3" id="alg-support"><span class="secno">3.3. </span><span class="content">Supporting Algorithms</span><a class="self-link" href="#alg-support"></a></h3>
   <div class="algorithm" data-algorithm="contains" data-algorithm-for="SanitizerConfig"> For the <a data-link-type="dfn" href="#canonicalize-a-sanitizer-name" id="ref-for-canonicalize-a-sanitizer-name①">canonicalized</a> <code class="idl"><a data-link-type="idl" href="#dictdef-sanitizerelementnamespace" id="ref-for-dictdef-sanitizerelementnamespace③">element</a></code> and <code class="idl"><a data-link-type="idl" href="#dictdef-sanitizerattributenamespace" id="ref-for-dictdef-sanitizerattributenamespace②">attribute name</a></code> lists
used in this spec, list membership is based on matching both "<code>name</code>" and "<code>namespace</code>"
entries:
A Sanitizer name <var>list</var> <dfn class="dfn-paneled" data-dfn-for="SanitizerConfig" data-dfn-type="dfn" data-noexport id="sanitizerconfig-contains">contains</dfn> an <var>item</var> if there exists an <var>entry</var> of <var>list</var> that is an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map">ordered map</a>, and where <var>item</var>["name"] <a data-link-type="dfn" href="#set-equal" id="ref-for-set-equal③">equals</a> <var>entry</var>["name"] and <var>item</var>["namespace"] <a data-link-type="dfn" href="#set-equal" id="ref-for-set-equal④">equals</a> <var>entry</var>["namespace"]. </div>
   <div class="algorithm" data-algorithm="difference" data-algorithm-for="set">
     Set difference (or set subtraction) is a clone of a set A, but with all members
removed that occur in a set B:
To compute the <dfn class="dfn-paneled" data-dfn-for="set" data-dfn-type="dfn" data-noexport id="set-difference">difference</dfn> of two <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set①">ordered sets</a> <var>A</var> and <var>B</var>: 
    <ol>
     <li data-md>
      <p>Let <var>set</var> be a new <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set②">ordered set</a>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate①⓪">For each</a> <var>item</var> of <var>A</var>:</p>
      <ol>
       <li data-md>
        <p>If <var>B</var> does not <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-contain" id="ref-for-list-contain④">contain</a> <var>item</var>, then <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#set-append" id="ref-for-set-append①">append</a> <var>item</var> to <var>set</var>.</p>
      </ol>
     <li data-md>
      <p>Return <var>set</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="equal" data-algorithm-for="set"> Equality for <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set③">ordered sets</a> is equality of its members, but without
regard to order: <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set④">Ordered sets</a> <var>A</var> and <var>B</var> are <dfn class="dfn-paneled" data-dfn-for="set" data-dfn-type="dfn" data-noexport id="set-equal">equal</dfn> if both <var>A</var> is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#set-superset" id="ref-for-set-superset">superset</a> of <var>B</var> and <var>B</var> is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#set-superset" id="ref-for-set-superset①">superset</a> of <var>A</var>. </div>
   <h3 class="heading settled" data-level="3.4" id="sanitization-defaults"><span class="secno">3.4. </span><span class="content">Defaults</span><a class="self-link" href="#sanitization-defaults"></a></h3>
   <p class="note" role="note"><span class="marker">Note:</span> The defaults should follow a certain form, which is checked for at the
      beginning of <a data-link-type="dfn" href="#canonicalize-a-configuration" id="ref-for-canonicalize-a-configuration④">canonicalize a configuration</a>.</p>
   <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="built-in-default-config">built-in default config</dfn> is as follows:</p>
<pre>{
  elements: [....],
  attributes: [....],
  comments: true,
}
</pre>
   <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="known-elements">known elements</dfn> are as follows:</p>
<pre>[
  { name: "div", namespace: "http://www.w3.org/1999/xhtml" },
  ...
]
</pre>
   <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="known-attributes">known attributes</dfn> are as follows:</p>
<pre>[
  { name: "class", namespace: null },
  ...
]
</pre>
   <p class="note" role="note"><span class="marker">Note:</span> The <a data-link-type="dfn" href="#known-elements" id="ref-for-known-elements④">known elements</a> and <a data-link-type="dfn" href="#known-attributes" id="ref-for-known-attributes④">known attributes</a> should be derived from the
      HTML5 specification, rather than being explicitly listed here. Currently,
      there are no mechanics to do so.</p>
   <div>
     The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="navigating-url-attributes-list">navigating URL attributes list</dfn>, for which "<code>javascript:</code>"
navigations are unsafe, are as follows: 
    <p>«[ <br> [
    { "<code>name</code>" → "<code>a</code>", "<code>namespace</code>" → "<a data-link-type="dfn" href="https://infra.spec.whatwg.org/#html-namespace" id="ref-for-html-namespace④">HTML namespace</a>" },
    { "<code>name</code>" → "<code>href</code>", "<code>namespace</code>" → <code>null</code> }
  ], <br> [
    { "<code>name</code>" → "<code>area</code>", "<code>namespace</code>" → "<a data-link-type="dfn" href="https://infra.spec.whatwg.org/#html-namespace" id="ref-for-html-namespace⑤">HTML namespace</a>" },
    { "<code>name</code>" → "<code>href</code>", "<code>namespace</code>" → <code>null</code> }
  ], <br> [
    { "<code>name</code>" → "<code>form</code>", "<code>namespace</code>" → "<a data-link-type="dfn" href="https://infra.spec.whatwg.org/#html-namespace" id="ref-for-html-namespace⑥">HTML namespace</a>" },
    { "<code>name</code>" → "<code>action</code>", "<code>namespace</code>" → <code>null</code> }
  ], <br> [
    { "<code>name</code>" → "<code>input</code>", "<code>namespace</code>" → "<a data-link-type="dfn" href="https://infra.spec.whatwg.org/#html-namespace" id="ref-for-html-namespace⑦">HTML namespace</a>" },
    { "<code>name</code>" → "<code>formaction</code>", "<code>namespace</code>" → <code>null</code> }
  ], <br> [
    { "<code>name</code>" → "<code>button</code>", "<code>namespace</code>" → "<a data-link-type="dfn" href="https://infra.spec.whatwg.org/#html-namespace" id="ref-for-html-namespace⑧">HTML namespace</a>" },
    { "<code>name</code>" → "<code>formaction</code>", "<code>namespace</code>" → <code>null</code> }
  ], <br> ]»</p>
   </div>
   <h2 class="heading settled" data-level="4" id="security-considerations"><span class="secno">4. </span><span class="content">Security Considerations</span><a class="self-link" href="#security-considerations"></a></h2>
   <p>The Sanitizer API is intended to prevent DOM-based Cross-Site Scripting
by traversing a supplied HTML content and removing elements and attributes
according to a configuration. The specified API must not support
the construction of a Sanitizer object that leaves script-capable markup in
and doing so would be a bug in the threat model.</p>
   <p>That being said, there are security issues which the correct usage of the
Sanitizer API will not be able to protect against and the scenarios will be
laid out in the following sections.</p>
   <h3 class="heading settled" data-level="4.1" id="server-side-xss"><span class="secno">4.1. </span><span class="content">Server-Side Reflected and Stored XSS</span><a class="self-link" href="#server-side-xss"></a></h3>
   <p><em>This section is not normative.</em></p>
   <p>The Sanitizer API operates solely in the DOM and adds a capability to traverse
and filter an existing DocumentFragment. The Sanitizer does not address
server-side reflected or stored XSS.</p>
   <h3 class="heading settled" data-level="4.2" id="dom-clobbering"><span class="secno">4.2. </span><span class="content">DOM clobbering</span><a class="self-link" href="#dom-clobbering"></a></h3>
   <p><em>This section is not normative.</em></p>
   <p>DOM clobbering describes an attack in which malicious HTML confuses an
application by naming elements through <code>id</code> or <code>name</code> attributes such that
properties like <code>children</code> of an HTML element in the DOM are overshadowed by
the malicious content.</p>
   <p>The Sanitizer API does not protect DOM clobbering attacks in its
default state, but can be configured to remove <code>id</code> and <code>name</code> attributes.</p>
   <h3 class="heading settled" data-level="4.3" id="script-gadgets"><span class="secno">4.3. </span><span class="content">XSS with Script gadgets</span><a class="self-link" href="#script-gadgets"></a></h3>
   <p><em>This section is not normative.</em></p>
   <p>Script gadgets are a technique in which an attacker uses existing application
code from popular JavaScript libraries to cause their own code to execute.
This is often done by injecting innocent-looking code or seemingly inert
DOM nodes that is only parsed and interpreted by a framework which then
performs the execution of JavaScript based on that input.</p>
   <p>The Sanitizer API can not prevent these attacks, but requires page authors to
explicitly allow unknown elements in general, and authors must additionally
explicitly configure unknown attributes and elements and markup that is known
to be widely used for templating and framework-specific code,
like <code>data-</code> and <code>slot</code> attributes and elements like <code>&lt;slot></code> and <code>&lt;template></code>.
We believe that these restrictions are not exhaustive and encourage page
authors to examine their third party libraries for this behavior.</p>
   <h3 class="heading settled" data-level="4.4" id="mutated-xss"><span class="secno">4.4. </span><span class="content">Mutated XSS</span><a class="self-link" href="#mutated-xss"></a></h3>
   <p><em>This section is not normative.</em></p>
   <p>Mutated XSS or mXSS describes an attack based on parser context mismatches
when parsing an HTML snippet without the correct context. In particular,
when a parsed HTML fragment has been serialized to a string, the string is
not guaranteed to be parsed and interpreted exactly the same when inserted
into a different parent element. An example for carrying out such an attack
is by relying on the change of parsing behavior for foreign content or
mis-nested tags.</p>
   <p>The Sanitizer API offers help against Mutated XSS, but relies on some amount of
cooperation by the developers. The <code>sanitize()</code> function does not handle strings
and is therefore unaffected. The <code>setHTML</code> function combines sanitization
with DOM modification and can implicitly apply the correct context. The <code>sanitizeFor()</code> function combines parsing and sanitization, and relies on the
developer to supply the correct context for the eventual application of its
result.</p>
   <p>If the data to be sanitized is available as a node tree, we encourage authors
to use the <code>sanitize()</code> function of the API which returns a
DocumentFragment and avoids risks that come with serialization and additional
parsing. Directly operating on a fragment after sanitization also comes with a
performance benefit, as the cost of additional serialization and parsing is
avoided.</p>
   <p>A more complete treatment of mXSS can be found in <a data-link-type="biblio" href="#biblio-mxss" title="mXSS Attacks: Attacking well-secured Web-Applications by using innerHTML Mutations">[MXSS]</a>.</p>
   <h2 class="heading settled" data-level="5" id="ack"><span class="secno">5. </span><span class="content">Acknowledgements</span><a class="self-link" href="#ack"></a></h2>
   <p>Cure53’s <a data-link-type="biblio" href="#biblio-dompurify" title="DOMPurify">[DOMPURIFY]</a> is a clear inspiration for the API this document
describes, as is Internet Explorer’s <code class="idl"><a data-link-type="idl" href="https://msdn.microsoft.com/en-us/library/cc848922(v=vs.85).aspx" id="ref-for-something">window.toStaticHTML()</a></code>.</p>
  </main>
  <script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
  <h2 class="no-num no-ref heading settled" id="index"><span class="content">Index</span><a class="self-link" href="#index"></a></h2>
  <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">Terms defined by this specification</span><a class="self-link" href="#index-defined-here"></a></h3>
  <ul class="index">
   <li>
    attributes
    <ul>
     <li><a href="#dom-sanitizerconfig-attributes">dict-member for SanitizerConfig</a><span>, in § 2.3</span>
     <li><a href="#dom-sanitizerelementnamespacewithattributes-attributes">dict-member for SanitizerElementNamespaceWithAttributes</a><span>, in § 2.3</span>
    </ul>
   <li><a href="#built-in-default-config">built-in default config</a><span>, in § 3.4</span>
   <li>
    canonical
    <ul>
     <li><a href="#sanitizerconfig-canonical">dfn for SanitizerConfig</a><span>, in § 3.2</span>
     <li><a href="#sanitizernamelist-canonical">dfn for SanitizerNameList</a><span>, in § 3.2</span>
     <li><a href="#sanitizernamewithattributeslist-canonical">dfn for SanitizerNameWithAttributesList</a><span>, in § 3.2</span>
    </ul>
   <li><a href="#canonicalize-a-configuration">canonicalize a configuration</a><span>, in § 3.2</span>
   <li><a href="#canonicalize-a-sanitizer-element-list">canonicalize a sanitizer element list</a><span>, in § 3.2</span>
   <li><a href="#canonicalize-a-sanitizer-name">canonicalize a sanitizer name</a><span>, in § 3.2</span>
   <li><a href="#dom-sanitizerconfig-comments">comments</a><span>, in § 2.3</span>
   <li><a href="#sanitizer-constructor">constructor</a><span>, in § 2.2</span>
   <li><a href="#dom-sanitizer-sanitizer">constructor()</a><span>, in § 2.2</span>
   <li><a href="#dom-sanitizer-sanitizer">constructor(config)</a><span>, in § 2.2</span>
   <li><a href="#sanitizerconfig-contains">contains</a><span>, in § 3.3</span>
   <li><a href="#dom-sanitizerconfig-dataattributes">dataAttributes</a><span>, in § 2.3</span>
   <li><a href="#set-difference">difference</a><span>, in § 3.3</span>
   <li><a href="#dom-sanitizerconfig-elements">elements</a><span>, in § 2.3</span>
   <li><a href="#set-equal">equal</a><span>, in § 3.3</span>
   <li><a href="#sanitizer-get">get</a><span>, in § 2.2</span>
   <li><a href="#dom-sanitizer-get">get()</a><span>, in § 2.2</span>
   <li><a href="#sanitizerconfig-get-a-sanitizer-config-from-options">get a sanitizer config from options</a><span>, in § 3</span>
   <li><a href="#sanitizer-getunsafe">getUnsafe</a><span>, in § 2.2</span>
   <li><a href="#dom-sanitizer-getunsafe">getUnsafe()</a><span>, in § 2.2</span>
   <li><a href="#known-attributes">known attributes</a><span>, in § 3.4</span>
   <li><a href="#known-elements">known elements</a><span>, in § 3.4</span>
   <li>
    name
    <ul>
     <li><a href="#dom-sanitizerattributenamespace-name">dict-member for SanitizerAttributeNamespace</a><span>, in § 2.3</span>
     <li><a href="#dom-sanitizerelementnamespace-name">dict-member for SanitizerElementNamespace</a><span>, in § 2.3</span>
    </ul>
   <li>
    namespace
    <ul>
     <li><a href="#dom-sanitizerattributenamespace-namespace">dict-member for SanitizerAttributeNamespace</a><span>, in § 2.3</span>
     <li><a href="#dom-sanitizerelementnamespace-namespace">dict-member for SanitizerElementNamespace</a><span>, in § 2.3</span>
    </ul>
   <li><a href="#navigating-url-attributes-list">navigating URL attributes list</a><span>, in § 3.4</span>
   <li><a href="#dom-document-parsehtml①">parseHTML</a><span>, in § 2.1</span>
   <li><a href="#dom-document-parsehtml">parseHTML(html)</a><span>, in § 2.1</span>
   <li><a href="#dom-document-parsehtml">parseHTML(html, options)</a><span>, in § 2.1</span>
   <li><a href="#dom-document-parsehtmlunsafe①">parseHTMLUnsafe</a><span>, in § 2.1</span>
   <li><a href="#dom-document-parsehtmlunsafe">parseHTMLUnsafe(html)</a><span>, in § 2.1</span>
   <li><a href="#dom-document-parsehtmlunsafe">parseHTMLUnsafe(html, options)</a><span>, in § 2.1</span>
   <li>
    removeAttributes
    <ul>
     <li><a href="#dom-sanitizerconfig-removeattributes">dict-member for SanitizerConfig</a><span>, in § 2.3</span>
     <li><a href="#dom-sanitizerelementnamespacewithattributes-removeattributes">dict-member for SanitizerElementNamespaceWithAttributes</a><span>, in § 2.3</span>
    </ul>
   <li><a href="#dom-sanitizerconfig-removeelements">removeElements</a><span>, in § 2.3</span>
   <li><a href="#dom-sanitizerconfig-replacewithchildrenelements">replaceWithChildrenElements</a><span>, in § 2.3</span>
   <li><a href="#sanitize">sanitize</a><span>, in § 3.1</span>
   <li><a href="#sanitizer">Sanitizer</a><span>, in § 2.2</span>
   <li><a href="#dom-sethtmloptions-sanitizer">sanitizer</a><span>, in § 2.2</span>
   <li><a href="#dom-sanitizer-sanitizer">Sanitizer()</a><span>, in § 2.2</span>
   <li><a href="#typedefdef-sanitizerattribute">SanitizerAttribute</a><span>, in § 2.3</span>
   <li><a href="#dictdef-sanitizerattributenamespace">SanitizerAttributeNamespace</a><span>, in § 2.3</span>
   <li><a href="#dom-sanitizer-sanitizer">Sanitizer(config)</a><span>, in § 2.2</span>
   <li><a href="#dictdef-sanitizerconfig">SanitizerConfig</a><span>, in § 2.3</span>
   <li><a href="#typedefdef-sanitizerelement">SanitizerElement</a><span>, in § 2.3</span>
   <li><a href="#dictdef-sanitizerelementnamespace">SanitizerElementNamespace</a><span>, in § 2.3</span>
   <li><a href="#dictdef-sanitizerelementnamespacewithattributes">SanitizerElementNamespaceWithAttributes</a><span>, in § 2.3</span>
   <li><a href="#typedefdef-sanitizerelementwithattributes">SanitizerElementWithAttributes</a><span>, in § 2.3</span>
   <li><a href="#set-and-filter-html">set and filter HTML</a><span>, in § 3</span>
   <li>
    setHTML
    <ul>
     <li><a href="#dom-element-sethtml①">dfn for DOM/Element</a><span>, in § 2.1</span>
     <li><a href="#dom-shadowroot-sethtml①">dfn for DOM/ShadowRoot</a><span>, in § 2.1</span>
    </ul>
   <li>
    setHTML(html)
    <ul>
     <li><a href="#dom-element-sethtml">method for Element</a><span>, in § 2.1</span>
     <li><a href="#dom-shadowroot-sethtml">method for ShadowRoot</a><span>, in § 2.1</span>
    </ul>
   <li>
    setHTML(html, options)
    <ul>
     <li><a href="#dom-element-sethtml">method for Element</a><span>, in § 2.1</span>
     <li><a href="#dom-shadowroot-sethtml">method for ShadowRoot</a><span>, in § 2.1</span>
    </ul>
   <li><a href="#dictdef-sethtmloptions">SetHTMLOptions</a><span>, in § 2.2</span>
   <li>
    setHTMLUnsafe
    <ul>
     <li><a href="#dom-element-sethtmlunsafe①">dfn for DOM/Element</a><span>, in § 2.1</span>
     <li><a href="#dom-shadowroot-sethtmlunsafe①">dfn for DOM/ShadowRoot</a><span>, in § 2.1</span>
    </ul>
   <li>
    setHTMLUnsafe(html)
    <ul>
     <li><a href="#dom-element-sethtmlunsafe">method for Element</a><span>, in § 2.1</span>
     <li><a href="#dom-shadowroot-sethtmlunsafe">method for ShadowRoot</a><span>, in § 2.1</span>
    </ul>
   <li>
    setHTMLUnsafe(html, options)
    <ul>
     <li><a href="#dom-element-sethtmlunsafe">method for Element</a><span>, in § 2.1</span>
     <li><a href="#dom-shadowroot-sethtmlunsafe">method for ShadowRoot</a><span>, in § 2.1</span>
    </ul>
   <li>
    valid
    <ul>
     <li><a href="#sanitizerconfig-valid">dfn for SanitizerConfig</a><span>, in § 3.2</span>
     <li><a href="#sanitizernamelist-valid">dfn for SanitizerNameList</a><span>, in § 3.2</span>
    </ul>
  </ul>
  <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">Terms defined by reference</span><a class="self-link" href="#index-defined-elsewhere"></a></h3>
  <ul class="index">
   <li>
    <a data-link-type="biblio">[]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="9c72363f">innerHTML</span>
     <li><span class="dfn-paneled" id="dd722468">internal slot</span>
     <li><span class="dfn-paneled" id="769996cd">parse html from a string</span>
     <li><span class="dfn-paneled" id="b159e2cd">template contents</span>
     <li><span class="dfn-paneled" id="d354f084">window.toStaticHTML()</span>
    </ul>
   <li>
    <a data-link-type="biblio">[DOM]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="a0647283">Comment</span>
     <li><span class="dfn-paneled" id="85394472">Document</span>
     <li><span class="dfn-paneled" id="49a2843d">DocumentFragment</span>
     <li><span class="dfn-paneled" id="296f3551">Element</span>
     <li><span class="dfn-paneled" id="96c16e60">Node</span>
     <li><span class="dfn-paneled" id="ece46d2b">ParentNode</span>
     <li><span class="dfn-paneled" id="1cd7ff31">ShadowRoot</span>
     <li><span class="dfn-paneled" id="597088f0">Text</span>
     <li><span class="dfn-paneled" id="5c8f824f">allow declarative shadow roots</span>
     <li><span class="dfn-paneled" id="77211728">attribute list</span>
     <li><span class="dfn-paneled" id="92b2d7da">children</span>
     <li><span class="dfn-paneled" id="3f23ec71">content type</span>
     <li><span class="dfn-paneled" id="e240317a">local name <small>(for Attr)</small></span>
     <li><span class="dfn-paneled" id="83ca4a87">local name <small>(for Element)</small></span>
     <li><span class="dfn-paneled" id="b3955a25">namespace <small>(for Attr)</small></span>
     <li><span class="dfn-paneled" id="746cc3ba">namespace <small>(for Element)</small></span>
     <li><span class="dfn-paneled" id="5216e1a0">node document</span>
     <li><span class="dfn-paneled" id="0e0b900e">remove</span>
     <li><span class="dfn-paneled" id="4fd7ca14">replace all</span>
     <li><span class="dfn-paneled" id="f7960529">root</span>
     <li><span class="dfn-paneled" id="58a8f724">shadow host</span>
     <li><span class="dfn-paneled" id="ce720392">shadow root</span>
    </ul>
   <li>
    <a data-link-type="biblio">[HTML]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="402ed79d">CEReactions</span>
     <li><span class="dfn-paneled" id="dbd32973">DOMParser</span>
     <li><span class="dfn-paneled" id="f099a38d">HTMLTemplateElement</span>
     <li><span class="dfn-paneled" id="799f3036">fragment parsing algorithm steps</span>
     <li><span class="dfn-paneled" id="b815ad04">parseFromString(string, type)</span>
    </ul>
   <li>
    <a data-link-type="biblio">[INFRA]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="53275e46">append <small>(for list)</small></span>
     <li><span class="dfn-paneled" id="a3b18719">append <small>(for set)</small></span>
     <li><span class="dfn-paneled" id="77b4c09a">assert</span>
     <li><span class="dfn-paneled" id="36858240">boolean</span>
     <li><span class="dfn-paneled" id="4943545e">code unit prefix</span>
     <li><span class="dfn-paneled" id="ae8def21">contain</span>
     <li><span class="dfn-paneled" id="f937b7b6">continue</span>
     <li><span class="dfn-paneled" id="03afaf9c">empty</span>
     <li><span class="dfn-paneled" id="1243a891">exist</span>
     <li><span class="dfn-paneled" id="f052b1ea">html namespace</span>
     <li><span class="dfn-paneled" id="e5ea84f2">intersection</span>
     <li><span class="dfn-paneled" id="f02cd417">iterate</span>
     <li><span class="dfn-paneled" id="31db57e6">keys</span>
     <li><span class="dfn-paneled" id="649608b9">list</span>
     <li><span class="dfn-paneled" id="84b454ff">ordered map</span>
     <li><span class="dfn-paneled" id="692595fe">ordered set</span>
     <li><span class="dfn-paneled" id="99c988d6">remove</span>
     <li><span class="dfn-paneled" id="0698d556">string</span>
     <li><span class="dfn-paneled" id="5c7fa56b">subset</span>
     <li><span class="dfn-paneled" id="35feaa5b">superset</span>
     <li><span class="dfn-paneled" id="85a289c7">svg namespace</span>
     <li><span class="dfn-paneled" id="12d6b9a8">values</span>
    </ul>
   <li>
    <a data-link-type="biblio">[SPEECH-API]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="d0c88c92">string</span>
    </ul>
   <li>
    <a data-link-type="biblio">[TRUSTED-TYPES]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="00a2b23d">HTMLString</span>
    </ul>
   <li>
    <a data-link-type="biblio">[URLPATTERN]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="80d81456">protocol</span>
    </ul>
   <li>
    <a data-link-type="biblio">[WEBIDL]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="8855a9aa">DOMString</span>
     <li><span class="dfn-paneled" id="889e932f">Exposed</span>
     <li><span class="dfn-paneled" id="82ca3efc">TypeError</span>
     <li><span class="dfn-paneled" id="5372cca8">boolean</span>
     <li><span class="dfn-paneled" id="bec98d30">dictionary</span>
     <li><span class="dfn-paneled" id="a32c65d4">implements</span>
     <li><span class="dfn-paneled" id="9cce47fd">sequence</span>
     <li><span class="dfn-paneled" id="4013a022">this</span>
     <li><span class="dfn-paneled" id="b4cfa5ce">throw</span>
     <li><span class="dfn-paneled" id="5f90bbfb">undefined</span>
    </ul>
  </ul>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="normative"><span class="content">Normative References</span><a class="self-link" href="#normative"></a></h3>
  <dl>
   <dt id="biblio-dom">[DOM]
   <dd>Anne van Kesteren. <a href="https://dom.spec.whatwg.org/"><cite>DOM Standard</cite></a>. Living Standard. URL: <a href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
   <dt id="biblio-html">[HTML]
   <dd>Anne van Kesteren; et al. <a href="https://html.spec.whatwg.org/multipage/"><cite>HTML Standard</cite></a>. Living Standard. URL: <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
   <dt id="biblio-infra">[INFRA]
   <dd>Anne van Kesteren; Domenic Denicola. <a href="https://infra.spec.whatwg.org/"><cite>Infra Standard</cite></a>. Living Standard. URL: <a href="https://infra.spec.whatwg.org/">https://infra.spec.whatwg.org/</a>
   <dt id="biblio-speech-api">[SPEECH-API]
   <dd><a href="https://wicg.github.io/speech-api/"><cite>Web Speech API</cite></a>. cg-draft. URL: <a href="https://wicg.github.io/speech-api/">https://wicg.github.io/speech-api/</a>
   <dt id="biblio-trusted-types">[TRUSTED-TYPES]
   <dd>Krzysztof Kotowicz. <a href="https://w3c.github.io/trusted-types/dist/spec/"><cite>Trusted Types</cite></a>. URL: <a href="https://w3c.github.io/trusted-types/dist/spec/">https://w3c.github.io/trusted-types/dist/spec/</a>
   <dt id="biblio-urlpattern">[URLPATTERN]
   <dd>Ben Kelly; Jeremy Roman; 宍戸俊哉 (Shunya Shishido). <a href="https://urlpattern.spec.whatwg.org/"><cite>URL Pattern Standard</cite></a>. Living Standard. URL: <a href="https://urlpattern.spec.whatwg.org/">https://urlpattern.spec.whatwg.org/</a>
   <dt id="biblio-webidl">[WEBIDL]
   <dd>Edgar Chen; Timothy Gu. <a href="https://webidl.spec.whatwg.org/"><cite>Web IDL Standard</cite></a>. Living Standard. URL: <a href="https://webidl.spec.whatwg.org/">https://webidl.spec.whatwg.org/</a>
  </dl>
  <h3 class="no-num no-ref heading settled" id="informative"><span class="content">Informative References</span><a class="self-link" href="#informative"></a></h3>
  <dl>
   <dt id="biblio-dompurify">[DOMPURIFY]
   <dd><a href="https://github.com/cure53/DOMPurify"><cite>DOMPurify</cite></a>. URL: <a href="https://github.com/cure53/DOMPurify">https://github.com/cure53/DOMPurify</a>
   <dt id="biblio-mxss">[MXSS]
   <dd><a href="https://cure53.de/fp170.pdf"><cite>mXSS Attacks: Attacking well-secured Web-Applications by using innerHTML Mutations</cite></a>. URL: <a href="https://cure53.de/fp170.pdf">https://cure53.de/fp170.pdf</a>
  </dl>
  <h2 class="no-num no-ref heading settled" id="idl-index"><span class="content">IDL Index</span><a class="self-link" href="#idl-index"></a></h2>
<pre class="idl highlight def"><c- b>dictionary</c-> <a href="#dictdef-sethtmloptions"><code><c- g>SetHTMLOptions</c-></code></a> {
  (<a data-link-type="idl-name" href="#sanitizer"><c- n>Sanitizer</c-></a> <c- b>or</c-> <a data-link-type="idl-name" href="#dictdef-sanitizerconfig"><c- n>SanitizerConfig</c-></a>) <a data-default="{}" data-type="(Sanitizer or SanitizerConfig)" href="#dom-sethtmloptions-sanitizer"><code><c- g>sanitizer</c-></code></a> = {};
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=(<c- n>Window</c->,<c- n>Worker</c->)]
<c- b>interface</c-> <a href="#sanitizer"><code><c- g>Sanitizer</c-></code></a> {
  <a href="#dom-sanitizer-sanitizer"><code><c- g>constructor</c-></code></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-sanitizerconfig"><c- n>SanitizerConfig</c-></a> <a href="#dom-sanitizer-sanitizer-config-config"><code><c- g>config</c-></code></a> = {});
  <a data-link-type="idl-name" href="#dictdef-sanitizerconfig"><c- n>SanitizerConfig</c-></a> <a href="#dom-sanitizer-get"><code><c- g>get</c-></code></a>();
  <a data-link-type="idl-name" href="#dictdef-sanitizerconfig"><c- n>SanitizerConfig</c-></a> <a href="#dom-sanitizer-getunsafe"><code><c- g>getUnsafe</c-></code></a>();
};

<c- b>dictionary</c-> <a href="#dictdef-sanitizerelementnamespace"><code><c- g>SanitizerElementNamespace</c-></code></a> {
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a data-type="DOMString" href="#dom-sanitizerelementnamespace-name"><code><c- g>name</c-></code></a>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a>? <a data-default="&quot;http://www.w3.org/1999/xhtml&quot;" data-type="DOMString?" href="#dom-sanitizerelementnamespace-namespace"><code><c- g>_namespace</c-></code></a> = "http://www.w3.org/1999/xhtml";
};

// Used by "elements"
<c- b>dictionary</c-> <a href="#dictdef-sanitizerelementnamespacewithattributes"><code><c- g>SanitizerElementNamespaceWithAttributes</c-></code></a> : <a data-link-type="idl-name" href="#dictdef-sanitizerelementnamespace"><c- n>SanitizerElementNamespace</c-></a> {
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#typedefdef-sanitizerattribute"><c- n>SanitizerAttribute</c-></a>> <a data-type="sequence<SanitizerAttribute>" href="#dom-sanitizerelementnamespacewithattributes-attributes"><code><c- g>attributes</c-></code></a>;
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#typedefdef-sanitizerattribute"><c- n>SanitizerAttribute</c-></a>> <a data-type="sequence<SanitizerAttribute>" href="#dom-sanitizerelementnamespacewithattributes-removeattributes"><code><c- g>removeAttributes</c-></code></a>;
};

<c- b>typedef</c-> (<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <c- b>or</c-> <a data-link-type="idl-name" href="#dictdef-sanitizerelementnamespace"><c- n>SanitizerElementNamespace</c-></a>) <a href="#typedefdef-sanitizerelement"><code><c- g>SanitizerElement</c-></code></a>;
<c- b>typedef</c-> (<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <c- b>or</c-> <a data-link-type="idl-name" href="#dictdef-sanitizerelementnamespacewithattributes"><c- n>SanitizerElementNamespaceWithAttributes</c-></a>) <a href="#typedefdef-sanitizerelementwithattributes"><code><c- g>SanitizerElementWithAttributes</c-></code></a>;

<c- b>dictionary</c-> <a href="#dictdef-sanitizerattributenamespace"><code><c- g>SanitizerAttributeNamespace</c-></code></a> {
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a data-type="DOMString" href="#dom-sanitizerattributenamespace-name"><code><c- g>name</c-></code></a>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a>? <a data-default="null" data-type="DOMString?" href="#dom-sanitizerattributenamespace-namespace"><code><c- g>_namespace</c-></code></a> = <c- b>null</c->;
};
<c- b>typedef</c-> (<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <c- b>or</c-> <a data-link-type="idl-name" href="#dictdef-sanitizerattributenamespace"><c- n>SanitizerAttributeNamespace</c-></a>) <a href="#typedefdef-sanitizerattribute"><code><c- g>SanitizerAttribute</c-></code></a>;

<c- b>dictionary</c-> <a href="#dictdef-sanitizerconfig"><code><c- g>SanitizerConfig</c-></code></a> {
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#typedefdef-sanitizerelementwithattributes"><c- n>SanitizerElementWithAttributes</c-></a>> <a data-type="sequence<SanitizerElementWithAttributes>" href="#dom-sanitizerconfig-elements"><code><c- g>elements</c-></code></a>;
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#typedefdef-sanitizerelement"><c- n>SanitizerElement</c-></a>> <a data-type="sequence<SanitizerElement>" href="#dom-sanitizerconfig-removeelements"><code><c- g>removeElements</c-></code></a>;
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#typedefdef-sanitizerelement"><c- n>SanitizerElement</c-></a>> <a data-type="sequence<SanitizerElement>" href="#dom-sanitizerconfig-replacewithchildrenelements"><code><c- g>replaceWithChildrenElements</c-></code></a>;

  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#typedefdef-sanitizerattribute"><c- n>SanitizerAttribute</c-></a>> <a data-type="sequence<SanitizerAttribute>" href="#dom-sanitizerconfig-attributes"><code><c- g>attributes</c-></code></a>;
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#typedefdef-sanitizerattribute"><c- n>SanitizerAttribute</c-></a>> <a data-type="sequence<SanitizerAttribute>" href="#dom-sanitizerconfig-removeattributes"><code><c- g>removeAttributes</c-></code></a>;

  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a data-type="boolean" href="#dom-sanitizerconfig-comments"><code><c- g>comments</c-></code></a>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a data-type="boolean" href="#dom-sanitizerconfig-dataattributes"><code><c- g>dataAttributes</c-></code></a>;
};

</pre>
<script>/* Boilerplate: script-dom-helper */
"use strict";
function query(sel) { return document.querySelector(sel); }

function queryAll(sel) { return [...document.querySelectorAll(sel)]; }

function iter(obj) {
	if(!obj) return [];
	var it = obj[Symbol.iterator];
	if(it) return it;
	return Object.entries(obj);
}

function mk(tagname, attrs, ...children) {
	const el = document.createElement(tagname);
	for(const [k,v] of iter(attrs)) {
		if(k.slice(0,3) == "_on") {
			const eventName = k.slice(3);
			el.addEventListener(eventName, v);
		} else if(k[0] == "_") {
			// property, not attribute
			el[k.slice(1)] = v;
		} else {
			if(v === false || v == null) {
        continue;
      } else if(v === true) {
        el.setAttribute(k, "");
        continue;
      } else {
  			el.setAttribute(k, v);
      }
		}
	}
	append(el, children);
	return el;
}

/* Create shortcuts for every known HTML element */
[
  "a",
  "abbr",
  "acronym",
  "address",
  "applet",
  "area",
  "article",
  "aside",
  "audio",
  "b",
  "base",
  "basefont",
  "bdo",
  "big",
  "blockquote",
  "body",
  "br",
  "button",
  "canvas",
  "caption",
  "center",
  "cite",
  "code",
  "col",
  "colgroup",
  "datalist",
  "dd",
  "del",
  "details",
  "dfn",
  "dialog",
  "div",
  "dl",
  "dt",
  "em",
  "embed",
  "fieldset",
  "figcaption",
  "figure",
  "font",
  "footer",
  "form",
  "frame",
  "frameset",
  "head",
  "header",
  "h1",
  "h2",
  "h3",
  "h4",
  "h5",
  "h6",
  "hr",
  "html",
  "i",
  "iframe",
  "img",
  "input",
  "ins",
  "kbd",
  "label",
  "legend",
  "li",
  "link",
  "main",
  "map",
  "mark",
  "meta",
  "meter",
  "nav",
  "nobr",
  "noscript",
  "object",
  "ol",
  "optgroup",
  "option",
  "output",
  "p",
  "param",
  "pre",
  "progress",
  "q",
  "s",
  "samp",
  "script",
  "section",
  "select",
  "small",
  "source",
  "span",
  "strike",
  "strong",
  "style",
  "sub",
  "summary",
  "sup",
  "table",
  "tbody",
  "td",
  "template",
  "textarea",
  "tfoot",
  "th",
  "thead",
  "time",
  "title",
  "tr",
  "u",
  "ul",
  "var",
  "video",
  "wbr",
  "xmp",
].forEach(tagname=>{
	mk[tagname] = (...args) => mk(tagname, ...args);
});

function* nodesFromChildList(children) {
	for(const child of children.flat(Infinity)) {
		if(child instanceof Node) {
			yield child;
		} else {
			yield new Text(child);
		}
	}
}
function append(el, ...children) {
	for(const child of nodesFromChildList(children)) {
		if(el instanceof Node) el.appendChild(child);
		else el.push(child);
	}
	return el;
}

function insertAfter(el, ...children) {
	for(const child of nodesFromChildList(children)) {
		el.parentNode.insertBefore(child, el.nextSibling);
	}
	return el;
}

function clearContents(el) {
	el.innerHTML = "";
	return el;
}

function parseHTML(markup) {
	if(markup.toLowerCase().trim().indexOf('<!doctype') === 0) {
		const doc = document.implementation.createHTMLDocument("");
		doc.documentElement.innerHTML = markup;
		return doc;
	} else {
		const el = mk.template({});
		el.innerHTML = markup;
		return el.content;
	}
}</script>
<script>/* Boilerplate: script-dfn-panel */
"use strict";
{
let dfnPanelData = {
"00a2b23d": {"dfnID":"00a2b23d","dfnText":"HTMLString","external":true,"refSections":[{"refs":[{"id":"ref-for-typedefdef-htmlstring"},{"id":"ref-for-typedefdef-htmlstring\u2460"},{"id":"ref-for-typedefdef-htmlstring\u2461"}],"title":"2.1. Sanitizer API"}],"url":"https://w3c.github.io/trusted-types/dist/spec/#typedefdef-htmlstring"},
"03afaf9c": {"dfnID":"03afaf9c","dfnText":"empty","external":true,"refSections":[{"refs":[{"id":"ref-for-list-empty"}],"title":"2.1. Sanitizer API"},{"refs":[{"id":"ref-for-list-empty\u2460"}],"title":"3. Algorithms"},{"refs":[{"id":"ref-for-list-empty\u2461"},{"id":"ref-for-list-empty\u2462"},{"id":"ref-for-list-empty\u2463"},{"id":"ref-for-list-empty\u2464"},{"id":"ref-for-list-empty\u2465"},{"id":"ref-for-list-empty\u2466"}],"title":"3.2. Configuration Processing"}],"url":"https://infra.spec.whatwg.org/#list-empty"},
"0698d556": {"dfnID":"0698d556","dfnText":"string","external":true,"refSections":[{"refs":[{"id":"ref-for-string"}],"title":"3. Algorithms"},{"refs":[{"id":"ref-for-string\u2460"},{"id":"ref-for-string\u2461"}],"title":"3.2. Configuration Processing"}],"url":"https://infra.spec.whatwg.org/#string"},
"0e0b900e": {"dfnID":"0e0b900e","dfnText":"remove","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-node-remove"},{"id":"ref-for-concept-node-remove\u2460"},{"id":"ref-for-concept-node-remove\u2461"},{"id":"ref-for-concept-node-remove\u2462"}],"title":"3.1. Sanitization Algorithms"}],"url":"https://dom.spec.whatwg.org/#concept-node-remove"},
"1243a891": {"dfnID":"1243a891","dfnText":"exist","external":true,"refSections":[{"refs":[{"id":"ref-for-map-exists"}],"title":"3. Algorithms"},{"refs":[{"id":"ref-for-map-exists\u2460"},{"id":"ref-for-map-exists\u2461"},{"id":"ref-for-map-exists\u2462"},{"id":"ref-for-map-exists\u2463"},{"id":"ref-for-map-exists\u2464"},{"id":"ref-for-map-exists\u2465"},{"id":"ref-for-map-exists\u2466"},{"id":"ref-for-map-exists\u2467"},{"id":"ref-for-map-exists\u2468"},{"id":"ref-for-map-exists\u2460\u24ea"},{"id":"ref-for-map-exists\u2460\u2460"},{"id":"ref-for-map-exists\u2460\u2461"},{"id":"ref-for-map-exists\u2460\u2462"},{"id":"ref-for-map-exists\u2460\u2463"},{"id":"ref-for-map-exists\u2460\u2464"},{"id":"ref-for-map-exists\u2460\u2465"},{"id":"ref-for-map-exists\u2460\u2466"}],"title":"3.2. Configuration Processing"}],"url":"https://infra.spec.whatwg.org/#map-exists"},
"12d6b9a8": {"dfnID":"12d6b9a8","dfnText":"values","external":true,"refSections":[{"refs":[{"id":"ref-for-map-getting-the-values"}],"title":"3.2. Configuration Processing"}],"url":"https://infra.spec.whatwg.org/#map-getting-the-values"},
"1cd7ff31": {"dfnID":"1cd7ff31","dfnText":"ShadowRoot","external":true,"refSections":[{"refs":[{"id":"ref-for-shadowroot"}],"title":"1.2. API Summary"},{"refs":[{"id":"ref-for-shadowroot\u2460"},{"id":"ref-for-shadowroot\u2461"},{"id":"ref-for-shadowroot\u2462"},{"id":"ref-for-shadowroot\u2463"}],"title":"2.1. Sanitizer API"}],"url":"https://dom.spec.whatwg.org/#shadowroot"},
"296f3551": {"dfnID":"296f3551","dfnText":"Element","external":true,"refSections":[{"refs":[{"id":"ref-for-element"}],"title":"1. Introduction"},{"refs":[{"id":"ref-for-element\u2460"}],"title":"1.2. API Summary"},{"refs":[{"id":"ref-for-element\u2461"},{"id":"ref-for-element\u2462"},{"id":"ref-for-element\u2463"},{"id":"ref-for-element\u2464"}],"title":"2.1. Sanitizer API"},{"refs":[{"id":"ref-for-element\u2465"},{"id":"ref-for-element\u2466"}],"title":"3. Algorithms"},{"refs":[{"id":"ref-for-element\u2467"}],"title":"3.1. Sanitization Algorithms"}],"url":"https://dom.spec.whatwg.org/#element"},
"31db57e6": {"dfnID":"31db57e6","dfnText":"keys","external":true,"refSections":[{"refs":[{"id":"ref-for-map-getting-the-keys"},{"id":"ref-for-map-getting-the-keys\u2460"},{"id":"ref-for-map-getting-the-keys\u2461"},{"id":"ref-for-map-getting-the-keys\u2462"},{"id":"ref-for-map-getting-the-keys\u2463"},{"id":"ref-for-map-getting-the-keys\u2464"}],"title":"3.2. Configuration Processing"}],"url":"https://infra.spec.whatwg.org/#map-getting-the-keys"},
"35feaa5b": {"dfnID":"35feaa5b","dfnText":"superset","external":true,"refSections":[{"refs":[{"id":"ref-for-set-superset"},{"id":"ref-for-set-superset\u2460"}],"title":"3.3. Supporting Algorithms"}],"url":"https://infra.spec.whatwg.org/#set-superset"},
"36858240": {"dfnID":"36858240","dfnText":"boolean","external":true,"refSections":[{"refs":[{"id":"ref-for-boolean"}],"title":"3. Algorithms"},{"refs":[{"id":"ref-for-boolean\u2460"}],"title":"3.2. Configuration Processing"}],"url":"https://infra.spec.whatwg.org/#boolean"},
"3f23ec71": {"dfnID":"3f23ec71","dfnText":"content type","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-document-content-type"},{"id":"ref-for-concept-document-content-type\u2460"}],"title":"2.1. Sanitizer API"}],"url":"https://dom.spec.whatwg.org/#concept-document-content-type"},
"4013a022": {"dfnID":"4013a022","dfnText":"this","external":true,"refSections":[{"refs":[{"id":"ref-for-this"},{"id":"ref-for-this\u2460"},{"id":"ref-for-this\u2461"},{"id":"ref-for-this\u2462"},{"id":"ref-for-this\u2463"},{"id":"ref-for-this\u2464"},{"id":"ref-for-this\u2465"},{"id":"ref-for-this\u2466"},{"id":"ref-for-this\u2467"},{"id":"ref-for-this\u2468"},{"id":"ref-for-this\u2460\u24ea"},{"id":"ref-for-this\u2460\u2460"}],"title":"2.1. Sanitizer API"},{"refs":[{"id":"ref-for-this\u2460\u2461"},{"id":"ref-for-this\u2460\u2462"},{"id":"ref-for-this\u2460\u2463"}],"title":"2.2. SetHTML options and the configuration object."}],"url":"https://webidl.spec.whatwg.org/#this"},
"402ed79d": {"dfnID":"402ed79d","dfnText":"CEReactions","external":true,"refSections":[{"refs":[{"id":"ref-for-cereactions"},{"id":"ref-for-cereactions\u2460"},{"id":"ref-for-cereactions\u2461"},{"id":"ref-for-cereactions\u2462"}],"title":"2.1. Sanitizer API"}],"url":"https://html.spec.whatwg.org/multipage/custom-elements.html#cereactions"},
"4943545e": {"dfnID":"4943545e","dfnText":"code unit prefix","external":true,"refSections":[{"refs":[{"id":"ref-for-code-unit-prefix"}],"title":"3.1. Sanitization Algorithms"}],"url":"https://infra.spec.whatwg.org/#code-unit-prefix"},
"49a2843d": {"dfnID":"49a2843d","dfnText":"DocumentFragment","external":true,"refSections":[{"refs":[{"id":"ref-for-documentfragment"},{"id":"ref-for-documentfragment\u2460"}],"title":"3. Algorithms"}],"url":"https://dom.spec.whatwg.org/#documentfragment"},
"4fd7ca14": {"dfnID":"4fd7ca14","dfnText":"replace all","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-node-replace-all"}],"title":"3. Algorithms"},{"refs":[{"id":"ref-for-concept-node-replace-all\u2460"}],"title":"3.1. Sanitization Algorithms"}],"url":"https://dom.spec.whatwg.org/#concept-node-replace-all"},
"5216e1a0": {"dfnID":"5216e1a0","dfnText":"node document","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-node-document"},{"id":"ref-for-concept-node-document\u2460"}],"title":"3. Algorithms"}],"url":"https://dom.spec.whatwg.org/#concept-node-document"},
"53275e46": {"dfnID":"53275e46","dfnText":"append (for list)","external":true,"refSections":[{"refs":[{"id":"ref-for-list-append"}],"title":"3. Algorithms"}],"url":"https://infra.spec.whatwg.org/#list-append"},
"5372cca8": {"dfnID":"5372cca8","dfnText":"boolean","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-boolean"},{"id":"ref-for-idl-boolean\u2460"}],"title":"2.3. The Configuration Dictionary"},{"refs":[{"id":"ref-for-idl-boolean\u2461"}],"title":"3.2. Configuration Processing"}],"url":"https://webidl.spec.whatwg.org/#idl-boolean"},
"58a8f724": {"dfnID":"58a8f724","dfnText":"shadow host","external":true,"refSections":[{"refs":[{"id":"ref-for-element-shadow-host"}],"title":"2.1. Sanitizer API"},{"refs":[{"id":"ref-for-element-shadow-host\u2460"}],"title":"3.1. Sanitization Algorithms"}],"url":"https://dom.spec.whatwg.org/#element-shadow-host"},
"597088f0": {"dfnID":"597088f0","dfnText":"Text","external":true,"refSections":[{"refs":[{"id":"ref-for-text"},{"id":"ref-for-text\u2460"}],"title":"3.1. Sanitization Algorithms"}],"url":"https://dom.spec.whatwg.org/#text"},
"5c7fa56b": {"dfnID":"5c7fa56b","dfnText":"subset","external":true,"refSections":[{"refs":[{"id":"ref-for-set-subset"},{"id":"ref-for-set-subset\u2460"},{"id":"ref-for-set-subset\u2461"}],"title":"3.2. Configuration Processing"}],"url":"https://infra.spec.whatwg.org/#set-subset"},
"5c8f824f": {"dfnID":"5c8f824f","dfnText":"allow declarative shadow roots","external":true,"refSections":[{"refs":[{"id":"ref-for-document-allow-declarative-shadow-roots"},{"id":"ref-for-document-allow-declarative-shadow-roots\u2460"}],"title":"2.1. Sanitizer API"}],"url":"https://dom.spec.whatwg.org/#document-allow-declarative-shadow-roots"},
"5f90bbfb": {"dfnID":"5f90bbfb","dfnText":"undefined","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-undefined"},{"id":"ref-for-idl-undefined\u2460"},{"id":"ref-for-idl-undefined\u2461"},{"id":"ref-for-idl-undefined\u2462"}],"title":"2.1. Sanitizer API"}],"url":"https://webidl.spec.whatwg.org/#idl-undefined"},
"649608b9": {"dfnID":"649608b9","dfnText":"list","external":true,"refSections":[{"refs":[{"id":"ref-for-list"},{"id":"ref-for-list\u2460"},{"id":"ref-for-list\u2461"}],"title":"3.2. Configuration Processing"}],"url":"https://infra.spec.whatwg.org/#list"},
"692595fe": {"dfnID":"692595fe","dfnText":"ordered set","external":true,"refSections":[{"refs":[{"id":"ref-for-ordered-set"}],"title":"3.2. Configuration Processing"},{"refs":[{"id":"ref-for-ordered-set\u2460"},{"id":"ref-for-ordered-set\u2461"},{"id":"ref-for-ordered-set\u2462"},{"id":"ref-for-ordered-set\u2463"}],"title":"3.3. Supporting Algorithms"}],"url":"https://infra.spec.whatwg.org/#ordered-set"},
"746cc3ba": {"dfnID":"746cc3ba","dfnText":"namespace (for Element)","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-element-namespace"}],"title":"3. Algorithms"},{"refs":[{"id":"ref-for-concept-element-namespace\u2460"}],"title":"3.1. Sanitization Algorithms"}],"url":"https://dom.spec.whatwg.org/#concept-element-namespace"},
"769996cd": {"dfnID":"769996cd","dfnText":"parse html from a string","external":true,"refSections":[{"refs":[{"id":"ref-for-parse-html-from-a-string"},{"id":"ref-for-parse-html-from-a-string\u2460"}],"title":"2.1. Sanitizer API"}],"url":"https://html.spec.whatwg.org/#parse-html-from-a-string"},
"77211728": {"dfnID":"77211728","dfnText":"attribute list","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-element-attribute"}],"title":"3.1. Sanitization Algorithms"}],"url":"https://dom.spec.whatwg.org/#concept-element-attribute"},
"77b4c09a": {"dfnID":"77b4c09a","dfnText":"assert","external":true,"refSections":[{"refs":[{"id":"ref-for-assert"},{"id":"ref-for-assert\u2460"}],"title":"3.1. Sanitization Algorithms"},{"refs":[{"id":"ref-for-assert\u2461"},{"id":"ref-for-assert\u2462"},{"id":"ref-for-assert\u2463"},{"id":"ref-for-assert\u2464"},{"id":"ref-for-assert\u2465"},{"id":"ref-for-assert\u2466"},{"id":"ref-for-assert\u2467"},{"id":"ref-for-assert\u2468"},{"id":"ref-for-assert\u2460\u24ea"}],"title":"3.2. Configuration Processing"}],"url":"https://infra.spec.whatwg.org/#assert"},
"799f3036": {"dfnID":"799f3036","dfnText":"fragment parsing algorithm steps","external":true,"refSections":[{"refs":[{"id":"ref-for-fragment-parsing-algorithm-steps"}],"title":"3. Algorithms"}],"url":"https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#fragment-parsing-algorithm-steps"},
"80d81456": {"dfnID":"80d81456","dfnText":"protocol","external":true,"refSections":[{"refs":[{"id":"ref-for-constructor-string-parser-state-protocol"}],"title":"3.1. Sanitization Algorithms"}],"url":"https://urlpattern.spec.whatwg.org/#constructor-string-parser-state-protocol"},
"82ca3efc": {"dfnID":"82ca3efc","dfnText":"TypeError","external":true,"refSections":[{"refs":[{"id":"ref-for-exceptiondef-typeerror"}],"title":"3.2. Configuration Processing"}],"url":"https://webidl.spec.whatwg.org/#exceptiondef-typeerror"},
"83ca4a87": {"dfnID":"83ca4a87","dfnText":"local name (for Element)","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-element-local-name"}],"title":"3. Algorithms"},{"refs":[{"id":"ref-for-concept-element-local-name\u2460"}],"title":"3.1. Sanitization Algorithms"}],"url":"https://dom.spec.whatwg.org/#concept-element-local-name"},
"84b454ff": {"dfnID":"84b454ff","dfnText":"ordered map","external":true,"refSections":[{"refs":[{"id":"ref-for-ordered-map"}],"title":"3.3. Supporting Algorithms"}],"url":"https://infra.spec.whatwg.org/#ordered-map"},
"85394472": {"dfnID":"85394472","dfnText":"Document","external":true,"refSections":[{"refs":[{"id":"ref-for-document"}],"title":"1.2. API Summary"},{"refs":[{"id":"ref-for-document\u2460"},{"id":"ref-for-document\u2461"},{"id":"ref-for-document\u2462"},{"id":"ref-for-document\u2463"},{"id":"ref-for-document\u2464"},{"id":"ref-for-document\u2465"},{"id":"ref-for-document\u2466"}],"title":"2.1. Sanitizer API"}],"url":"https://dom.spec.whatwg.org/#document"},
"85a289c7": {"dfnID":"85a289c7","dfnText":"svg namespace","external":true,"refSections":[{"refs":[{"id":"ref-for-svg-namespace"}],"title":"3. Algorithms"}],"url":"https://infra.spec.whatwg.org/#svg-namespace"},
"8855a9aa": {"dfnID":"8855a9aa","dfnText":"DOMString","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-DOMString"},{"id":"ref-for-idl-DOMString\u2460"},{"id":"ref-for-idl-DOMString\u2461"},{"id":"ref-for-idl-DOMString\u2462"}],"title":"2.1. Sanitizer API"},{"refs":[{"id":"ref-for-idl-DOMString\u2463"},{"id":"ref-for-idl-DOMString\u2464"},{"id":"ref-for-idl-DOMString\u2465"},{"id":"ref-for-idl-DOMString\u2466"},{"id":"ref-for-idl-DOMString\u2467"},{"id":"ref-for-idl-DOMString\u2468"},{"id":"ref-for-idl-DOMString\u2460\u24ea"}],"title":"2.3. The Configuration Dictionary"},{"refs":[{"id":"ref-for-idl-DOMString\u2460\u2460"},{"id":"ref-for-idl-DOMString\u2460\u2461"}],"title":"3.2. Configuration Processing"}],"url":"https://webidl.spec.whatwg.org/#idl-DOMString"},
"889e932f": {"dfnID":"889e932f","dfnText":"Exposed","external":true,"refSections":[{"refs":[{"id":"ref-for-Exposed"}],"title":"2.2. SetHTML options and the configuration object."}],"url":"https://webidl.spec.whatwg.org/#Exposed"},
"92b2d7da": {"dfnID":"92b2d7da","dfnText":"children","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-tree-child"},{"id":"ref-for-concept-tree-child\u2460"}],"title":"3.1. Sanitization Algorithms"}],"url":"https://dom.spec.whatwg.org/#concept-tree-child"},
"96c16e60": {"dfnID":"96c16e60","dfnText":"Node","external":true,"refSections":[{"refs":[{"id":"ref-for-node"}],"title":"1.2. API Summary"}],"url":"https://dom.spec.whatwg.org/#node"},
"99c988d6": {"dfnID":"99c988d6","dfnText":"remove","external":true,"refSections":[{"refs":[{"id":"ref-for-list-remove"},{"id":"ref-for-list-remove\u2460"}],"title":"3.2. Configuration Processing"}],"url":"https://infra.spec.whatwg.org/#list-remove"},
"9c72363f": {"dfnID":"9c72363f","dfnText":"innerHTML","external":true,"refSections":[{"refs":[{"id":"ref-for-widl-Element-innerHTML"}],"title":"1. Introduction"},{"refs":[{"id":"ref-for-widl-Element-innerHTML\u2460"}],"title":"1.2. API Summary"}],"url":"https://dom.spec.whatwg.org/#widl-Element-innerHTML"},
"9cce47fd": {"dfnID":"9cce47fd","dfnText":"sequence","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-sequence"},{"id":"ref-for-idl-sequence\u2460"},{"id":"ref-for-idl-sequence\u2461"},{"id":"ref-for-idl-sequence\u2462"},{"id":"ref-for-idl-sequence\u2463"},{"id":"ref-for-idl-sequence\u2464"},{"id":"ref-for-idl-sequence\u2465"}],"title":"2.3. The Configuration Dictionary"}],"url":"https://webidl.spec.whatwg.org/#idl-sequence"},
"a0647283": {"dfnID":"a0647283","dfnText":"Comment","external":true,"refSections":[{"refs":[{"id":"ref-for-comment"},{"id":"ref-for-comment\u2460"}],"title":"3.1. Sanitization Algorithms"}],"url":"https://dom.spec.whatwg.org/#comment"},
"a32c65d4": {"dfnID":"a32c65d4","dfnText":"implements","external":true,"refSections":[{"refs":[{"id":"ref-for-implements"},{"id":"ref-for-implements\u2460"},{"id":"ref-for-implements\u2461"}],"title":"3.1. Sanitization Algorithms"}],"url":"https://webidl.spec.whatwg.org/#implements"},
"a3b18719": {"dfnID":"a3b18719","dfnText":"append (for set)","external":true,"refSections":[{"refs":[{"id":"ref-for-set-append"}],"title":"3.2. Configuration Processing"},{"refs":[{"id":"ref-for-set-append\u2460"}],"title":"3.3. Supporting Algorithms"}],"url":"https://infra.spec.whatwg.org/#set-append"},
"ae8def21": {"dfnID":"ae8def21","dfnText":"contain","external":true,"refSections":[{"refs":[{"id":"ref-for-list-contain"},{"id":"ref-for-list-contain\u2460"},{"id":"ref-for-list-contain\u2461"},{"id":"ref-for-list-contain\u2462"}],"title":"3.2. Configuration Processing"},{"refs":[{"id":"ref-for-list-contain\u2463"}],"title":"3.3. Supporting Algorithms"}],"url":"https://infra.spec.whatwg.org/#list-contain"},
"b159e2cd": {"dfnID":"b159e2cd","dfnText":"template contents","external":true,"refSections":[{"refs":[{"id":"ref-for-template-contents"},{"id":"ref-for-template-contents\u2460"}],"title":"2.1. Sanitizer API"},{"refs":[{"id":"ref-for-template-contents\u2461"}],"title":"3.1. Sanitization Algorithms"}],"url":"https://html.spec.whatwg.org/#template-contents"},
"b3955a25": {"dfnID":"b3955a25","dfnText":"namespace (for Attr)","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-attribute-namespace"},{"id":"ref-for-concept-attribute-namespace\u2460"}],"title":"3.1. Sanitization Algorithms"}],"url":"https://dom.spec.whatwg.org/#concept-attribute-namespace"},
"b4cfa5ce": {"dfnID":"b4cfa5ce","dfnText":"throw","external":true,"refSections":[{"refs":[{"id":"ref-for-dfn-throw"}],"title":"3.2. Configuration Processing"}],"url":"https://webidl.spec.whatwg.org/#dfn-throw"},
"b815ad04": {"dfnID":"b815ad04","dfnText":"parseFromString(string, type)","external":true,"refSections":[{"refs":[{"id":"ref-for-dom-domparser-parsefromstring"}],"title":"1.2. API Summary"}],"url":"https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#dom-domparser-parsefromstring"},
"bec98d30": {"dfnID":"bec98d30","dfnText":"dictionary","external":true,"refSections":[{"refs":[{"id":"ref-for-dfn-dictionary"},{"id":"ref-for-dfn-dictionary\u2460"},{"id":"ref-for-dfn-dictionary\u2461"}],"title":"3. Algorithms"},{"refs":[{"id":"ref-for-dfn-dictionary\u2462"},{"id":"ref-for-dfn-dictionary\u2463"},{"id":"ref-for-dfn-dictionary\u2464"},{"id":"ref-for-dfn-dictionary\u2465"},{"id":"ref-for-dfn-dictionary\u2466"},{"id":"ref-for-dfn-dictionary\u2467"},{"id":"ref-for-dfn-dictionary\u2468"},{"id":"ref-for-dfn-dictionary\u2460\u24ea"},{"id":"ref-for-dfn-dictionary\u2460\u2460"},{"id":"ref-for-dfn-dictionary\u2460\u2461"}],"title":"3.2. Configuration Processing"}],"url":"https://webidl.spec.whatwg.org/#dfn-dictionary"},
"built-in-default-config": {"dfnID":"built-in-default-config","dfnText":"built-in default config","external":false,"refSections":[{"refs":[{"id":"ref-for-built-in-default-config"},{"id":"ref-for-built-in-default-config\u2460"},{"id":"ref-for-built-in-default-config\u2461"},{"id":"ref-for-built-in-default-config\u2462"},{"id":"ref-for-built-in-default-config\u2463"},{"id":"ref-for-built-in-default-config\u2464"}],"title":"3.2. Configuration Processing"}],"url":"#built-in-default-config"},
"canonicalize-a-configuration": {"dfnID":"canonicalize-a-configuration","dfnText":"canonicalize a configuration","external":false,"refSections":[{"refs":[{"id":"ref-for-canonicalize-a-configuration"},{"id":"ref-for-canonicalize-a-configuration\u2460"}],"title":"2.2. SetHTML options and the configuration object."},{"refs":[{"id":"ref-for-canonicalize-a-configuration\u2461"}],"title":"3. Algorithms"},{"refs":[{"id":"ref-for-canonicalize-a-configuration\u2462"}],"title":"3.2. Configuration Processing"},{"refs":[{"id":"ref-for-canonicalize-a-configuration\u2463"}],"title":"3.4. Defaults"}],"url":"#canonicalize-a-configuration"},
"canonicalize-a-sanitizer-element-list": {"dfnID":"canonicalize-a-sanitizer-element-list","dfnText":"canonicalize a sanitizer element list","external":false,"refSections":[{"refs":[{"id":"ref-for-canonicalize-a-sanitizer-element-list"},{"id":"ref-for-canonicalize-a-sanitizer-element-list\u2460"},{"id":"ref-for-canonicalize-a-sanitizer-element-list\u2461"}],"title":"3.2. Configuration Processing"}],"url":"#canonicalize-a-sanitizer-element-list"},
"canonicalize-a-sanitizer-name": {"dfnID":"canonicalize-a-sanitizer-name","dfnText":"canonicalize a sanitizer name","external":false,"refSections":[{"refs":[{"id":"ref-for-canonicalize-a-sanitizer-name"}],"title":"3.2. Configuration Processing"},{"refs":[{"id":"ref-for-canonicalize-a-sanitizer-name\u2460"}],"title":"3.3. Supporting Algorithms"}],"url":"#canonicalize-a-sanitizer-name"},
"ce720392": {"dfnID":"ce720392","dfnText":"shadow root","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-element-shadow-root"},{"id":"ref-for-concept-element-shadow-root\u2460"}],"title":"3.1. Sanitization Algorithms"}],"url":"https://dom.spec.whatwg.org/#concept-element-shadow-root"},
"d0c88c92": {"dfnID":"d0c88c92","dfnText":"string","external":true,"refSections":[{"refs":[{"id":"ref-for-dom-speechgrammarlist-addfromstring-string-weight-string"},{"id":"ref-for-dom-speechgrammarlist-addfromstring-string-weight-string\u2460"}],"title":"3.2. Configuration Processing"}],"url":"https://wicg.github.io/speech-api/#dom-speechgrammarlist-addfromstring-string-weight-string"},
"d354f084": {"dfnID":"d354f084","dfnText":"window.toStaticHTML()","external":true,"refSections":[{"refs":[{"id":"ref-for-something"}],"title":"5. Acknowledgements"}],"url":"https://msdn.microsoft.com/en-us/library/cc848922(v=vs.85).aspx"},
"dbd32973": {"dfnID":"dbd32973","dfnText":"DOMParser","external":true,"refSections":[{"refs":[{"id":"ref-for-domparser"}],"title":"1.2. API Summary"}],"url":"https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#domparser"},
"dd722468": {"dfnID":"dd722468","dfnText":"internal slot","external":true,"refSections":[{"refs":[{"id":"ref-for-sec-ordinary-object-internal-methods-and-internal-slots"},{"id":"ref-for-sec-ordinary-object-internal-methods-and-internal-slots\u2460"},{"id":"ref-for-sec-ordinary-object-internal-methods-and-internal-slots\u2461"}],"title":"2.2. SetHTML options and the configuration object."},{"refs":[{"id":"ref-for-sec-ordinary-object-internal-methods-and-internal-slots\u2462"}],"title":"3. Algorithms"}],"url":"https://tc39.es/ecma262/#sec-ordinary-object-internal-methods-and-internal-slots"},
"dictdef-sanitizerattributenamespace": {"dfnID":"dictdef-sanitizerattributenamespace","dfnText":"SanitizerAttributeNamespace","external":false,"refSections":[{"refs":[{"id":"ref-for-dictdef-sanitizerattributenamespace"}],"title":"2.3. The Configuration Dictionary"},{"refs":[{"id":"ref-for-dictdef-sanitizerattributenamespace\u2460"}],"title":"3.1. Sanitization Algorithms"},{"refs":[{"id":"ref-for-dictdef-sanitizerattributenamespace\u2461"}],"title":"3.3. Supporting Algorithms"}],"url":"#dictdef-sanitizerattributenamespace"},
"dictdef-sanitizerconfig": {"dfnID":"dictdef-sanitizerconfig","dfnText":"SanitizerConfig","external":false,"refSections":[{"refs":[{"id":"ref-for-dictdef-sanitizerconfig"},{"id":"ref-for-dictdef-sanitizerconfig\u2460"},{"id":"ref-for-dictdef-sanitizerconfig\u2461"},{"id":"ref-for-dictdef-sanitizerconfig\u2462"}],"title":"2.2. SetHTML options and the configuration object."},{"refs":[{"id":"ref-for-dictdef-sanitizerconfig\u2463"}],"title":"3.1. Sanitization Algorithms"}],"url":"#dictdef-sanitizerconfig"},
"dictdef-sanitizerelementnamespace": {"dfnID":"dictdef-sanitizerelementnamespace","dfnText":"SanitizerElementNamespace","external":false,"refSections":[{"refs":[{"id":"ref-for-dictdef-sanitizerelementnamespace"},{"id":"ref-for-dictdef-sanitizerelementnamespace\u2460"}],"title":"2.3. The Configuration Dictionary"},{"refs":[{"id":"ref-for-dictdef-sanitizerelementnamespace\u2461"}],"title":"3.1. Sanitization Algorithms"},{"refs":[{"id":"ref-for-dictdef-sanitizerelementnamespace\u2462"}],"title":"3.3. Supporting Algorithms"}],"url":"#dictdef-sanitizerelementnamespace"},
"dictdef-sanitizerelementnamespacewithattributes": {"dfnID":"dictdef-sanitizerelementnamespacewithattributes","dfnText":"SanitizerElementNamespaceWithAttributes","external":false,"refSections":[{"refs":[{"id":"ref-for-dictdef-sanitizerelementnamespacewithattributes"}],"title":"2.3. The Configuration Dictionary"}],"url":"#dictdef-sanitizerelementnamespacewithattributes"},
"dictdef-sethtmloptions": {"dfnID":"dictdef-sethtmloptions","dfnText":"SetHTMLOptions","external":false,"refSections":[{"refs":[{"id":"ref-for-dictdef-sethtmloptions"},{"id":"ref-for-dictdef-sethtmloptions\u2460"},{"id":"ref-for-dictdef-sethtmloptions\u2461"},{"id":"ref-for-dictdef-sethtmloptions\u2462"},{"id":"ref-for-dictdef-sethtmloptions\u2463"},{"id":"ref-for-dictdef-sethtmloptions\u2464"}],"title":"2.1. Sanitizer API"}],"url":"#dictdef-sethtmloptions"},
"dom-document-parsehtml": {"dfnID":"dom-document-parsehtml","dfnText":"parseHTML","external":false,"refSections":[],"url":"#dom-document-parsehtml"},
"dom-document-parsehtml-html-options-html": {"dfnID":"dom-document-parsehtml-html-options-html","dfnText":"html","external":false,"refSections":[],"url":"#dom-document-parsehtml-html-options-html"},
"dom-document-parsehtml-html-options-options": {"dfnID":"dom-document-parsehtml-html-options-options","dfnText":"options","external":false,"refSections":[],"url":"#dom-document-parsehtml-html-options-options"},
"dom-document-parsehtmlunsafe": {"dfnID":"dom-document-parsehtmlunsafe","dfnText":"parseHTMLUnsafe","external":false,"refSections":[],"url":"#dom-document-parsehtmlunsafe"},
"dom-document-parsehtmlunsafe-html-options-html": {"dfnID":"dom-document-parsehtmlunsafe-html-options-html","dfnText":"html","external":false,"refSections":[],"url":"#dom-document-parsehtmlunsafe-html-options-html"},
"dom-document-parsehtmlunsafe-html-options-options": {"dfnID":"dom-document-parsehtmlunsafe-html-options-options","dfnText":"options","external":false,"refSections":[],"url":"#dom-document-parsehtmlunsafe-html-options-options"},
"dom-document-parsehtmlunsafe①": {"dfnID":"dom-document-parsehtmlunsafe\u2460","dfnText":"parseHTMLUnsafe","external":false,"refSections":[],"url":"#dom-document-parsehtmlunsafe\u2460"},
"dom-document-parsehtml①": {"dfnID":"dom-document-parsehtml\u2460","dfnText":"parseHTML","external":false,"refSections":[],"url":"#dom-document-parsehtml\u2460"},
"dom-element-sethtml": {"dfnID":"dom-element-sethtml","dfnText":"setHTML","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-element-sethtml"}],"title":"2.1. Sanitizer API"},{"refs":[{"id":"ref-for-dom-element-sethtml\u2460"}],"title":"2.2. SetHTML options and the configuration object."}],"url":"#dom-element-sethtml"},
"dom-element-sethtml-html-options-html": {"dfnID":"dom-element-sethtml-html-options-html","dfnText":"html","external":false,"refSections":[],"url":"#dom-element-sethtml-html-options-html"},
"dom-element-sethtml-html-options-options": {"dfnID":"dom-element-sethtml-html-options-options","dfnText":"options","external":false,"refSections":[],"url":"#dom-element-sethtml-html-options-options"},
"dom-element-sethtmlunsafe": {"dfnID":"dom-element-sethtmlunsafe","dfnText":"setHTMLUnsafe","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-element-sethtmlunsafe"}],"title":"2.1. Sanitizer API"}],"url":"#dom-element-sethtmlunsafe"},
"dom-element-sethtmlunsafe-html-options-html": {"dfnID":"dom-element-sethtmlunsafe-html-options-html","dfnText":"html","external":false,"refSections":[],"url":"#dom-element-sethtmlunsafe-html-options-html"},
"dom-element-sethtmlunsafe-html-options-options": {"dfnID":"dom-element-sethtmlunsafe-html-options-options","dfnText":"options","external":false,"refSections":[],"url":"#dom-element-sethtmlunsafe-html-options-options"},
"dom-element-sethtmlunsafe①": {"dfnID":"dom-element-sethtmlunsafe\u2460","dfnText":"setHTMLUnsafe","external":false,"refSections":[],"url":"#dom-element-sethtmlunsafe\u2460"},
"dom-element-sethtml①": {"dfnID":"dom-element-sethtml\u2460","dfnText":"setHTML","external":false,"refSections":[],"url":"#dom-element-sethtml\u2460"},
"dom-sanitizer-get": {"dfnID":"dom-sanitizer-get","dfnText":"get","external":false,"refSections":[],"url":"#dom-sanitizer-get"},
"dom-sanitizer-getunsafe": {"dfnID":"dom-sanitizer-getunsafe","dfnText":"getUnsafe","external":false,"refSections":[],"url":"#dom-sanitizer-getunsafe"},
"dom-sanitizer-sanitizer": {"dfnID":"dom-sanitizer-sanitizer","dfnText":"constructor","external":false,"refSections":[],"url":"#dom-sanitizer-sanitizer"},
"dom-sanitizer-sanitizer-config-config": {"dfnID":"dom-sanitizer-sanitizer-config-config","dfnText":"config","external":false,"refSections":[],"url":"#dom-sanitizer-sanitizer-config-config"},
"dom-sanitizerattributenamespace-name": {"dfnID":"dom-sanitizerattributenamespace-name","dfnText":"name","external":false,"refSections":[],"url":"#dom-sanitizerattributenamespace-name"},
"dom-sanitizerattributenamespace-namespace": {"dfnID":"dom-sanitizerattributenamespace-namespace","dfnText":"_namespace","external":false,"refSections":[],"url":"#dom-sanitizerattributenamespace-namespace"},
"dom-sanitizerconfig-attributes": {"dfnID":"dom-sanitizerconfig-attributes","dfnText":"attributes","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-sanitizerconfig-attributes"},{"id":"ref-for-dom-sanitizerconfig-attributes\u2460"}],"title":"3.1. Sanitization Algorithms"},{"refs":[{"id":"ref-for-dom-sanitizerconfig-attributes\u2461"},{"id":"ref-for-dom-sanitizerconfig-attributes\u2462"},{"id":"ref-for-dom-sanitizerconfig-attributes\u2463"},{"id":"ref-for-dom-sanitizerconfig-attributes\u2464"},{"id":"ref-for-dom-sanitizerconfig-attributes\u2465"},{"id":"ref-for-dom-sanitizerconfig-attributes\u2466"},{"id":"ref-for-dom-sanitizerconfig-attributes\u2467"},{"id":"ref-for-dom-sanitizerconfig-attributes\u2468"},{"id":"ref-for-dom-sanitizerconfig-attributes\u2460\u24ea"},{"id":"ref-for-dom-sanitizerconfig-attributes\u2460\u2460"},{"id":"ref-for-dom-sanitizerconfig-attributes\u2460\u2461"},{"id":"ref-for-dom-sanitizerconfig-attributes\u2460\u2462"},{"id":"ref-for-dom-sanitizerconfig-attributes\u2460\u2463"},{"id":"ref-for-dom-sanitizerconfig-attributes\u2460\u2464"},{"id":"ref-for-dom-sanitizerconfig-attributes\u2460\u2465"},{"id":"ref-for-dom-sanitizerconfig-attributes\u2460\u2466"},{"id":"ref-for-dom-sanitizerconfig-attributes\u2460\u2467"},{"id":"ref-for-dom-sanitizerconfig-attributes\u2460\u2468"},{"id":"ref-for-dom-sanitizerconfig-attributes\u2461\u24ea"},{"id":"ref-for-dom-sanitizerconfig-attributes\u2461\u2460"},{"id":"ref-for-dom-sanitizerconfig-attributes\u2461\u2461"},{"id":"ref-for-dom-sanitizerconfig-attributes\u2461\u2462"},{"id":"ref-for-dom-sanitizerconfig-attributes\u2461\u2463"}],"title":"3.2. Configuration Processing"}],"url":"#dom-sanitizerconfig-attributes"},
"dom-sanitizerconfig-comments": {"dfnID":"dom-sanitizerconfig-comments","dfnText":"comments","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-sanitizerconfig-comments"}],"title":"3.1. Sanitization Algorithms"},{"refs":[{"id":"ref-for-dom-sanitizerconfig-comments\u2460"},{"id":"ref-for-dom-sanitizerconfig-comments\u2461"},{"id":"ref-for-dom-sanitizerconfig-comments\u2462"},{"id":"ref-for-dom-sanitizerconfig-comments\u2463"}],"title":"3.2. Configuration Processing"}],"url":"#dom-sanitizerconfig-comments"},
"dom-sanitizerconfig-dataattributes": {"dfnID":"dom-sanitizerconfig-dataattributes","dfnText":"dataAttributes","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-sanitizerconfig-dataattributes"}],"title":"3.1. Sanitization Algorithms"},{"refs":[{"id":"ref-for-dom-sanitizerconfig-dataattributes\u2460"},{"id":"ref-for-dom-sanitizerconfig-dataattributes\u2461"}],"title":"3.2. Configuration Processing"}],"url":"#dom-sanitizerconfig-dataattributes"},
"dom-sanitizerconfig-elements": {"dfnID":"dom-sanitizerconfig-elements","dfnText":"elements","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-sanitizerconfig-elements"},{"id":"ref-for-dom-sanitizerconfig-elements\u2460"},{"id":"ref-for-dom-sanitizerconfig-elements\u2461"},{"id":"ref-for-dom-sanitizerconfig-elements\u2462"},{"id":"ref-for-dom-sanitizerconfig-elements\u2463"},{"id":"ref-for-dom-sanitizerconfig-elements\u2464"},{"id":"ref-for-dom-sanitizerconfig-elements\u2465"},{"id":"ref-for-dom-sanitizerconfig-elements\u2466"}],"title":"3.1. Sanitization Algorithms"},{"refs":[{"id":"ref-for-dom-sanitizerconfig-elements\u2467"},{"id":"ref-for-dom-sanitizerconfig-elements\u2468"},{"id":"ref-for-dom-sanitizerconfig-elements\u2460\u24ea"},{"id":"ref-for-dom-sanitizerconfig-elements\u2460\u2460"},{"id":"ref-for-dom-sanitizerconfig-elements\u2460\u2461"},{"id":"ref-for-dom-sanitizerconfig-elements\u2460\u2462"},{"id":"ref-for-dom-sanitizerconfig-elements\u2460\u2463"},{"id":"ref-for-dom-sanitizerconfig-elements\u2460\u2464"},{"id":"ref-for-dom-sanitizerconfig-elements\u2460\u2465"},{"id":"ref-for-dom-sanitizerconfig-elements\u2460\u2466"},{"id":"ref-for-dom-sanitizerconfig-elements\u2460\u2467"},{"id":"ref-for-dom-sanitizerconfig-elements\u2460\u2468"},{"id":"ref-for-dom-sanitizerconfig-elements\u2461\u24ea"},{"id":"ref-for-dom-sanitizerconfig-elements\u2461\u2460"},{"id":"ref-for-dom-sanitizerconfig-elements\u2461\u2461"},{"id":"ref-for-dom-sanitizerconfig-elements\u2461\u2462"},{"id":"ref-for-dom-sanitizerconfig-elements\u2461\u2463"},{"id":"ref-for-dom-sanitizerconfig-elements\u2461\u2464"},{"id":"ref-for-dom-sanitizerconfig-elements\u2461\u2465"},{"id":"ref-for-dom-sanitizerconfig-elements\u2461\u2466"},{"id":"ref-for-dom-sanitizerconfig-elements\u2461\u2467"},{"id":"ref-for-dom-sanitizerconfig-elements\u2461\u2468"},{"id":"ref-for-dom-sanitizerconfig-elements\u2462\u24ea"},{"id":"ref-for-dom-sanitizerconfig-elements\u2462\u2460"},{"id":"ref-for-dom-sanitizerconfig-elements\u2462\u2461"}],"title":"3.2. Configuration Processing"}],"url":"#dom-sanitizerconfig-elements"},
"dom-sanitizerconfig-removeattributes": {"dfnID":"dom-sanitizerconfig-removeattributes","dfnText":"removeAttributes","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-sanitizerconfig-removeattributes"},{"id":"ref-for-dom-sanitizerconfig-removeattributes\u2460"}],"title":"3.1. Sanitization Algorithms"},{"refs":[{"id":"ref-for-dom-sanitizerconfig-removeattributes\u2461"},{"id":"ref-for-dom-sanitizerconfig-removeattributes\u2462"},{"id":"ref-for-dom-sanitizerconfig-removeattributes\u2463"},{"id":"ref-for-dom-sanitizerconfig-removeattributes\u2464"},{"id":"ref-for-dom-sanitizerconfig-removeattributes\u2465"},{"id":"ref-for-dom-sanitizerconfig-removeattributes\u2466"},{"id":"ref-for-dom-sanitizerconfig-removeattributes\u2467"},{"id":"ref-for-dom-sanitizerconfig-removeattributes\u2468"},{"id":"ref-for-dom-sanitizerconfig-removeattributes\u2460\u24ea"},{"id":"ref-for-dom-sanitizerconfig-removeattributes\u2460\u2460"},{"id":"ref-for-dom-sanitizerconfig-removeattributes\u2460\u2461"},{"id":"ref-for-dom-sanitizerconfig-removeattributes\u2460\u2462"},{"id":"ref-for-dom-sanitizerconfig-removeattributes\u2460\u2463"},{"id":"ref-for-dom-sanitizerconfig-removeattributes\u2460\u2464"}],"title":"3.2. Configuration Processing"}],"url":"#dom-sanitizerconfig-removeattributes"},
"dom-sanitizerconfig-removeelements": {"dfnID":"dom-sanitizerconfig-removeelements","dfnText":"removeElements","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-sanitizerconfig-removeelements"},{"id":"ref-for-dom-sanitizerconfig-removeelements\u2460"}],"title":"3.1. Sanitization Algorithms"},{"refs":[{"id":"ref-for-dom-sanitizerconfig-removeelements\u2461"},{"id":"ref-for-dom-sanitizerconfig-removeelements\u2462"},{"id":"ref-for-dom-sanitizerconfig-removeelements\u2463"},{"id":"ref-for-dom-sanitizerconfig-removeelements\u2464"},{"id":"ref-for-dom-sanitizerconfig-removeelements\u2465"},{"id":"ref-for-dom-sanitizerconfig-removeelements\u2466"},{"id":"ref-for-dom-sanitizerconfig-removeelements\u2467"},{"id":"ref-for-dom-sanitizerconfig-removeelements\u2468"},{"id":"ref-for-dom-sanitizerconfig-removeelements\u2460\u24ea"},{"id":"ref-for-dom-sanitizerconfig-removeelements\u2460\u2460"},{"id":"ref-for-dom-sanitizerconfig-removeelements\u2460\u2461"},{"id":"ref-for-dom-sanitizerconfig-removeelements\u2460\u2462"},{"id":"ref-for-dom-sanitizerconfig-removeelements\u2460\u2463"},{"id":"ref-for-dom-sanitizerconfig-removeelements\u2460\u2464"},{"id":"ref-for-dom-sanitizerconfig-removeelements\u2460\u2465"}],"title":"3.2. Configuration Processing"}],"url":"#dom-sanitizerconfig-removeelements"},
"dom-sanitizerconfig-replacewithchildrenelements": {"dfnID":"dom-sanitizerconfig-replacewithchildrenelements","dfnText":"replaceWithChildrenElements","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-sanitizerconfig-replacewithchildrenelements"},{"id":"ref-for-dom-sanitizerconfig-replacewithchildrenelements\u2460"}],"title":"3.1. Sanitization Algorithms"},{"refs":[{"id":"ref-for-dom-sanitizerconfig-replacewithchildrenelements\u2461"},{"id":"ref-for-dom-sanitizerconfig-replacewithchildrenelements\u2462"},{"id":"ref-for-dom-sanitizerconfig-replacewithchildrenelements\u2463"},{"id":"ref-for-dom-sanitizerconfig-replacewithchildrenelements\u2464"},{"id":"ref-for-dom-sanitizerconfig-replacewithchildrenelements\u2465"},{"id":"ref-for-dom-sanitizerconfig-replacewithchildrenelements\u2466"},{"id":"ref-for-dom-sanitizerconfig-replacewithchildrenelements\u2467"}],"title":"3.2. Configuration Processing"}],"url":"#dom-sanitizerconfig-replacewithchildrenelements"},
"dom-sanitizerelementnamespace-name": {"dfnID":"dom-sanitizerelementnamespace-name","dfnText":"name","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-sanitizerelementnamespace-name"},{"id":"ref-for-dom-sanitizerelementnamespace-name\u2460"},{"id":"ref-for-dom-sanitizerelementnamespace-name\u2461"},{"id":"ref-for-dom-sanitizerelementnamespace-name\u2462"},{"id":"ref-for-dom-sanitizerelementnamespace-name\u2463"},{"id":"ref-for-dom-sanitizerelementnamespace-name\u2464"}],"title":"3.2. Configuration Processing"}],"url":"#dom-sanitizerelementnamespace-name"},
"dom-sanitizerelementnamespace-namespace": {"dfnID":"dom-sanitizerelementnamespace-namespace","dfnText":"_namespace","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-sanitizerelementnamespace-namespace"},{"id":"ref-for-dom-sanitizerelementnamespace-namespace\u2460"},{"id":"ref-for-dom-sanitizerelementnamespace-namespace\u2461"},{"id":"ref-for-dom-sanitizerelementnamespace-namespace\u2462"},{"id":"ref-for-dom-sanitizerelementnamespace-namespace\u2463"}],"title":"3.2. Configuration Processing"}],"url":"#dom-sanitizerelementnamespace-namespace"},
"dom-sanitizerelementnamespacewithattributes-attributes": {"dfnID":"dom-sanitizerelementnamespacewithattributes-attributes","dfnText":"attributes","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-sanitizerelementnamespacewithattributes-attributes"},{"id":"ref-for-dom-sanitizerelementnamespacewithattributes-attributes\u2460"}],"title":"3.1. Sanitization Algorithms"},{"refs":[{"id":"ref-for-dom-sanitizerelementnamespacewithattributes-attributes\u2461"},{"id":"ref-for-dom-sanitizerelementnamespacewithattributes-attributes\u2462"},{"id":"ref-for-dom-sanitizerelementnamespacewithattributes-attributes\u2463"},{"id":"ref-for-dom-sanitizerelementnamespacewithattributes-attributes\u2464"},{"id":"ref-for-dom-sanitizerelementnamespacewithattributes-attributes\u2465"}],"title":"3.2. Configuration Processing"}],"url":"#dom-sanitizerelementnamespacewithattributes-attributes"},
"dom-sanitizerelementnamespacewithattributes-removeattributes": {"dfnID":"dom-sanitizerelementnamespacewithattributes-removeattributes","dfnText":"removeAttributes","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-sanitizerelementnamespacewithattributes-removeattributes"},{"id":"ref-for-dom-sanitizerelementnamespacewithattributes-removeattributes\u2460"}],"title":"3.1. Sanitization Algorithms"},{"refs":[{"id":"ref-for-dom-sanitizerelementnamespacewithattributes-removeattributes\u2461"},{"id":"ref-for-dom-sanitizerelementnamespacewithattributes-removeattributes\u2462"},{"id":"ref-for-dom-sanitizerelementnamespacewithattributes-removeattributes\u2463"},{"id":"ref-for-dom-sanitizerelementnamespacewithattributes-removeattributes\u2464"},{"id":"ref-for-dom-sanitizerelementnamespacewithattributes-removeattributes\u2465"}],"title":"3.2. Configuration Processing"}],"url":"#dom-sanitizerelementnamespacewithattributes-removeattributes"},
"dom-sethtmloptions-sanitizer": {"dfnID":"dom-sethtmloptions-sanitizer","dfnText":"sanitizer","external":false,"refSections":[],"url":"#dom-sethtmloptions-sanitizer"},
"dom-shadowroot-sethtml": {"dfnID":"dom-shadowroot-sethtml","dfnText":"setHTML","external":false,"refSections":[],"url":"#dom-shadowroot-sethtml"},
"dom-shadowroot-sethtml-html-options-html": {"dfnID":"dom-shadowroot-sethtml-html-options-html","dfnText":"html","external":false,"refSections":[],"url":"#dom-shadowroot-sethtml-html-options-html"},
"dom-shadowroot-sethtml-html-options-options": {"dfnID":"dom-shadowroot-sethtml-html-options-options","dfnText":"options","external":false,"refSections":[],"url":"#dom-shadowroot-sethtml-html-options-options"},
"dom-shadowroot-sethtmlunsafe": {"dfnID":"dom-shadowroot-sethtmlunsafe","dfnText":"setHTMLUnsafe","external":false,"refSections":[],"url":"#dom-shadowroot-sethtmlunsafe"},
"dom-shadowroot-sethtmlunsafe-html-options-html": {"dfnID":"dom-shadowroot-sethtmlunsafe-html-options-html","dfnText":"html","external":false,"refSections":[],"url":"#dom-shadowroot-sethtmlunsafe-html-options-html"},
"dom-shadowroot-sethtmlunsafe-html-options-options": {"dfnID":"dom-shadowroot-sethtmlunsafe-html-options-options","dfnText":"options","external":false,"refSections":[],"url":"#dom-shadowroot-sethtmlunsafe-html-options-options"},
"dom-shadowroot-sethtmlunsafe①": {"dfnID":"dom-shadowroot-sethtmlunsafe\u2460","dfnText":"setHTMLUnsafe","external":false,"refSections":[],"url":"#dom-shadowroot-sethtmlunsafe\u2460"},
"dom-shadowroot-sethtml①": {"dfnID":"dom-shadowroot-sethtml\u2460","dfnText":"setHTML","external":false,"refSections":[],"url":"#dom-shadowroot-sethtml\u2460"},
"e240317a": {"dfnID":"e240317a","dfnText":"local name (for Attr)","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-attribute-local-name"},{"id":"ref-for-concept-attribute-local-name\u2460"}],"title":"3.1. Sanitization Algorithms"}],"url":"https://dom.spec.whatwg.org/#concept-attribute-local-name"},
"e5ea84f2": {"dfnID":"e5ea84f2","dfnText":"intersection","external":true,"refSections":[{"refs":[{"id":"ref-for-set-intersection"},{"id":"ref-for-set-intersection\u2460"},{"id":"ref-for-set-intersection\u2461"},{"id":"ref-for-set-intersection\u2462"}],"title":"3.2. Configuration Processing"}],"url":"https://infra.spec.whatwg.org/#set-intersection"},
"ece46d2b": {"dfnID":"ece46d2b","dfnText":"ParentNode","external":true,"refSections":[{"refs":[{"id":"ref-for-parentnode"}],"title":"3.1. Sanitization Algorithms"}],"url":"https://dom.spec.whatwg.org/#parentnode"},
"f02cd417": {"dfnID":"f02cd417","dfnText":"iterate","external":true,"refSections":[{"refs":[{"id":"ref-for-list-iterate"}],"title":"3. Algorithms"},{"refs":[{"id":"ref-for-list-iterate\u2460"},{"id":"ref-for-list-iterate\u2461"}],"title":"3.1. Sanitization Algorithms"},{"refs":[{"id":"ref-for-list-iterate\u2462"},{"id":"ref-for-list-iterate\u2463"},{"id":"ref-for-list-iterate\u2464"},{"id":"ref-for-list-iterate\u2465"},{"id":"ref-for-list-iterate\u2466"},{"id":"ref-for-list-iterate\u2467"},{"id":"ref-for-list-iterate\u2468"}],"title":"3.2. Configuration Processing"},{"refs":[{"id":"ref-for-list-iterate\u2460\u24ea"}],"title":"3.3. Supporting Algorithms"}],"url":"https://infra.spec.whatwg.org/#list-iterate"},
"f052b1ea": {"dfnID":"f052b1ea","dfnText":"html namespace","external":true,"refSections":[{"refs":[{"id":"ref-for-html-namespace"}],"title":"3. Algorithms"},{"refs":[{"id":"ref-for-html-namespace\u2460"}],"title":"3.1. Sanitization Algorithms"},{"refs":[{"id":"ref-for-html-namespace\u2461"},{"id":"ref-for-html-namespace\u2462"}],"title":"3.2. Configuration Processing"},{"refs":[{"id":"ref-for-html-namespace\u2463"},{"id":"ref-for-html-namespace\u2464"},{"id":"ref-for-html-namespace\u2465"},{"id":"ref-for-html-namespace\u2466"},{"id":"ref-for-html-namespace\u2467"}],"title":"3.4. Defaults"}],"url":"https://infra.spec.whatwg.org/#html-namespace"},
"f099a38d": {"dfnID":"f099a38d","dfnText":"HTMLTemplateElement","external":true,"refSections":[{"refs":[{"id":"ref-for-htmltemplateelement"},{"id":"ref-for-htmltemplateelement\u2460"}],"title":"2.1. Sanitizer API"}],"url":"https://html.spec.whatwg.org/multipage/scripting.html#htmltemplateelement"},
"f7960529": {"dfnID":"f7960529","dfnText":"root","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-tree-root"},{"id":"ref-for-concept-tree-root\u2460"}],"title":"2.1. Sanitizer API"}],"url":"https://dom.spec.whatwg.org/#concept-tree-root"},
"f937b7b6": {"dfnID":"f937b7b6","dfnText":"continue","external":true,"refSections":[{"refs":[{"id":"ref-for-iteration-continue"}],"title":"3.1. Sanitization Algorithms"}],"url":"https://infra.spec.whatwg.org/#iteration-continue"},
"known-attributes": {"dfnID":"known-attributes","dfnText":"known attributes","external":false,"refSections":[{"refs":[{"id":"ref-for-known-attributes"},{"id":"ref-for-known-attributes\u2460"},{"id":"ref-for-known-attributes\u2461"},{"id":"ref-for-known-attributes\u2462"}],"title":"3.2. Configuration Processing"},{"refs":[{"id":"ref-for-known-attributes\u2463"}],"title":"3.4. Defaults"}],"url":"#known-attributes"},
"known-elements": {"dfnID":"known-elements","dfnText":"known elements","external":false,"refSections":[{"refs":[{"id":"ref-for-known-elements"},{"id":"ref-for-known-elements\u2460"},{"id":"ref-for-known-elements\u2461"},{"id":"ref-for-known-elements\u2462"}],"title":"3.2. Configuration Processing"},{"refs":[{"id":"ref-for-known-elements\u2463"}],"title":"3.4. Defaults"}],"url":"#known-elements"},
"navigating-url-attributes-list": {"dfnID":"navigating-url-attributes-list","dfnText":"navigating URL attributes list","external":false,"refSections":[{"refs":[{"id":"ref-for-navigating-url-attributes-list"}],"title":"3.1. Sanitization Algorithms"}],"url":"#navigating-url-attributes-list"},
"sanitize": {"dfnID":"sanitize","dfnText":"sanitize","external":false,"refSections":[{"refs":[{"id":"ref-for-sanitize"},{"id":"ref-for-sanitize\u2460"}],"title":"2.1. Sanitizer API"},{"refs":[{"id":"ref-for-sanitize\u2461"}],"title":"3. Algorithms"},{"refs":[{"id":"ref-for-sanitize\u2462"},{"id":"ref-for-sanitize\u2463"},{"id":"ref-for-sanitize\u2464"},{"id":"ref-for-sanitize\u2465"}],"title":"3.1. Sanitization Algorithms"}],"url":"#sanitize"},
"sanitizer": {"dfnID":"sanitizer","dfnText":"Sanitizer","external":false,"refSections":[{"refs":[{"id":"ref-for-sanitizer"},{"id":"ref-for-sanitizer\u2460"}],"title":"2.2. SetHTML options and the configuration object."},{"refs":[{"id":"ref-for-sanitizer\u2461"},{"id":"ref-for-sanitizer\u2462"}],"title":"3. Algorithms"}],"url":"#sanitizer"},
"sanitizer-constructor": {"dfnID":"sanitizer-constructor","dfnText":"constructor","external":false,"refSections":[],"url":"#sanitizer-constructor"},
"sanitizer-get": {"dfnID":"sanitizer-get","dfnText":"get","external":false,"refSections":[],"url":"#sanitizer-get"},
"sanitizer-getunsafe": {"dfnID":"sanitizer-getunsafe","dfnText":"getUnsafe","external":false,"refSections":[],"url":"#sanitizer-getunsafe"},
"sanitizerconfig-canonical": {"dfnID":"sanitizerconfig-canonical","dfnText":"canonical","external":false,"refSections":[{"refs":[{"id":"ref-for-sanitizerconfig-canonical"}],"title":"2.2. SetHTML options and the configuration object."},{"refs":[{"id":"ref-for-sanitizerconfig-canonical\u2460"},{"id":"ref-for-sanitizerconfig-canonical\u2461"}],"title":"3.1. Sanitization Algorithms"},{"refs":[{"id":"ref-for-sanitizerconfig-canonical\u2462"},{"id":"ref-for-sanitizerconfig-canonical\u2463"},{"id":"ref-for-sanitizerconfig-canonical\u2464"}],"title":"3.2. Configuration Processing"}],"url":"#sanitizerconfig-canonical"},
"sanitizerconfig-contains": {"dfnID":"sanitizerconfig-contains","dfnText":"contains","external":false,"refSections":[{"refs":[{"id":"ref-for-sanitizerconfig-contains"},{"id":"ref-for-sanitizerconfig-contains\u2460"},{"id":"ref-for-sanitizerconfig-contains\u2461"},{"id":"ref-for-sanitizerconfig-contains\u2462"},{"id":"ref-for-sanitizerconfig-contains\u2463"},{"id":"ref-for-sanitizerconfig-contains\u2464"},{"id":"ref-for-sanitizerconfig-contains\u2465"}],"title":"3.1. Sanitization Algorithms"}],"url":"#sanitizerconfig-contains"},
"sanitizerconfig-get-a-sanitizer-config-from-options": {"dfnID":"sanitizerconfig-get-a-sanitizer-config-from-options","dfnText":"get a sanitizer config from options","external":false,"refSections":[{"refs":[{"id":"ref-for-sanitizerconfig-get-a-sanitizer-config-from-options"},{"id":"ref-for-sanitizerconfig-get-a-sanitizer-config-from-options\u2460"}],"title":"2.1. Sanitizer API"},{"refs":[{"id":"ref-for-sanitizerconfig-get-a-sanitizer-config-from-options\u2461"}],"title":"3. Algorithms"}],"url":"#sanitizerconfig-get-a-sanitizer-config-from-options"},
"sanitizerconfig-valid": {"dfnID":"sanitizerconfig-valid","dfnText":"valid","external":false,"refSections":[{"refs":[{"id":"ref-for-sanitizerconfig-valid"},{"id":"ref-for-sanitizerconfig-valid\u2460"},{"id":"ref-for-sanitizerconfig-valid\u2461"}],"title":"3.2. Configuration Processing"}],"url":"#sanitizerconfig-valid"},
"sanitizernamelist-canonical": {"dfnID":"sanitizernamelist-canonical","dfnText":"canonical","external":false,"refSections":[{"refs":[{"id":"ref-for-sanitizernamelist-canonical"},{"id":"ref-for-sanitizernamelist-canonical\u2460"}],"title":"3.2. Configuration Processing"}],"url":"#sanitizernamelist-canonical"},
"sanitizernamelist-valid": {"dfnID":"sanitizernamelist-valid","dfnText":"valid","external":false,"refSections":[{"refs":[{"id":"ref-for-sanitizernamelist-valid"},{"id":"ref-for-sanitizernamelist-valid\u2460"}],"title":"3.2. Configuration Processing"}],"url":"#sanitizernamelist-valid"},
"sanitizernamewithattributeslist-canonical": {"dfnID":"sanitizernamewithattributeslist-canonical","dfnText":"canonical","external":false,"refSections":[{"refs":[{"id":"ref-for-sanitizernamewithattributeslist-canonical"}],"title":"3.2. Configuration Processing"}],"url":"#sanitizernamewithattributeslist-canonical"},
"set-and-filter-html": {"dfnID":"set-and-filter-html","dfnText":"set and filter HTML","external":false,"refSections":[{"refs":[{"id":"ref-for-set-and-filter-html"},{"id":"ref-for-set-and-filter-html\u2460"},{"id":"ref-for-set-and-filter-html\u2461"},{"id":"ref-for-set-and-filter-html\u2462"}],"title":"2.1. Sanitizer API"}],"url":"#set-and-filter-html"},
"set-difference": {"dfnID":"set-difference","dfnText":"difference","external":false,"refSections":[{"refs":[{"id":"ref-for-set-difference"},{"id":"ref-for-set-difference\u2460"},{"id":"ref-for-set-difference\u2461"},{"id":"ref-for-set-difference\u2462"},{"id":"ref-for-set-difference\u2463"},{"id":"ref-for-set-difference\u2464"},{"id":"ref-for-set-difference\u2465"}],"title":"3.2. Configuration Processing"}],"url":"#set-difference"},
"set-equal": {"dfnID":"set-equal","dfnText":"equal","external":false,"refSections":[{"refs":[{"id":"ref-for-set-equal"}],"title":"3.1. Sanitization Algorithms"},{"refs":[{"id":"ref-for-set-equal\u2460"},{"id":"ref-for-set-equal\u2461"}],"title":"3.2. Configuration Processing"},{"refs":[{"id":"ref-for-set-equal\u2462"},{"id":"ref-for-set-equal\u2463"}],"title":"3.3. Supporting Algorithms"}],"url":"#set-equal"},
"typedefdef-sanitizerattribute": {"dfnID":"typedefdef-sanitizerattribute","dfnText":"SanitizerAttribute","external":false,"refSections":[{"refs":[{"id":"ref-for-typedefdef-sanitizerattribute"},{"id":"ref-for-typedefdef-sanitizerattribute\u2460"},{"id":"ref-for-typedefdef-sanitizerattribute\u2461"},{"id":"ref-for-typedefdef-sanitizerattribute\u2462"}],"title":"2.3. The Configuration Dictionary"}],"url":"#typedefdef-sanitizerattribute"},
"typedefdef-sanitizerelement": {"dfnID":"typedefdef-sanitizerelement","dfnText":"SanitizerElement","external":false,"refSections":[{"refs":[{"id":"ref-for-typedefdef-sanitizerelement"},{"id":"ref-for-typedefdef-sanitizerelement\u2460"}],"title":"2.3. The Configuration Dictionary"}],"url":"#typedefdef-sanitizerelement"},
"typedefdef-sanitizerelementwithattributes": {"dfnID":"typedefdef-sanitizerelementwithattributes","dfnText":"SanitizerElementWithAttributes","external":false,"refSections":[{"refs":[{"id":"ref-for-typedefdef-sanitizerelementwithattributes"}],"title":"2.3. The Configuration Dictionary"}],"url":"#typedefdef-sanitizerelementwithattributes"},
};

document.addEventListener("DOMContentLoaded", ()=>{
    genAllDfnPanels();

    document.body.addEventListener("click", (e) => {
        // If not handled already, just hide all dfn panels.
        hideAllDfnPanels();
    });
});

window.addEventListener("resize", () => {
    // Pin any visible dfn panel
    queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(el=>positionDfnPanel(el));
});

function genAllDfnPanels() {
    for(const panelData of Object.values(dfnPanelData)) {
        const dfnID = panelData.dfnID;
        const dfn = document.getElementById(dfnID);
        if(!dfn) {
            console.log(`Can't find dfn#${dfnID}.`, panelData);
            continue;
        }
        dfn.panelData = panelData;
        insertDfnPopupAction(dfn);
    }
}

function genDfnPanel(dfn, { dfnID, url, dfnText, refSections, external }) {
    const dfnPanel = mk.aside({
        class: "dfn-panel on",
        id: `infopanel-for-${dfnID}`,
        "data-for": dfnID,
        "aria-labelled-by":`infopaneltitle-for-${dfnID}`,
        },
        mk.span({id:`infopaneltitle-for-${dfnID}`, style:"display:none"},
            `Info about the '${dfnText}' ${external?"external":""} reference.`),
        mk.a({href:url, class:"dfn-link"}, url),
        refSections.length == 0 ? [] :
            mk.b({}, "Referenced in:"),
            mk.ul({},
                ...refSections.map(section=>
                    mk.li({},
                        ...section.refs.map((ref, refI)=>
                            [
                                mk.a({ href: `#${ref.id}` },
                                    (refI == 0) ? section.title : `(${refI + 1})`
                                ),
                                " ",
                            ]
                        ),
                    ),
                ),
            ),
        genLinkingSyntaxes(dfn),
    );

    dfnPanel.addEventListener('click', (event) => {
        if (event.target.nodeName == 'A') {
            scrollToTargetAndHighlight(event);
            pinDfnPanel(dfnPanel);
        }
        event.stopPropagation();
        refocusOnTarget(event);
    });
    dfnPanel.addEventListener('keydown', (event) => {
        if(event.keyCode == 27) { // Escape key
            hideDfnPanel({dfnPanel});
            event.stopPropagation();
            event.preventDefault();
        }
    });

    dfnPanel.dfn = dfn;
    dfn.dfnPanel = dfnPanel;
    return dfnPanel;
}



function hideAllDfnPanels() {
    // Delete the currently-active dfn panel.
    queryAll(".dfn-panel").forEach(dfnPanel=>hideDfnPanel({dfnPanel}));
}

function showDfnPanel(dfn) {
    hideAllDfnPanels(); // Only display one at a time.

    dfn.setAttribute("aria-expanded", "true");

    const dfnPanel = genDfnPanel(dfn, dfn.panelData);

    // Give the dfn a unique tabindex, and then
    // give all the tabbable panel bits successive indexes.
    let tabIndex = 100;
    dfn.tabIndex = tabIndex++;
    const tabbable = dfnPanel.querySelectorAll(":is(a, button)");
    for (const el of tabbable) {
        el.tabIndex = tabIndex++;
    }

    append(document.body, dfnPanel);
    positionDfnPanel(dfnPanel);
}

function positionDfnPanel(dfnPanel) {
    const dfn = dfnPanel.dfn;
    const dfnPos = getBounds(dfn);
    dfnPanel.style.top = dfnPos.bottom + "px";
    dfnPanel.style.left = dfnPos.left + "px";

    const panelPos = dfnPanel.getBoundingClientRect();
    const panelMargin = 8;
    const maxRight = document.body.parentNode.clientWidth - panelMargin;
    if (panelPos.right > maxRight) {
        const overflowAmount = panelPos.right - maxRight;
        const newLeft = Math.max(panelMargin, dfnPos.left - overflowAmount);
        dfnPanel.style.left = newLeft + "px";
    }
}

function pinDfnPanel(dfnPanel) {
    // Switch it to "activated" state, which pins it.
    dfnPanel.classList.add("activated");
    dfnPanel.style.position = "fixed";
    dfnPanel.style.left = null;
    dfnPanel.style.top = null;
}

function hideDfnPanel({dfn, dfnPanel}) {
    if(!dfnPanel) dfnPanel = dfn.dfnPanel;
    if(!dfn) dfn = dfnPanel.dfn;
    dfn.dfnPanel = undefined;
    dfnPanel.dfn = undefined;
    dfn.setAttribute("aria-expanded", "false");
    dfn.tabIndex = undefined;
    dfnPanel.remove()
}

function toggleDfnPanel(dfn) {
    if(dfn.dfnPanel) {
        hideDfnPanel(dfn);
    } else {
        showDfnPanel(dfn);
    }
}

function insertDfnPopupAction(dfn) {
    dfn.setAttribute('role', 'button');
    dfn.setAttribute('aria-expanded', 'false')
    dfn.tabIndex = 0;
    dfn.classList.add('has-dfn-panel');
    dfn.addEventListener('click', (event) => {
        toggleDfnPanel(dfn);
        event.stopPropagation();
    });
    dfn.addEventListener('keypress', (event) => {
        const kc = event.keyCode;
        // 32->Space, 13->Enter
        if(kc == 32 || kc == 13) {
            toggleDfnPanel(dfn);
            event.stopPropagation();
            event.preventDefault();
        }
    });
}

function refocusOnTarget(event) {
    const target = event.target;
    setTimeout(() => {
        // Refocus on the event.target element.
        // This is needed after browser scrolls to the destination.
        target.focus();
    });
}

// TODO: shared util
// Returns the root-level absolute position {left and top} of element.
function getBounds(el, relativeTo=document.body) {
    const relativeRect = relativeTo.getBoundingClientRect();
    const elRect = el.getBoundingClientRect();
    const top = elRect.top - relativeRect.top;
    const left = elRect.left - relativeRect.left;
    return {
        top,
        left,
        bottom: top + elRect.height,
        right: left + elRect.width,
    }
}

function scrollToTargetAndHighlight(event) {
    let hash = event.target.hash;
    if (hash) {
        hash = decodeURIComponent(hash.substring(1));
        const dest = document.getElementById(hash);
        if (dest) {
            dest.classList.add('highlighted');
            setTimeout(() => dest.classList.remove('highlighted'), 1000);
        }
    }
}

// Functions, divided by link type, that wrap an autolink's
// contents with the appropriate outer syntax.
// Alternately, a string naming another type they format
// the same as.
function needsFor(type) {
    switch(type) {
        case "descriptor":
        case "value":
        case "element-attr":
        case "attr-value":
        case "element-state":
        case "method":
        case "constructor":
        case "argument":
        case "attribute":
        case "const":
        case "dict-member":
        case "event":
        case "enum-value":
        case "stringifier":
        case "serializer":
        case "iterator":
        case "maplike":
        case "setlike":
        case "state":
        case "mode":
        case "context":
        case "facet": return true;

        default: return false;
    }
}
function refusesFor(type) {
    switch(type) {
        case "property":
        case "element":
        case "interface":
        case "namespace":
        case "callback":
        case "dictionary":
        case "enum":
        case "exception":
        case "typedef":
        case "http-header":
        case "permission": return true;

        default: return false;
    }
}
function linkFormatterFromType(type) {
    switch(type) {
        case 'scheme':
        case 'permission':
        case 'dfn': return (text) => `[=${text}=]`;

        case 'abstract-op': return (text) => `[\$${text}\$]`;

        case 'function':
        case 'at-rule':
        case 'selector':
        case 'value': return (text) => `''${text}''`;

        case 'http-header': return (text) => `[:${text}:]`;

        case 'interface':
        case 'constructor':
        case 'method':
        case 'argument':
        case 'attribute':
        case 'callback':
        case 'dictionary':
        case 'dict-member':
        case 'enum':
        case 'enum-value':
        case 'exception':
        case 'const':
        case 'typedef':
        case 'stringifier':
        case 'serializer':
        case 'iterator':
        case 'maplike':
        case 'setlike':
        case 'extended-attribute':
        case 'event':
        case 'idl': return (text) => `{{${text}}}`;

        case 'element-state':
        case 'element-attr':
        case 'attr-value':
        case 'element': return (element) => `<{${element}}>`;

        case 'grammar': return (text) => `${text} (within a <pre class=prod>)`;

        case 'type': return (text)=> `<<${text}>>`;

        case 'descriptor':
        case 'property': return (text) => `'${text}'`;

        default: return;
    };
};

function genLinkingSyntaxes(dfn) {
    if(dfn.tagName != "DFN") return;

    const type = dfn.getAttribute('data-dfn-type');
    if(!type) {
        console.log(`<dfn> doesn't have a data-dfn-type:`, dfn);
        return [];
    }

    // Return a function that wraps link text based on the type
    const linkFormatter = linkFormatterFromType(type);
    if(!linkFormatter) {
        console.log(`<dfn> has an unknown data-dfn-type:`, dfn);
        return [];
    }

    let ltAlts;
    if(dfn.hasAttribute('data-lt')) {
        ltAlts = dfn.getAttribute('data-lt')
            .split("|")
            .map(x=>x.trim());
    } else {
        ltAlts = [dfn.textContent.trim()];
    }
    if(type == "type") {
        // lt of "<foo>", but "foo" is the interior;
        // <<foo/bar>> is how you write it with a for,
        // not <foo/<bar>> or whatever.
        for(var i = 0; i < ltAlts.length; i++) {
            const lt = ltAlts[i];
            const match = /<(.*)>/.exec(lt);
            if(match) { ltAlts[i] = match[1]; }
        }
    }

    let forAlts;
    if(dfn.hasAttribute('data-dfn-for')) {
        forAlts = dfn.getAttribute('data-dfn-for')
            .split(",")
            .map(x=>x.trim());
    } else {
        forAlts = [''];
    }

    let linkingSyntaxes = [];
    if(!needsFor(type)) {
        for(const lt of ltAlts) {
            linkingSyntaxes.push(linkFormatter(lt));
        }
    }
    if(!refusesFor(type)) {
        for(const f of forAlts) {
            linkingSyntaxes.push(linkFormatter(`${f}/${ltAlts[0]}`))
        }
    }
    return [
        mk.b({}, 'Possible linking syntaxes:'),
        mk.ul({},
            ...linkingSyntaxes.map(link => {
                const copyLink = async () =>
                    await navigator.clipboard.writeText(link);
                return mk.li({},
                    mk.div({ class: 'link-item' },
                        mk.button({
                            class: 'copy-icon', title: 'Copy',
                            type: 'button',
                            _onclick: copyLink,
                            tabindex: 0,
                        }, mk.span({ class: 'icon' }) ),
                        mk.span({}, link)
                    )
                );
            })
        )
    ];
}
}
</script>
<script>/* Boilerplate: script-ref-hints */
"use strict";
{
let refsData = {
"#built-in-default-config": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"sanitizer-api","spec":"sanitizer-api-1","status":"local","text":"built-in default config","type":"dfn","url":"#built-in-default-config"},
"#canonicalize-a-configuration": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"sanitizer-api","spec":"sanitizer-api-1","status":"local","text":"canonicalize a configuration","type":"dfn","url":"#canonicalize-a-configuration"},
"#canonicalize-a-sanitizer-element-list": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"sanitizer-api","spec":"sanitizer-api-1","status":"local","text":"canonicalize a sanitizer element list","type":"dfn","url":"#canonicalize-a-sanitizer-element-list"},
"#canonicalize-a-sanitizer-name": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"sanitizer-api","spec":"sanitizer-api-1","status":"local","text":"canonicalize a sanitizer name","type":"dfn","url":"#canonicalize-a-sanitizer-name"},
"#dictdef-sanitizerattributenamespace": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"sanitizer-api","spec":"sanitizer-api-1","status":"local","text":"SanitizerAttributeNamespace","type":"dictionary","url":"#dictdef-sanitizerattributenamespace"},
"#dictdef-sanitizerconfig": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"sanitizer-api","spec":"sanitizer-api-1","status":"local","text":"SanitizerConfig","type":"dictionary","url":"#dictdef-sanitizerconfig"},
"#dictdef-sanitizerelementnamespace": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"sanitizer-api","spec":"sanitizer-api-1","status":"local","text":"SanitizerElementNamespace","type":"dictionary","url":"#dictdef-sanitizerelementnamespace"},
"#dictdef-sanitizerelementnamespacewithattributes": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"sanitizer-api","spec":"sanitizer-api-1","status":"local","text":"SanitizerElementNamespaceWithAttributes","type":"dictionary","url":"#dictdef-sanitizerelementnamespacewithattributes"},
"#dictdef-sethtmloptions": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"sanitizer-api","spec":"sanitizer-api-1","status":"local","text":"SetHTMLOptions","type":"dictionary","url":"#dictdef-sethtmloptions"},
"#dom-element-sethtml": {"export":true,"for_":["Element"],"level":"1","normative":true,"shortname":"sanitizer-api","spec":"sanitizer-api-1","status":"local","text":"setHTML(html)","type":"method","url":"#dom-element-sethtml"},
"#dom-element-sethtmlunsafe": {"export":true,"for_":["Element"],"level":"1","normative":true,"shortname":"sanitizer-api","spec":"sanitizer-api-1","status":"local","text":"setHTMLUnsafe(html)","type":"method","url":"#dom-element-sethtmlunsafe"},
"#dom-sanitizerconfig-attributes": {"export":true,"for_":["SanitizerConfig"],"level":"1","normative":true,"shortname":"sanitizer-api","spec":"sanitizer-api-1","status":"local","text":"attributes","type":"dict-member","url":"#dom-sanitizerconfig-attributes"},
"#dom-sanitizerconfig-comments": {"export":true,"for_":["SanitizerConfig"],"level":"1","normative":true,"shortname":"sanitizer-api","spec":"sanitizer-api-1","status":"local","text":"comments","type":"dict-member","url":"#dom-sanitizerconfig-comments"},
"#dom-sanitizerconfig-dataattributes": {"export":true,"for_":["SanitizerConfig"],"level":"1","normative":true,"shortname":"sanitizer-api","spec":"sanitizer-api-1","status":"local","text":"dataAttributes","type":"dict-member","url":"#dom-sanitizerconfig-dataattributes"},
"#dom-sanitizerconfig-elements": {"export":true,"for_":["SanitizerConfig"],"level":"1","normative":true,"shortname":"sanitizer-api","spec":"sanitizer-api-1","status":"local","text":"elements","type":"dict-member","url":"#dom-sanitizerconfig-elements"},
"#dom-sanitizerconfig-removeattributes": {"export":true,"for_":["SanitizerConfig"],"level":"1","normative":true,"shortname":"sanitizer-api","spec":"sanitizer-api-1","status":"local","text":"removeAttributes","type":"dict-member","url":"#dom-sanitizerconfig-removeattributes"},
"#dom-sanitizerconfig-removeelements": {"export":true,"for_":["SanitizerConfig"],"level":"1","normative":true,"shortname":"sanitizer-api","spec":"sanitizer-api-1","status":"local","text":"removeElements","type":"dict-member","url":"#dom-sanitizerconfig-removeelements"},
"#dom-sanitizerconfig-replacewithchildrenelements": {"export":true,"for_":["SanitizerConfig"],"level":"1","normative":true,"shortname":"sanitizer-api","spec":"sanitizer-api-1","status":"local","text":"replaceWithChildrenElements","type":"dict-member","url":"#dom-sanitizerconfig-replacewithchildrenelements"},
"#dom-sanitizerelementnamespace-name": {"export":true,"for_":["SanitizerElementNamespace"],"level":"1","normative":true,"shortname":"sanitizer-api","spec":"sanitizer-api-1","status":"local","text":"name","type":"dict-member","url":"#dom-sanitizerelementnamespace-name"},
"#dom-sanitizerelementnamespace-namespace": {"export":true,"for_":["SanitizerElementNamespace"],"level":"1","normative":true,"shortname":"sanitizer-api","spec":"sanitizer-api-1","status":"local","text":"namespace","type":"dict-member","url":"#dom-sanitizerelementnamespace-namespace"},
"#dom-sanitizerelementnamespacewithattributes-attributes": {"export":true,"for_":["SanitizerElementNamespaceWithAttributes"],"level":"1","normative":true,"shortname":"sanitizer-api","spec":"sanitizer-api-1","status":"local","text":"attributes","type":"dict-member","url":"#dom-sanitizerelementnamespacewithattributes-attributes"},
"#dom-sanitizerelementnamespacewithattributes-removeattributes": {"export":true,"for_":["SanitizerElementNamespaceWithAttributes"],"level":"1","normative":true,"shortname":"sanitizer-api","spec":"sanitizer-api-1","status":"local","text":"removeAttributes","type":"dict-member","url":"#dom-sanitizerelementnamespacewithattributes-removeattributes"},
"#known-attributes": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"sanitizer-api","spec":"sanitizer-api-1","status":"local","text":"known attributes","type":"dfn","url":"#known-attributes"},
"#known-elements": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"sanitizer-api","spec":"sanitizer-api-1","status":"local","text":"known elements","type":"dfn","url":"#known-elements"},
"#navigating-url-attributes-list": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"sanitizer-api","spec":"sanitizer-api-1","status":"local","text":"navigating url attributes list","type":"dfn","url":"#navigating-url-attributes-list"},
"#sanitize": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"sanitizer-api","spec":"sanitizer-api-1","status":"local","text":"sanitize","type":"dfn","url":"#sanitize"},
"#sanitizer": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"sanitizer-api","spec":"sanitizer-api-1","status":"local","text":"Sanitizer","type":"interface","url":"#sanitizer"},
"#sanitizerconfig-canonical": {"export":true,"for_":["SanitizerConfig"],"level":"1","normative":true,"shortname":"sanitizer-api","spec":"sanitizer-api-1","status":"local","text":"canonical","type":"dfn","url":"#sanitizerconfig-canonical"},
"#sanitizerconfig-contains": {"export":true,"for_":["SanitizerConfig"],"level":"1","normative":true,"shortname":"sanitizer-api","spec":"sanitizer-api-1","status":"local","text":"contains","type":"dfn","url":"#sanitizerconfig-contains"},
"#sanitizerconfig-get-a-sanitizer-config-from-options": {"export":true,"for_":["SanitizerConfig"],"level":"1","normative":true,"shortname":"sanitizer-api","spec":"sanitizer-api-1","status":"local","text":"get a sanitizer config from options","type":"dfn","url":"#sanitizerconfig-get-a-sanitizer-config-from-options"},
"#sanitizerconfig-valid": {"export":true,"for_":["SanitizerConfig"],"level":"1","normative":true,"shortname":"sanitizer-api","spec":"sanitizer-api-1","status":"local","text":"valid","type":"dfn","url":"#sanitizerconfig-valid"},
"#sanitizernamelist-canonical": {"export":true,"for_":["SanitizerNameList"],"level":"1","normative":true,"shortname":"sanitizer-api","spec":"sanitizer-api-1","status":"local","text":"canonical","type":"dfn","url":"#sanitizernamelist-canonical"},
"#sanitizernamelist-valid": {"export":true,"for_":["SanitizerNameList"],"level":"1","normative":true,"shortname":"sanitizer-api","spec":"sanitizer-api-1","status":"local","text":"valid","type":"dfn","url":"#sanitizernamelist-valid"},
"#sanitizernamewithattributeslist-canonical": {"export":true,"for_":["SanitizerNameWithAttributesList"],"level":"1","normative":true,"shortname":"sanitizer-api","spec":"sanitizer-api-1","status":"local","text":"canonical","type":"dfn","url":"#sanitizernamewithattributeslist-canonical"},
"#set-and-filter-html": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"sanitizer-api","spec":"sanitizer-api-1","status":"local","text":"set and filter html","type":"dfn","url":"#set-and-filter-html"},
"#set-difference": {"export":true,"for_":["set"],"level":"1","normative":true,"shortname":"sanitizer-api","spec":"sanitizer-api-1","status":"local","text":"difference","type":"dfn","url":"#set-difference"},
"#set-equal": {"export":true,"for_":["set"],"level":"1","normative":true,"shortname":"sanitizer-api","spec":"sanitizer-api-1","status":"local","text":"equal","type":"dfn","url":"#set-equal"},
"#typedefdef-sanitizerattribute": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"sanitizer-api","spec":"sanitizer-api-1","status":"local","text":"SanitizerAttribute","type":"typedef","url":"#typedefdef-sanitizerattribute"},
"#typedefdef-sanitizerelement": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"sanitizer-api","spec":"sanitizer-api-1","status":"local","text":"SanitizerElement","type":"typedef","url":"#typedefdef-sanitizerelement"},
"#typedefdef-sanitizerelementwithattributes": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"sanitizer-api","spec":"sanitizer-api-1","status":"local","text":"SanitizerElementWithAttributes","type":"typedef","url":"#typedefdef-sanitizerelementwithattributes"},
"https://dom.spec.whatwg.org/#comment": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"Comment","type":"interface","url":"https://dom.spec.whatwg.org/#comment"},
"https://dom.spec.whatwg.org/#concept-attribute-local-name": {"export":true,"for_":["Attr"],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"local name","type":"dfn","url":"https://dom.spec.whatwg.org/#concept-attribute-local-name"},
"https://dom.spec.whatwg.org/#concept-attribute-namespace": {"export":true,"for_":["Attr"],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"namespace","type":"dfn","url":"https://dom.spec.whatwg.org/#concept-attribute-namespace"},
"https://dom.spec.whatwg.org/#concept-document-content-type": {"export":true,"for_":["Document"],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"content type","type":"dfn","url":"https://dom.spec.whatwg.org/#concept-document-content-type"},
"https://dom.spec.whatwg.org/#concept-element-attribute": {"export":true,"for_":["Element"],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"attribute list","type":"dfn","url":"https://dom.spec.whatwg.org/#concept-element-attribute"},
"https://dom.spec.whatwg.org/#concept-element-local-name": {"export":true,"for_":["Element"],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"local name","type":"dfn","url":"https://dom.spec.whatwg.org/#concept-element-local-name"},
"https://dom.spec.whatwg.org/#concept-element-namespace": {"export":true,"for_":["Element"],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"namespace","type":"dfn","url":"https://dom.spec.whatwg.org/#concept-element-namespace"},
"https://dom.spec.whatwg.org/#concept-element-shadow-root": {"export":true,"for_":["Element"],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"shadow root","type":"dfn","url":"https://dom.spec.whatwg.org/#concept-element-shadow-root"},
"https://dom.spec.whatwg.org/#concept-node-document": {"export":true,"for_":["Node"],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"node document","type":"dfn","url":"https://dom.spec.whatwg.org/#concept-node-document"},
"https://dom.spec.whatwg.org/#concept-node-remove": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"remove","type":"dfn","url":"https://dom.spec.whatwg.org/#concept-node-remove"},
"https://dom.spec.whatwg.org/#concept-node-replace-all": {"export":true,"for_":["Node"],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"replace all","type":"dfn","url":"https://dom.spec.whatwg.org/#concept-node-replace-all"},
"https://dom.spec.whatwg.org/#concept-tree-child": {"export":true,"for_":["tree"],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"children","type":"dfn","url":"https://dom.spec.whatwg.org/#concept-tree-child"},
"https://dom.spec.whatwg.org/#concept-tree-root": {"export":true,"for_":["tree"],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"root","type":"dfn","url":"https://dom.spec.whatwg.org/#concept-tree-root"},
"https://dom.spec.whatwg.org/#document": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"Document","type":"interface","url":"https://dom.spec.whatwg.org/#document"},
"https://dom.spec.whatwg.org/#document-allow-declarative-shadow-roots": {"export":true,"for_":["Document"],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"allow declarative shadow roots","type":"dfn","url":"https://dom.spec.whatwg.org/#document-allow-declarative-shadow-roots"},
"https://dom.spec.whatwg.org/#documentfragment": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"DocumentFragment","type":"interface","url":"https://dom.spec.whatwg.org/#documentfragment"},
"https://dom.spec.whatwg.org/#element": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"Element","type":"interface","url":"https://dom.spec.whatwg.org/#element"},
"https://dom.spec.whatwg.org/#element-shadow-host": {"export":true,"for_":["Element"],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"shadow host","type":"dfn","url":"https://dom.spec.whatwg.org/#element-shadow-host"},
"https://dom.spec.whatwg.org/#node": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"Node","type":"interface","url":"https://dom.spec.whatwg.org/#node"},
"https://dom.spec.whatwg.org/#parentnode": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"ParentNode","type":"interface","url":"https://dom.spec.whatwg.org/#parentnode"},
"https://dom.spec.whatwg.org/#shadowroot": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"ShadowRoot","type":"interface","url":"https://dom.spec.whatwg.org/#shadowroot"},
"https://dom.spec.whatwg.org/#text": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"Text","type":"interface","url":"https://dom.spec.whatwg.org/#text"},
"https://dom.spec.whatwg.org/#widl-Element-innerHTML": {"export":true,"for_":["Element"],"level":"1","normative":true,"shortname":"sanitizer-api","spec":"","status":"anchor-block","text":"innerHTML","type":"attribute","url":"https://dom.spec.whatwg.org/#widl-Element-innerHTML"},
"https://html.spec.whatwg.org/#parse-html-from-a-string": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"sanitizer-api","spec":"","status":"anchor-block","text":"parse html from a string","type":"dfn","url":"https://html.spec.whatwg.org/#parse-html-from-a-string"},
"https://html.spec.whatwg.org/#template-contents": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"sanitizer-api","spec":"","status":"anchor-block","text":"template contents","type":"dfn","url":"https://html.spec.whatwg.org/#template-contents"},
"https://html.spec.whatwg.org/multipage/custom-elements.html#cereactions": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"CEReactions","type":"extended-attribute","url":"https://html.spec.whatwg.org/multipage/custom-elements.html#cereactions"},
"https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#dom-domparser-parsefromstring": {"export":true,"for_":["DOMParser"],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"parseFromString(string, type)","type":"method","url":"https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#dom-domparser-parsefromstring"},
"https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#domparser": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"DOMParser","type":"interface","url":"https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#domparser"},
"https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#fragment-parsing-algorithm-steps": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"fragment parsing algorithm steps","type":"dfn","url":"https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#fragment-parsing-algorithm-steps"},
"https://html.spec.whatwg.org/multipage/scripting.html#htmltemplateelement": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"HTMLTemplateElement","type":"interface","url":"https://html.spec.whatwg.org/multipage/scripting.html#htmltemplateelement"},
"https://infra.spec.whatwg.org/#assert": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"assert","type":"dfn","url":"https://infra.spec.whatwg.org/#assert"},
"https://infra.spec.whatwg.org/#boolean": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"boolean","type":"dfn","url":"https://infra.spec.whatwg.org/#boolean"},
"https://infra.spec.whatwg.org/#code-unit-prefix": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"code unit prefix","type":"dfn","url":"https://infra.spec.whatwg.org/#code-unit-prefix"},
"https://infra.spec.whatwg.org/#html-namespace": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"html namespace","type":"dfn","url":"https://infra.spec.whatwg.org/#html-namespace"},
"https://infra.spec.whatwg.org/#iteration-continue": {"export":true,"for_":["iteration"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"continue","type":"dfn","url":"https://infra.spec.whatwg.org/#iteration-continue"},
"https://infra.spec.whatwg.org/#list": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"list","type":"dfn","url":"https://infra.spec.whatwg.org/#list"},
"https://infra.spec.whatwg.org/#list-append": {"export":true,"for_":["list"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"append","type":"dfn","url":"https://infra.spec.whatwg.org/#list-append"},
"https://infra.spec.whatwg.org/#list-contain": {"export":true,"for_":["list","stack","queue","set"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"contain","type":"dfn","url":"https://infra.spec.whatwg.org/#list-contain"},
"https://infra.spec.whatwg.org/#list-empty": {"export":true,"for_":["list","stack","queue","set"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"empty","type":"dfn","url":"https://infra.spec.whatwg.org/#list-empty"},
"https://infra.spec.whatwg.org/#list-iterate": {"export":true,"for_":["list","set"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"iterate","type":"dfn","url":"https://infra.spec.whatwg.org/#list-iterate"},
"https://infra.spec.whatwg.org/#list-remove": {"export":true,"for_":["list","set"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"remove","type":"dfn","url":"https://infra.spec.whatwg.org/#list-remove"},
"https://infra.spec.whatwg.org/#map-exists": {"export":true,"for_":["map"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"exist","type":"dfn","url":"https://infra.spec.whatwg.org/#map-exists"},
"https://infra.spec.whatwg.org/#map-getting-the-keys": {"export":true,"for_":["map"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"keys","type":"dfn","url":"https://infra.spec.whatwg.org/#map-getting-the-keys"},
"https://infra.spec.whatwg.org/#map-getting-the-values": {"export":true,"for_":["map"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"values","type":"dfn","url":"https://infra.spec.whatwg.org/#map-getting-the-values"},
"https://infra.spec.whatwg.org/#ordered-map": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"ordered map","type":"dfn","url":"https://infra.spec.whatwg.org/#ordered-map"},
"https://infra.spec.whatwg.org/#ordered-set": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"ordered set","type":"dfn","url":"https://infra.spec.whatwg.org/#ordered-set"},
"https://infra.spec.whatwg.org/#set-append": {"export":true,"for_":["set"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"append","type":"dfn","url":"https://infra.spec.whatwg.org/#set-append"},
"https://infra.spec.whatwg.org/#set-intersection": {"export":true,"for_":["set"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"intersection","type":"dfn","url":"https://infra.spec.whatwg.org/#set-intersection"},
"https://infra.spec.whatwg.org/#set-subset": {"export":true,"for_":["set"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"subset","type":"dfn","url":"https://infra.spec.whatwg.org/#set-subset"},
"https://infra.spec.whatwg.org/#set-superset": {"export":true,"for_":["set"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"superset","type":"dfn","url":"https://infra.spec.whatwg.org/#set-superset"},
"https://infra.spec.whatwg.org/#string": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"string","type":"dfn","url":"https://infra.spec.whatwg.org/#string"},
"https://infra.spec.whatwg.org/#svg-namespace": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"svg namespace","type":"dfn","url":"https://infra.spec.whatwg.org/#svg-namespace"},
"https://msdn.microsoft.com/en-us/library/cc848922(v=vs.85).aspx": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"sanitizer-api","spec":"","status":"anchor-block","text":"window.toStaticHTML()","type":"method","url":"https://msdn.microsoft.com/en-us/library/cc848922(v=vs.85).aspx"},
"https://tc39.es/ecma262/#sec-ordinary-object-internal-methods-and-internal-slots": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"sanitizer-api","spec":"","status":"anchor-block","text":"internal slot","type":"dfn","url":"https://tc39.es/ecma262/#sec-ordinary-object-internal-methods-and-internal-slots"},
"https://urlpattern.spec.whatwg.org/#constructor-string-parser-state-protocol": {"export":true,"for_":["constructor string parser/state"],"level":"1","normative":true,"shortname":"urlpattern","spec":"urlpattern","status":"current","text":"protocol","type":"dfn","url":"https://urlpattern.spec.whatwg.org/#constructor-string-parser-state-protocol"},
"https://w3c.github.io/trusted-types/dist/spec/#typedefdef-htmlstring": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"trusted-types","spec":"trusted-types","status":"current","text":"HTMLString","type":"typedef","url":"https://w3c.github.io/trusted-types/dist/spec/#typedefdef-htmlstring"},
"https://webidl.spec.whatwg.org/#Exposed": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"Exposed","type":"extended-attribute","url":"https://webidl.spec.whatwg.org/#Exposed"},
"https://webidl.spec.whatwg.org/#dfn-dictionary": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"dictionary","type":"dfn","url":"https://webidl.spec.whatwg.org/#dfn-dictionary"},
"https://webidl.spec.whatwg.org/#dfn-throw": {"export":true,"for_":["exception"],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"throw","type":"dfn","url":"https://webidl.spec.whatwg.org/#dfn-throw"},
"https://webidl.spec.whatwg.org/#exceptiondef-typeerror": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"TypeError","type":"exception","url":"https://webidl.spec.whatwg.org/#exceptiondef-typeerror"},
"https://webidl.spec.whatwg.org/#idl-DOMString": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"DOMString","type":"interface","url":"https://webidl.spec.whatwg.org/#idl-DOMString"},
"https://webidl.spec.whatwg.org/#idl-boolean": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"boolean","type":"interface","url":"https://webidl.spec.whatwg.org/#idl-boolean"},
"https://webidl.spec.whatwg.org/#idl-sequence": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"sequence","type":"dfn","url":"https://webidl.spec.whatwg.org/#idl-sequence"},
"https://webidl.spec.whatwg.org/#idl-undefined": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"undefined","type":"interface","url":"https://webidl.spec.whatwg.org/#idl-undefined"},
"https://webidl.spec.whatwg.org/#implements": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"implements","type":"dfn","url":"https://webidl.spec.whatwg.org/#implements"},
"https://webidl.spec.whatwg.org/#this": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"this","type":"dfn","url":"https://webidl.spec.whatwg.org/#this"},
"https://wicg.github.io/speech-api/#dom-speechgrammarlist-addfromstring-string-weight-string": {"export":true,"for_":["SpeechGrammarList/addFromString(string, weight)","SpeechGrammarList/addFromString(string)"],"level":"1","normative":true,"shortname":"speech-api","spec":"speech-api","status":"current","text":"string","type":"argument","url":"https://wicg.github.io/speech-api/#dom-speechgrammarlist-addfromstring-string-weight-string"},
};

function mkRefHint(link, ref) {
    const linkText = link.textContent;
    let dfnTextElements = '';
    if (ref.text != linkText) {
        dfnTextElements =
            mk.li({},
                mk.b({}, "Term: "),
                mk.span({}, ref.text)
            );
    }
    const forList = ref.for_;
    let forListElements;
    if(forList.length == 0) {
        forListElements = [];
    } else if(forList.length == 1) {
        forListElements = mk.li({},
            mk.b({}, "For: "),
            mk.span({}, forList[0]),
        );
    } else {
        forListElements = mk.li({},
            mk.b({}, "For: "),
            mk.ul({},
                ...forList.map(forItem =>
                    mk.li({},
                        mk.span({}, forItem)
                    ),
                ),
            ),
        );
    }
    const url = ref.url;
    const safeUrl = encodeURIComponent(url);
    const hintPanel = mk.aside({
        class: "ref-hint",
        id: `ref-hint-for-${safeUrl}`,
        "data-for": url,
        "aria-labelled-by": `ref-hint-for-${safeUrl}`,
    },
        mk.ul({},
            dfnTextElements,
            mk.li({},
                mk.b({}, "URL: "),
                mk.a({ href: url, class: "ref" }, url),
            ),
            mk.li({},
                mk.b({}, "Type: "),
                mk.span({}, `${ref.type}`),
            ),
            mk.li({},
                mk.b({}, "Spec: "),
                mk.span({}, `${ref.spec ? ref.spec : ''}`),
            ),
            forListElements
        ),
    );
    hintPanel.forLink = link;
    setupRefHintEventListeners(link, hintPanel);
    return hintPanel;
}

function hideAllRefHints() {
    queryAll(".ref-hint").forEach(el=>hideRefHint(el));
}

function hideRefHint(refHint) {
    const link = refHint.forLink;
    link.setAttribute("aria-expanded", "false");
    if(refHint.teardownEventListeners) {
        refHint.teardownEventListeners();
    }
    refHint.remove();
}

function showRefHint(link) {
    if(link.classList.contains("dfn-link")) return;
    const url = link.getAttribute("href");
    const ref = refsData[url];
    if(!ref) return;

    hideAllRefHints(); // Only display one at this time.

    const refHint = mkRefHint(link, ref);
    append(document.body, refHint);
    link.setAttribute("aria-expanded", "true");
    positionRefHint(refHint);
}

function setupRefHintEventListeners(link, refHint) {
    if (refHint.teardownEventListeners) return;
    // Add event handlers to hide the refHint after the user moves away
    // from both the link and refHint, if not hovering either within one second.
    let timeout = null;
    const startHidingRefHint = (event) => {
        if (timeout) {
            clearTimeout(timeout);
        }
        timeout = setTimeout(() => {
            hideRefHint(refHint);
        }, 1000);
    }
    const resetHidingRefHint = (event) => {
        if (timeout) clearTimeout(timeout);
        timeout = null;
    };
    link.addEventListener("mouseleave", startHidingRefHint);
    link.addEventListener("mouseenter", resetHidingRefHint);
    link.addEventListener("blur", startHidingRefHint);
    link.addEventListener("focus", resetHidingRefHint);
    refHint.addEventListener("mouseleave", startHidingRefHint);
    refHint.addEventListener("mouseenter", resetHidingRefHint);
    refHint.addEventListener("blur", startHidingRefHint);
    refHint.addEventListener("focus", resetHidingRefHint);

    refHint.teardownEventListeners = () => {
        // remove event listeners
        resetHidingRefHint();
        link.removeEventListener("mouseleave", startHidingRefHint);
        link.removeEventListener("mouseenter", resetHidingRefHint);
        link.removeEventListener("blur", startHidingRefHint);
        link.removeEventListener("focus", resetHidingRefHint);
        refHint.removeEventListener("mouseleave", startHidingRefHint);
        refHint.removeEventListener("mouseenter", resetHidingRefHint);
        refHint.removeEventListener("blur", startHidingRefHint);
        refHint.removeEventListener("focus", resetHidingRefHint);
    };
}

function positionRefHint(refHint) {
    const link = refHint.forLink;
    const linkPos = getBounds(link);
    refHint.style.top = linkPos.bottom + "px";
    refHint.style.left = linkPos.left + "px";

    const panelPos = refHint.getBoundingClientRect();
    const panelMargin = 8;
    const maxRight = document.body.parentNode.clientWidth - panelMargin;
    if (panelPos.right > maxRight) {
        const overflowAmount = panelPos.right - maxRight;
        const newLeft = Math.max(panelMargin, linkPos.left - overflowAmount);
        refHint.style.left = newLeft + "px";
    }
}

// TODO: shared util
// Returns the root-level absolute position {left and top} of element.
function getBounds(el, relativeTo=document.body) {
    const relativeRect = relativeTo.getBoundingClientRect();
    const elRect = el.getBoundingClientRect();
    const top = elRect.top - relativeRect.top;
    const left = elRect.left - relativeRect.left;
    return {
        top,
        left,
        bottom: top + elRect.height,
        right: left + elRect.width,
    }
}

function showRefHintListener(e) {
    // If the target isn't in a link (or is a link),
    // just ignore it.
    let link = e.target.closest("a");
    if(!link) return;

    // If the target is in a ref-hint panel
    // (aka a link in the already-open one),
    // also just ignore it.
    if(link.closest(".ref-hint")) return;

    // Otherwise, show the panel for the link.
    showRefHint(link);
}

function hideAllHintsListener(e) {
    // If the click is inside a ref-hint panel, ignore it.
    if(e.target.closest(".ref-hint")) return;
    // Otherwise, close all the current panels.
    hideAllRefHints();
}

document.addEventListener("DOMContentLoaded", () => {
    document.body.addEventListener("mousedown", showRefHintListener);
    document.body.addEventListener("focus", showRefHintListener);

    document.body.addEventListener("click", hideAllHintsListener);
});

window.addEventListener("resize", () => {
    // Hide any open ref hint.
    hideAllRefHints();
});
}
</script>
<script>/* Boilerplate: script-var-click-highlighting */
"use strict";
{
/*
Color-choosing design:

* Colors are ordered by goodness.
* On clicking a var, give it the earliest color
    with the lowest usage in the algorithm.
* On re-clicking, re-use the var's most recent color
    if that's not currently being used elsewhere.
*/

const COLOR_COUNT = 7;

document.addEventListener("click", e=>{
    if(e.target.nodeName == "VAR") {
        highlightSameAlgoVars(e.target);
    }
});

function highlightSameAlgoVars(v) {
    // Find the algorithm container.
    let algoContainer = findAlgoContainer(v);

    // Not highlighting document-global vars,
    // too likely to be unrelated.
    if(algoContainer == null) return;

    const varName = nameFromVar(v);
    if(!v.hasAttribute("data-var-color")) {
        const newColor = chooseHighlightColor(algoContainer, v);
        for(const el of algoContainer.querySelectorAll("var")) {
            if(nameFromVar(el) == varName) {
                el.setAttribute("data-var-color", newColor);
                el.setAttribute("data-var-last-color", newColor);
            }
        }
    } else {
        for(const el of algoContainer.querySelectorAll("var")) {
            if(nameFromVar(el) == varName) {
                el.removeAttribute("data-var-color");
            }
        }
    }
}
function findAlgoContainer(el) {
    while(el != document.body) {
        if(el.hasAttribute("data-algorithm")) return el;
        el = el.parentNode;
    }
    return null;
}
function nameFromVar(el) {
    return el.textContent.replace(/(\s|\xa0)+/g, " ").trim();
}
function colorCountsFromContainer(container) {
    const namesFromColor = Array.from({length:COLOR_COUNT}, x=>new Set());
    for(let v of container.querySelectorAll("var[data-var-color]")) {
        let color = +v.getAttribute("data-var-color");
        namesFromColor[color].add(nameFromVar(v));
    }

    return namesFromColor.map(x=>x.size);
}
function leastUsedColor(colors) {
    // Find the earliest color with the lowest count.
    let minCount = Infinity;
    let minColor = null;
    for(var i = 0; i < colors.length; i++) {
        if(colors[i] < minCount) {
            minColor = i;
            minCount = colors[i];
        }
    }
    return minColor;
}
function chooseHighlightColor(container, v) {
    const colorCounts = colorCountsFromContainer(container);
    if(v.hasAttribute("data-var-last-color")) {
        let color = +v.getAttribute("data-var-last-color");
        if(colorCounts[color] == 0) return color;
    }
    return leastUsedColor(colorCounts);
}
}
</script>